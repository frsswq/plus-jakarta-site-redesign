import{r as He,a as Xn,b as Yn,c as Bn,d as Xr,e as Fn,f as kn,g as Rn,h as qn}from"./vendor.DRT6gzuD.js";var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wn(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function li(S){if(S.__esModule)return S;var r=S.default;if(typeof r=="function"){var P=function p(){return this instanceof p?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};P.prototype=r.prototype}else P={};return Object.defineProperty(P,"__esModule",{value:!0}),Object.keys(S).forEach(function(p){var I=Object.getOwnPropertyDescriptor(S,p);Object.defineProperty(P,p,I.get?I:{enumerable:!0,get:function(){return S[p]}})}),P}var le,Je;function Vt(){if(Je)return le;Je=1;var S={};S.sum=function(d){var h,u=d.length,x=0;for(h=0;h<u;h+=1)x+=d[h];return x},S.round=function(d,h){return h?Math.round(d*Math.pow(10,h))/Math.pow(10,h):Math.round(d)},S.sign=function(d){return d<0?-1:d>0?1:0},S.degrees=function(d){return d*180/Math.PI},S.radians=function(d){return d/180*Math.PI},S.clamp=function(d,h,u){return h<u?d<h?h:d>u?u:d:d<u?u:d>h?h:d},S.snap=function(d,h,u){return u=u!==void 0?u:1,d*(1-u)+u*Math.round(d/h)*h},S.dot=function(d,h){var u=Math.min(d.length,h.length),x=0,b;for(b=0;b<u;b+=1)x+=d[b]*h[b];return x};var r=S.mix=S.lerp=function(d,h,u,x){if(x){if(u<0)return d;if(u>1)return h}return d+(h-d)*u};function P(d){return d*d*d*(d*(d*6-15)+10)}function p(d,h,u,x){var b,C,w;return b=d&15,C=b<8?h:u,w=b<4?u:b===12||b===14?h:x,(b&1?-C:C)+(b&2?-w:w)}function I(d){return(1+d)/2}var o=function(){var d,h,u;for(d=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],h=new Uint8Array(512),u=0;u<256;u+=1)h[256+u]=h[u]=d[u];return h}();return S.noise=function(d,h,u){var x=o,b=Math.floor(d)&255,C=Math.floor(h)&255,w=Math.floor(u)&255;d-=Math.floor(d),h-=Math.floor(h),u-=Math.floor(u);var O=P(d),l=P(h),g=P(u),m=x[b]+C,i=x[m]+w,s=x[m+1]+w,a=x[b+1]+C,y=x[a]+w,c=x[a+1]+w;return I(r(r(r(p(x[i],d,h,u),p(x[y],d-1,h,u),O),r(p(x[s],d,h-1,u),p(x[c],d-1,h-1,u),O),l),r(r(p(x[i+1],d,h,u-1),p(x[y+1],d-1,h,u-1),O),r(p(x[s+1],d,h-1,u-1),p(x[c+1],d-1,h-1,u-1),O),l),g))},le=S,le}var ae,je;function Zt(){if(je)return ae;je=1;var S=function(r,P){this.x=r!==void 0?r:0,this.y=P!==void 0?P:0};return Object.defineProperty(S.prototype,"xy",{get:function(){return[this.x,this.y]}}),S.ZERO=new S(0,0),S.read=function(r,P){if(arguments.length===2)return new S(r,P);var p=r;return p instanceof S?p:typeof p=="number"?new S(p,p):Array.isArray(p)?p.length===0?S.ZERO:(r=p[0],P=p.length>1?p[1]:r,new S(r,P)):p.x!==void 0&&p.y!==void 0?new S(p.x,p.y):S.ZERO},S.prototype.clone=function(){return new S(this.x,this.y)},S.prototype.add=function(r){return new S(this.x+r.x,this.y+r.y)},S.prototype.subtract=S.prototype.sub=function(r){return new S(this.x-r.x,this.y-r.y)},S.prototype.divide=function(r){return new S(this.x/r,this.y/r)},S.prototype.multiply=function(r){return new S(this.x*r,this.y*r)},S.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},S.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y},S.prototype.heading=function(){return Math.atan2(this.y,this.x)},S.prototype.distanceTo=function(r){var P=this.x-r.x,p=this.y-r.y;return Math.sqrt(P*P+p*p)},S.prototype.normalize=function(){var r=this.magnitude();return r!==0?this.divide(r):S.ZERO},S.prototype.limit=function(r){return this.magnitudeSquared()>r*r?this.normalize().multiply(r):this},S.prototype.translate=function(r,P){return new S(this.x+r,this.y+P)},S.prototype.scale=function(r,P){return P=P!==void 0?P:r,new S(this.x*r,this.y*P)},S.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},ae=S,ae}var fe,Qe;function jt(){if(Qe)return fe;Qe=1;var S=Zt(),r=function(P,p,I,o){this.x=P!==void 0?P:0,this.y=p!==void 0?p:0,this.width=I!==void 0?I:0,this.height=o!==void 0?o:0};return Object.defineProperty(r.prototype,"xywh",{get:function(){return[this.x,this.y,this.width,this.height]}}),r.prototype.normalize=function(){var P=this.x,p=this.y,I=this.width,o=this.height;return I<0&&(P+=I,I=-I),o<0&&(p+=o,o=-o),new r(P,p,I,o)},r.prototype.containsPoint=function(P,p){return arguments.length===1&&(p=P.y,P=P.x),P>=this.x&&P<=this.x+this.width&&p>=this.y&&p<=this.y+this.height},r.prototype.containsRect=function(P){return P.x>=this.x&&P.x+P.width<=this.x+this.width&&P.y>=this.y&&P.y+P.height<=this.y+this.height},r.prototype.grow=function(P,p){var I=this.x-P,o=this.y-p,d=this.width+P*2,h=this.height+p*2;return new r(I,o,d,h)},r.prototype.unite=function(P){var p=Math.min(this.x,P.x),I=Math.min(this.y,P.y),o=Math.max(this.x+this.width,P.x+P.width)-p,d=Math.max(this.y+this.height,P.y+P.height)-I;return new r(p,I,o,d)},r.prototype.addPoint=function(P,p){var I,o,d=this.x,h=this.y,u=this.width,x=this.height;return P<this.x?(I=this.x-P,d=P,u+=I):P>this.x+this.width&&(I=P-(this.x+this.width),u+=I),p<this.y?(o=this.y-p,h=p,x+=o):p>this.y+this.height&&(o=p-(this.y+this.height),x+=o),new r(d,h,u,x)},r.prototype.centerPoint=function(){return new S(this.x+this.width/2,this.y+this.height/2)},fe=r,fe}var ue,$e;function ee(){if($e)return ue;$e=1;var S=Vt(),r=Zt(),P=jt(),p={},I=p.MOVETO="M",o=p.LINETO="L";p.QUADTO="Q";var d=p.CURVETO="C",h=p.CLOSE="Z";p.linePoint=function(C,w,O,l,g){var m=w+C*(l-w),i=O+C*(g-O);return{type:o,x:m,y:i}},p.lineLength=function(C,w,O,l){var g=Math.pow(Math.abs(C-O),2),m=Math.pow(Math.abs(w-l),2);return Math.sqrt(g+m)},p.curvePoint=function(C,w,O,l,g,m,i,s,a){var y=1-C,c=w*y+l*C,_=O*y+g*C,T=l*y+m*C,A=g*y+i*C,N=m*y+s*C,Y=i*y+a*C,F=c*y+T*C,W=_*y+A*C,U=T*y+N*C,H=A*y+Y*C,J=F*y+U*C,D=W*y+H*C;return{type:d,x1:F,y1:W,x2:U,y2:H,x:J,y:D}},p.curveLength=function(C,w,O,l,g,m,i,s,a){a===void 0&&(a=20);var y,c,_,T=0,A=C,N=w;for(y=0;y<a;y+=1)c=(y+1)/a,_=p.curvePoint(c,C,w,O,l,g,m,i,s),T+=Math.sqrt(Math.pow(Math.abs(A-_.x),2)+Math.pow(Math.abs(N-_.y),2)),A=_.x,N=_.y;return T},p.segmentLengths=function(C,w,O){w=w!==void 0?w:!1,O===void 0&&(O=20);var l,g,m,i,s,a,y,c,_,T;for(_=[],l=0;l<C.length;l+=1)g=C[l],m=g.type,l===0?(i=g.x,s=g.y):m===I?(i=g.x,s=g.y,_.push(0)):m===h?_.push(p.lineLength(a,y,i,s)):m===o?_.push(p.lineLength(a,y,g.x,g.y)):m===d&&_.push(p.curveLength(a,y,g.x1,g.y1,g.x2,g.y2,g.x,g.y,O)),m!==h&&(a=g.x,y=g.y);if(w===!0){if(c=S.sum(_),T=[],T.length=_.length,c>0)for(l=0;l<_.length;l+=1)T[l]=_[l]/c;else for(l=0;l<_.length;l+=1)T[l]=0;return T}return _},p.length=function(C,w){return w=w||20,S.sum(p.segmentLengths(C.commands,!1,w))},p._locate=function(C,w,O){var l,g,m;for(O===void 0&&(O=p.segmentLengths(C.commands,!0)),l=0;l<C.commands.length&&(g=C.commands[l],(l===0||g.type===I)&&(m=new r(g.x,g.y)),!(w<=O[l]||l===O.length-1));l+=1)w-=O[l];return O[l]!==0&&(w/=O[l]),l===O.length-1&&O[l]===0&&(l-=1),[l,w,m]},p.point=function(C,w,O){var l,g,m,i,s,a;return l=p._locate(C,w,O),g=l[0],w=l[1],m=l[2],i=C.commands[g].x,s=C.commands[g].y,a=C.commands[g+1],a.type===o||a.type===h?a=a.type===h?p.linePoint(w,i,s,m.x,m.y):p.linePoint(w,i,s,a.x,a.y):a.type===d&&(a=p.curvePoint(w,i,s,a.x1,a.y1,a.x2,a.y2,a.x,a.y)),a};function u(C,w){return Math.abs(C-w)<=1e-12*Math.min(Math.abs(C),Math.abs(w))}function x(C){var w,O,l,g,m;return w=1-C,l=w*w,g=C*C,m=g*C,O=l*w,l*=3*C,g*=3*w,[O,l,g,m]}function b(C,w,O,l,g,m,i,s,a){var y,c,_,T,A;return A=x(a),y=A[0],c=A[1],_=A[2],T=A[3],{x:y*C+c*O+_*g+T*i,y:y*w+c*l+_*m+T*s}}return p.extrema=function(C,w,O,l,g,m,i,s){var a,y,c,_,T,A,N,Y,F,W,U,H,J,D;function M(X){if(X>=0&&X<=1){var R=b(C,w,O,l,g,m,i,s,X);R.x<a?a=R.x:R.x>y&&(y=R.x),R.y<c?c=R.y:R.y>_&&(_=R.y)}}return C<i?(a=C,y=i):(a=i,y=C),w<s?(c=w,_=s):(c=s,_=w),T=3*(-C+3*O-3*g+i),A=6*(C-2*O+g),N=3*(-C+O),u(T+1,1)?u(A+1,1)||M(-N/A):(J=A*A-4*T*N,J>=0&&(U=Math.sqrt(J),H=1/(2*T),M((-A+U)*H),M((-A-U)*H))),Y=3*(-w+3*l-3*m+s),F=6*(w-2*l+m),W=3*(-w+l),u(Y+1,1)?u(F+1,1)||M(-W/F):(D=F*F-4*Y*W,D>0&&(U=Math.sqrt(D),H=1/(2*Y),M((-F+U)*H),M((-F-U)*H))),new P(a,c,y-a,_-c)},ue=p,ue}var he,Ke;function Yr(){if(Ke)return he;Ke=1;var S={};S.namedColors={lightpink:[1,.71,.76],pink:[1,.75,.8],crimson:[.86,.08,.24],lavenderblush:[1,.94,.96],palevioletred:[.86,.44,.58],hotpink:[1,.41,.71],deeppink:[1,.08,.58],mediumvioletred:[.78,.08,.52],orchid:[.85,.44,.84],thistle:[.85,.75,.85],plum:[.87,.63,.87],violet:[.93,.51,.93],fuchsia:[1,0,1],darkmagenta:[.55,0,.55],purple:[.5,0,.5],mediumorchid:[.73,.33,.83],darkviolet:[.58,0,.83],darkorchid:[.6,.2,.8],indigo:[.29,0,.51],blueviolet:[.54,.17,.89],mediumpurple:[.58,.44,.86],mediumslateblue:[.48,.41,.93],slateblue:[.42,.35,.8],darkslateblue:[.28,.24,.55],ghostwhite:[.97,.97,1],lavender:[.9,.9,.98],blue:[0,0,1],mediumblue:[0,0,.8],darkblue:[0,0,.55],navy:[0,0,.5],midnightblue:[.1,.1,.44],royalblue:[.25,.41,.88],cornflowerblue:[.39,.58,.93],lightsteelblue:[.69,.77,.87],lightslategray:[.47,.53,.6],slategray:[.44,.5,.56],dodgerblue:[.12,.56,1],aliceblue:[.94,.97,1],steelblue:[.27,.51,.71],lightskyblue:[.53,.81,.98],skyblue:[.53,.81,.92],deepskyblue:[0,.75,1],lightblue:[.68,.85,.9],powderblue:[.69,.88,.9],cadetblue:[.37,.62,.63],darkturquoise:[0,.81,.82],azure:[.94,1,1],lightcyan:[.88,1,1],paleturquoise:[.69,.93,.93],aqua:[0,1,1],darkcyan:[0,.55,.55],teal:[0,.5,.5],darkslategray:[.18,.31,.31],mediumturquoise:[.28,.82,.8],lightseagreen:[.13,.7,.67],turquoise:[.25,.88,.82],aquamarine:[.5,1,.83],mediumaquamarine:[.4,.8,.67],mediumspringgreen:[0,.98,.6],mintcream:[.96,1,.98],springgreen:[0,1,.5],mediumseagreen:[.24,.7,.44],seagreen:[.18,.55,.34],honeydew:[.94,1,.94],darkseagreen:[.56,.74,.56],palegreen:[.6,.98,.6],lightgreen:[.56,.93,.56],limegreen:[.2,.8,.2],lime:[0,1,0],forestgreen:[.13,.55,.13],green:[0,.5,0],darkgreen:[0,.39,0],lawngreen:[.49,.99,0],chartreuse:[.5,1,0],greenyellow:[.68,1,.18],darkolivegreen:[.33,.42,.18],yellowgreen:[.6,.8,.2],olivedrab:[.42,.56,.14],ivory:[1,1,.94],beige:[.96,.96,.86],lightyellow:[1,1,.88],lightgoldenrodyellow:[.98,.98,.82],yellow:[1,1,0],olive:[.5,.5,0],darkkhaki:[.74,.72,.42],palegoldenrod:[.93,.91,.67],lemonchiffon:[1,.98,.8],khaki:[.94,.9,.55],gold:[1,.84,0],cornsilk:[1,.97,.86],goldenrod:[.85,.65,.13],darkgoldenrod:[.72,.53,.04],floralwhite:[1,.98,.94],oldlace:[.99,.96,.9],wheat:[.96,.87,.07],orange:[1,.65,0],moccasin:[1,.89,.71],papayawhip:[1,.94,.84],blanchedalmond:[1,.92,.8],navajowhite:[1,.87,.68],antiquewhite:[.98,.92,.84],tan:[.82,.71,.55],burlywood:[.87,.72,.53],darkorange:[1,.55,0],bisque:[1,.89,.77],linen:[.98,.94,.9],peru:[.8,.52,.25],peachpuff:[1,.85,.73],sandybrown:[.96,.64,.38],chocolate:[.82,.41,.12],saddlebrown:[.55,.27,.07],seashell:[1,.96,.93],sienna:[.63,.32,.18],lightsalmon:[1,.63,.48],coral:[1,.5,.31],orangered:[1,.27,0],darksalmon:[.91,.59,.48],tomato:[1,.39,.28],salmon:[.98,.5,.45],mistyrose:[1,.89,.88],lightcoral:[.94,.5,.5],snow:[1,.98,.98],rosybrown:[.74,.56,.56],indianred:[.8,.36,.36],red:[1,0,0],brown:[.65,.16,.16],firebrick:[.7,.13,.13],darkred:[.55,0,0],maroon:[.5,0,0],white:[1,1,1],whitesmoke:[.96,.96,.96],gainsboro:[.86,.86,.86],lightgrey:[.83,.83,.83],silver:[.75,.75,.75],darkgray:[.66,.66,.66],gray:[.5,.5,.5],grey:[.5,.5,.5],dimgray:[.41,.41,.41],dimgrey:[.41,.41,.41],black:[0,0,0],cyan:[0,.68,.94],transparent:[0,0,0,0],bark:[.25,.19,.13]};function r(P){var p;return P===0?"00":(p=P.toString(16).toUpperCase(),p.length<2&&(p="0"+p),p)}return S.rgb2hex=function(P,p,I){return"#"+r(Math.round(P*255))+r(Math.round(p*255))+r(Math.round(I*255))},S.rgba2hex=function(P,p,I,o){return"#"+r(Math.round(P*255))+r(Math.round(p*255))+r(Math.round(I*255))+r(Math.round(o*255))},S.hex2rgb=function(P){var p,I,o;if(P=P.replace(/^#/,""),P.length!==3&&P.length!==6||!/^[0-9a-fA-F]*$/.test(P))throw new Error("Invalid hex value: #"+P);return P.length===3&&(P=P[0]+P[0]+P[1]+P[1]+P[2]+P[2]),p=parseInt(P.substr(0,2),16)/255,I=parseInt(P.substr(2,2),16)/255,o=parseInt(P.substr(4,2),16)/255,[p,I,o]},S.rgb2hsb=function(P,p,I){var o=0,d=0,h=Math.max(P,p,I),u=h-Math.min(P,p,I);return h!==0&&(d=u/h),d!==0&&(P===h?o=0+(p-I)/u:p===h?o=2+(I-P)/u:o=4+(P-p)/u),o=o*(60/360),o<0&&(o+=1),[o,d,h]},S.hsb2rgb=function(P,p,I){if(p===0)return[I,I,I];P=P%1*6;var o=Math.floor(P),d=P-o,h=I*(1-p),u=I*(1-p*d),x=I*(1-p*(1-d));return o>4?[I,h,u]:[[I,x,h],[u,I,h],[h,I,x],[h,u,I],[x,h,I]][parseInt(o,10)]},S.rgb2hsl=function(P,p,I){var o=Math.min(P,p,I),d=Math.max(P,p,I),h=d-o,u,x,b;return d===o?u=0:P===d?u=(p-I)/h:p===d?u=2+(I-P)/h:I===d&&(u=4+(P-p)/h),u=Math.min(u*60,360),u<0&&(u+=360),b=(o+d)/2,d===o?x=0:b<=.5?x=h/(d+o):x=h/(2-d-o),[u/360,x,b]},S.hsl2rgb=function(P,p,I){var o,d,h,u,x;if(p===0)return x=I,[x,x,x];I<.5?d=I*(1+p):d=I+p-I*p,o=2*I-d,u=[0,0,0];for(var b=0;b<3;b++)h=P+1/3*-(b-1),h<0&&(h+=1),h>1&&(h-=1),6*h<1?x=o+(d-o)*6*h:2*h<1?x=d:3*h<2?x=o+(d-o)*(2/3-h)*6:x=o,u[b]=x;return u},he=S,he}var de,tr;function re(){if(tr)return de;tr=1;var S=Vt(),r=Zt(),P={};return P.angle=function(p,I,o,d){return S.degrees(Math.atan2(d-I,o-p))},P.distance=function(p,I,o,d){return Math.sqrt(Math.pow(o-p,2)+Math.pow(d-I,2))},P.coordinates=function(p,I,o,d){var h=p+Math.cos(S.radians(o))*d,u=I+Math.sin(S.radians(o))*d;return new r(h,u)},P.pointInPolygon=function(p,I,o){var d,h,u,x,b,C,w=!1,O=p.length;for(d=0;d<O;d+=1)h=d<O-1?d+1:0,u=p[d].x,x=p[d].y,b=p[h].x,C=p[h].y,(x<o&&C>=o||C<o&&x>=o)&&u+(o-x)/(C-x)*(b-u)<I&&(w=!w);return w},de=P,de}var pe={},er;function Br(){if(er)return pe;er=1;function S(r){if(r<0){for(var P=S(Math.abs(r)),p=0;p<23;p+=1)P();return S(P(0,1e4))}return function(I,o){I=I||0,o=o||1,r=(r*9301+49297)%233280;var d=r/233280;return I+d*(o-I)}}return pe.generator=S,pe}var ce={},te={},rr;function Zn(){return rr||(rr=1,te.defineAlias=function(S,r,P){Object.defineProperty(S.prototype,P,{get:function(){return this[r]},set:function(p){this[r]=p}})},te.defineGetter=function(S,r,P){Object.defineProperty(S.prototype,r,{get:P})}),te}var me,nr;function zt(){if(nr)return me;nr=1;var S=Vt(),r=Yr(),P=Zn(),p="HSB",I="HSL",o="HEX",d=function(h,u,x,b,C){var w,O,l,g,m,i;h===void 0?(w=O=l=0,g=1):Array.isArray(h)?(i=u||{},w=h[0]!==void 0?h[0]:0,O=h[1]!==void 0?h[1]:0,l=h[2]!==void 0?h[2]:0,g=h[3]!==void 0?h[3]:i.range||1):h.r!==void 0?(i=u||{},w=h.r,O=h.g,l=h.b,g=h.a!==void 0?h.a:i.range||1):typeof h=="string"?(m=r.hex2rgb(h),w=m[0],O=m[1],l=m[2],g=1):typeof h=="number"&&(arguments.length===1?(w=O=l=h,g=1):arguments.length===2?(w=O=l=h,typeof u=="number"?g=u:(i=u,g=i.range||1)):arguments.length===3?typeof x=="number"?(w=h,O=u,l=x,g=1):(w=O=l=h,g=u,i=x):arguments.length===4?(w=h,O=u,l=x,typeof b=="number"?g=b:(i=b,g=i.range||1)):(w=h,O=u,l=x,g=b,i=C)),i=i||{},i.range!==void 0&&(w/=i.range,O/=i.range,l/=i.range,g/=i.range,i.mode===p&&(h/=i.range,u/=i.range,x/=i.range)),i.mode===p?(h=S.clamp(h,0,1),u=S.clamp(u,0,1),x=S.clamp(x,0,1),m=r.hsb2rgb(h,u,x),w=m[0],O=m[1],l=m[2]):i.mode===I?(h=S.clamp(h,0,1),u=S.clamp(u,0,1),x=S.clamp(x,0,1),m=r.hsl2rgb(h,u,x),w=m[0],O=m[1],l=m[2]):i.mode===o&&(m=r.hex2rgb(h),w=m[0],O=m[1],l=m[2],g=1),this.r=S.clamp(w,0,1),this.g=S.clamp(O,0,1),this.b=S.clamp(l,0,1),this.a=S.clamp(g,0,1)};return d.BLACK=new d(0),d.WHITE=new d(1),P.defineAlias(d,"r","red"),P.defineAlias(d,"g","green"),P.defineAlias(d,"b","blue"),P.defineAlias(d,"a","alpha"),P.defineGetter(d,"h",function(){return r.rgb2hsl(this.r,this.g,this.b)[0]}),P.defineGetter(d,"s",function(){return r.rgb2hsl(this.r,this.g,this.b)[1]}),P.defineGetter(d,"l",function(){return r.rgb2hsl(this.r,this.g,this.b)[2]}),P.defineAlias(d,"h","hue"),P.defineAlias(d,"s","saturation"),P.defineAlias(d,"l","lightness"),P.defineGetter(d,"rgb",function(){return[this.r,this.g,this.b]}),P.defineGetter(d,"rgba",function(){return[this.r,this.g,this.b,this.a]}),P.defineGetter(d,"hsb",function(){return r.rgb2hsb(this.r,this.g,this.b)}),P.defineGetter(d,"hsba",function(){return r.rgb2hsb(this.r,this.g,this.b).concat([this.a])}),P.defineGetter(d,"hsl",function(){return r.rgb2hsl(this.r,this.g,this.b)}),P.defineGetter(d,"hsla",function(){return r.rgb2hsl(this.r,this.g,this.b).concat([this.a])}),d.prototype.toCSS=function(){return d.toCSS(this)},d.prototype.toHex=function(h){return h||this.a>=1?r.rgb2hex(this.r,this.g,this.b):r.rgba2hex(this.r,this.g,this.b,this.a)},d.prototype.desaturate=function(h){if(this.r===this.g&&this.g===this.b)return this;var u,x,b;h===void 0||!h.method||h.method==="ITU-R BT.601"?(u=.3,x=.59,b=.11):h.method==="ITU-R BT.709"&&(u=.2125,x=.7154,b=.0721);var C=this.r*u+this.g*x+this.b*b;return new d(C,C,C,this.a)},d.prototype.invert=function(){return new d(1-this.r,1-this.g,1-this.b,this.a)},d.clone=function(h){return h==null?null:typeof h=="string"?h:new d(h.r,h.g,h.b,h.a)},d.toCSS=function(h){if(h===null)return"none";if(h===void 0)return"black";if(typeof h=="string")return h;if(h instanceof d){let u=Math.round(h.r*255),x=Math.round(h.g*255),b=Math.round(h.b*255);return"rgba("+u+", "+x+", "+b+", "+h.a+")"}else if(h.r!==void 0&&h.g!==void 0&&h.b!==void 0){let u=Math.round(h.r*255),x=Math.round(h.g*255),b=Math.round(h.b*255);return h.a===void 0?"rgb("+u+", "+x+", "+b+")":"rgba("+u+", "+x+", "+b+", "+h.a+")"}else throw new Error("Don't know how to convert "+h+" to CSS.")},d.toHex=function(h,u){return d.parse(h,u).toHex()},d.make=function(){var h=Object.create(d.prototype);return h.constructor=d.prototype,d.apply(h,arguments),h},d.parse=function(h){function u(b,C){return!b||!C?!1:(b=String(b),b.indexOf(C)===0)}var x;if(h==null)return new d(0,0,0,0);if(h instanceof d)return h;if(r.namedColors[h])return d.make.apply(null,r.namedColors[h]);if(h[0]==="#")return new d(h,0,0,0,{mode:o});if(u(h,"rgba"))return x=h.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+|\d+.\d+)\s*\)$/i),x?new d(parseInt(x[1])/255,parseInt(x[2])/255,parseInt(x[3])/255,parseFloat(x[4])):(x=h.match(/^rgba\s*\(\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)\s*\)$/i),x?new d(parseFloat(x[1])/100,parseFloat(x[2])/100,parseFloat(x[3])/100,parseFloat(x[4])):new d(0,0,0,0));if(u(h,"rgb"))return x=h.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),x?new d(parseInt(x[1])/255,parseInt(x[2])/255,parseInt(x[3])/255):(x=h.match(/^rgb\s*\(\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*\)$/i),x?new d(parseFloat(x[1])/100,parseFloat(x[2])/100,parseFloat(x[3])/100):new d(0,0,0,0));if(u(h,"hsla"))return x=h.match(/^hsla\s*\(\s*(\d+|\d+.\d+)\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)\s*\)$/i),x?new d(parseFloat(x[1])/360,parseFloat(x[2])/100,parseFloat(x[3])/100,parseFloat(x[4])):new d(0,0,0,0);if(u(h,"hsl"))return x=h.match(/^hsl\s*\(\s*(\d+|\d+.\d+)\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*\)$/i),x?new d(parseFloat(x[1])/360,parseFloat(x[2])/100,parseFloat(x[3])/100):new d(0,0,0,0);if(h==="none"||h==="null"||u(h,"url("))return new d(0,0,0,0);throw new Error("Color "+h+"can not be parsed")},d.gray=function(h,u,x){return x=Math.max(x,1),new d(h/x,h/x,h/x,u/x)},d.rgb=function(h,u,x,b,C){return C=Math.max(C,1),new d(h/C,u/C,x/C,b/C)},d.hsb=function(h,u,x,b,C){return C=Math.max(C,1),new d(h/C,u/C,x/C,b/C,{mode:p})},d.hsl=function(h,u,x,b,C){return C=Math.max(C,1),new d(h/C,u/C,x/C,b/C,{mode:I})},me=d,me}var ye,sr;function Qt(){if(sr)return ye;sr=1;var S=He(),r=ee(),P=re(),p=Vt(),I=zt(),o=jt(),d=r.MOVETO,h=r.LINETO,u=r.QUADTO,x=r.CURVETO,b=r.CLOSE,C=Object.freeze({type:b}),w=.5522847498307936;function O(m,i=3){return m%1===0?m:m.toFixed(i)}function l(m){var i={type:m.type};return i.type!==b&&(i.x=m.x,i.y=m.y),i.type===u?(i.x1=m.x1,i.y1=m.y1):i.type===x&&(i.x1=m.x1,i.y1=m.y1,i.x2=m.x2,i.y2=m.y2),i}var g=function(m,i,s,a){this.commands=m!==void 0?m:[],this.fill=i!==void 0?i:"black",this.stroke=s!==void 0?s:null,this.strokeWidth=a!==void 0?a:1};return g.prototype.clone=function(){var m=new g,i=this.commands.length,s;for(m.commands.length=this.commands.length,s=0;s<i;s+=1)m.commands[s]=l(this.commands[s]);return m.fill=I.clone(this.fill),m.stroke=I.clone(this.stroke),m.strokeWidth=this.strokeWidth,m},g.prototype.extend=function(m){var i=m.commands||m;Array.prototype.push.apply(this.commands,i)},g.prototype.moveTo=function(m,i){this.commands.push({type:d,x:m,y:i})},g.prototype.lineTo=function(m,i){this.commands.push({type:h,x:m,y:i})},g.prototype.curveTo=function(m,i,s,a,y,c){this.commands.push({type:x,x1:m,y1:i,x2:s,y2:a,x:y,y:c})},g.prototype.quadTo=function(m,i,s,a){var y=this.commands[this.commands.length-1].x,c=this.commands[this.commands.length-1].y,_=y+2/3*(m-y),T=c+2/3*(i-c),A=_+1/3*(s-y),N=T+1/3*(a-c);this.curveTo(_,T,A,N,s,a)},g.prototype.closePath=g.prototype.close=function(){this.commands.push(C)},g.prototype.isClosed=function(){return this.commands.length===0?!1:this.commands[this.commands.length-1].type===b},g.prototype.addRect=function(m,i,s,a){this.moveTo(m,i),this.lineTo(m+s,i),this.lineTo(m+s,i+a),this.lineTo(m,i+a),this.close()},g.prototype.addRoundedRect=function(m,i,s,a,y,c){var _=.44799999999999995,T=y,A=c,N=m,Y=m+s,F=i,W=i+a;T=Math.min(T,s*.5),A=Math.min(A,a*.5),this.moveTo(N+T,F),T<s*.5&&this.lineTo(Y-y,F),this.curveTo(Y-T*_,F,Y,F+A*_,Y,F+A),A<a*.5&&this.lineTo(Y,W-A),this.curveTo(Y,W-A*_,Y-T*_,W,Y-T,W),T<s*.5&&this.lineTo(N+T,W),this.curveTo(N+T*_,W,N,W-A*_,N,W-A),A<a*.5&&this.lineTo(N,F+A),this.curveTo(N,F+A*_,N+T*_,F,N+T,F),this.close()},g.prototype.addEllipse=function(m,i,s,a){var y=w*.5*s,c=w*.5*a,_=m+.5*s,T=i+.5*a,A=m+s,N=i+a;this.moveTo(m,T),this.curveTo(m,T-c,_-y,i,_,i),this.curveTo(_+y,i,A,T-c,A,T),this.curveTo(A,T+c,_+y,N,_,N),this.curveTo(_-y,N,m,T+c,m,T),this.close()},g.prototype.addLine=function(m,i,s,a){this.moveTo(m,i),this.lineTo(s,a)},g.prototype.addQuad=function(m,i,s,a,y,c,_,T){this.moveTo(m,i),this.lineTo(s,a),this.lineTo(y,c),this.lineTo(_,T),this.close()},g.prototype.addArc=function(m,i,s,a,y,c,_){_=_||"pie";var T,A,N,Y,F,W,U,H,J,D,M,X,R;for(T=s/2,A=a/2,N=p.radians(y),Y=c,Y>=360||Y<=-360?(F=4,W=Math.PI/2,U=.5522847498307933,Y<0&&(W=-W,U=-U)):(F=Math.ceil(Math.abs(Y)/90),W=p.radians(Y/F),U=4/3*Math.sin(W/2)/(1+Math.cos(W/2)),U===0&&(F=0)),_==="open"?H=0:_==="chord"?H=1:_==="pie"&&(H=2),(T<0||A<0)&&(F=H=-1),J=0;J<=F+H;)D=N,J===0?this.moveTo(m+Math.cos(D)*T,i+Math.sin(D)*A):J>F?J===F+H?this.close():this.lineTo(m,i):(D+=W*(J-1),M=Math.cos(D),X=Math.sin(D),R=[],R.push(m+(M-U*X)*T),R.push(i+(X+U*M)*A),D+=W,M=Math.cos(D),X=Math.sin(D),R.push(m+(M+U*X)*T),R.push(i+(X-U*M)*A),R.push(m+M*T),R.push(i+X*A),g.prototype.curveTo.apply(this,R)),J+=1},g.prototype.colorize=function(m){var i=arguments;(typeof m!="object"||m instanceof I)&&(m={},i[0]!==void 0&&(m.fill=i[0]),i[1]!==void 0&&(m.stroke=i[1]),i[2]!==void 0&&(m.strokeWidth=i[2]));var s=this.clone();return m.fill&&(s.fill=I.clone(m.fill)),m.stroke&&(s.stroke=I.clone(m.stroke)),(m.strokeWidth||m.strokeWidth===0)&&(s.strokeWidth=m.strokeWidth),s},g.prototype.desaturate=function(m){var i=this.clone(),s=i.fill,a=i.stroke;return s instanceof I||(s=I.parse(s)),a instanceof I||(a=I.parse(a)),i.fill=s.desaturate(m),i.stroke=a.desaturate(m),i},g.prototype.invert=function(){var m=this.clone(),i=m.fill,s=m.stroke;return i instanceof I||(i=I.parse(i)),s instanceof I||(s=I.parse(s)),m.fill=i.invert(),m.stroke=s.invert(),m},g.prototype.contours=function(){for(var m=[],i=[],s,a=0;a<this.commands.length;a+=1)s=this.commands[a],s.type===d?(i.length!==0&&m.push(i),i=[s]):i.push(s);return i.length!==0&&m.push(i),m},g.prototype.bounds=function(){if(this._bounds)return this._bounds;if(this.commands.length===0)return new o(0,0,0,0);for(var m,i,s,a,y,c=Number.MAX_VALUE,_=Number.MAX_VALUE,T=-Number.MAX_VALUE,A=-Number.MAX_VALUE,N,Y=0;Y<this.commands.length;Y+=1)if(N=this.commands[Y],N.type===d||N.type===h)m=N.x,i=N.y,m<c&&(c=m),i<_&&(_=i),m>T&&(T=m),i>A&&(A=i),s=N;else if(N.type===x){var F=r.extrema(s.x,s.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);a=F.x+F.width,y=F.y+F.height,F.x<c&&(c=F.x),a>T&&(T=a),F.y<_&&(_=F.y),y>A&&(A=y),s=N}return new o(c,_,T-c,A-_)},g.prototype.point=function(m,i){return i===void 0&&(i=r.segmentLengths(this.commands,!0,10)),r.point(this,m,i)},g.prototype.points=function(m,i){var s=i&&i.start!==void 0?i.start:0,a=i&&i.end!==void 0?i.end:1;if(this.commands.length===0)return[];m=Math.round(m);var y;i&&i.closed?y=m>1?(a-s)/m:a-s:y=m>1?(a-s)/(m-1):a-s;for(var c=[],_=r.segmentLengths(this.commands,!0,10),T=0;T<m;T+=1)c.push(this.point(s+y*T,_));return c},g.prototype.length=function(m){return m===void 0&&(m=20),r.length(this,m)},g.prototype.contains=function(m,i,s){var a=this.points(s!==void 0?s:100);return P.pointInPolygon(a,m,i)},g.prototype.resampleByAmount=function(m,i){for(var s=i?this.contours():[this.commands],a=new g([],this.fill,this.stroke,this.strokeWidth),y=0;y<s.length;y+=1){var c=new g(s[y]),_={};c.isClosed()&&(_.closed=!0);for(var T=c.points(m,_),A=0;A<T.length;A+=1)A===0?a.moveTo(T[A].x,T[A].y):a.lineTo(T[A].x,T[A].y);c.isClosed()&&a.close()}return a},g.prototype.resampleByLength=function(m,i){i=i||{};var s=i.force||!1,a=this.contours(),y=[];s||(m=Math.max(m,1));for(var c=0;c<a.length;c+=1){var _=new g(a[c]),T=_.length(),A=Math.ceil(T/m);y=y.concat(_.resampleByAmount(A).commands)}return new g(y,this.fill,this.stroke,this.strokeWidth)},g.prototype.toPathData=function(m=3){var i,s,a,y,c,_,T,A,N;for(s="",i=0;i<this.commands.length;i+=1)a=this.commands[i],a.x!==void 0&&(y=O(p.clamp(a.x,-9999,9999),m),c=O(p.clamp(a.y,-9999,9999),m)),a.x1!==void 0&&(_=O(p.clamp(a.x1,-9999,9999),m),T=O(p.clamp(a.y1,-9999,9999),m)),a.x2!==void 0&&(A=O(p.clamp(a.x2,-9999,9999),m),N=O(p.clamp(a.y2,-9999,9999),m)),a.type===d?!isNaN(y)&&!isNaN(c)&&(s+="M"+y+" "+c):a.type===h?!isNaN(y)&&!isNaN(c)&&(s+="L"+y+" "+c):a.type===u?!isNaN(y)&&!isNaN(c)&&!isNaN(_)&&!isNaN(T)&&(s+="Q"+_+" "+T+" "+y+" "+c):a.type===x?!isNaN(y)&&!isNaN(c)&&!isNaN(_)&&!isNaN(T)&&!isNaN(A)&&!isNaN(N)&&(s+="C"+_+" "+T+" "+A+" "+N+" "+y+" "+c):a.type===b&&(s+="Z");return s},g.prototype.toSVG=function(){var m='<path d="';m+=this.toPathData(),m+='"';var i="",s,a;this.fill&&(s=I.parse(this.fill),s.a<1&&(a=s.a),s=I.toHex(s).substring(0,7)),s!=="black"&&s!=="#000000"&&(s==null?i+="fill:none;":i+="fill:"+s+";"),a!==void 0&&(i+="fill-opacity:"+a+";");var y,c;return this.stroke&&(y=I.parse(this.stroke),y.a<1&&(c=y.a),y=I.toHex(y).substring(0,7)),y&&(i+="stroke:"+y+";",i+="stroke-width:"+this.strokeWidth+";"),c!==void 0&&(i+="stroke-opacity:"+c+";"),i&&(m+=' style="'+i+'"'),m+="/>",m},g.prototype.draw=function(m){var i,s,a;for(m.beginPath(),i=this.commands.length,s=0;s<i;s+=1)a=this.commands[s],a.type===d?m.moveTo(a.x,a.y):a.type===h?m.lineTo(a.x,a.y):a.type===u?m.quadraticCurveTo(a.x1,a.y1,a.x,a.y):a.type===x?m.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,a.x,a.y):a.type===b&&m.closePath();this.fill!==null&&this.fill!==void 0&&(m.fillStyle=I.toCSS(this.fill),m.fill()),this.stroke!==null&&this.stroke!==void 0&&this.strokeWidth!==null&&this.strokeWidth>0&&(m.strokeStyle=I.toCSS(this.stroke),m.lineWidth=this.strokeWidth,m.stroke())},g.combine=function(){for(var m=Array.apply(null,arguments),i=S(m),s,a=[],y=0;y<i.length;y+=1)s=i[y],s.commands?a=a.concat(s.commands):s.shapes&&(a=a.concat(g.combine(s.shapes).commands));return new g(a)},ye=g,ye}var ve,or;function ne(){if(or)return ve;or=1;var S=Qt(),r=jt(),P=zt(),p=function(I){I?I.shapes||I.commands?this.shapes=[I]:I&&(this.shapes=I):this.shapes=[]};return p.prototype.add=function(I){this.shapes.push(I)},p.prototype.clone=function(){var I=[],o=this.shapes.length,d;for(I.length=o,d=0;d<o;d+=1)I[d]=this.shapes[d].clone();return new p(I)},p.prototype.colorize=function(I){var o=arguments;(typeof I!="object"||I instanceof P)&&(I={},o[0]!==void 0&&(I.fill=o[0]),o[1]!==void 0&&(I.stroke=o[1]),o[2]!==void 0&&(I.strokeWidth=o[2]));var d=[];d.length=this.shapes.length;for(var h=0;h<this.shapes.length;h+=1)d[h]=this.shapes[h].colorize(I);return new p(d)},p.prototype.desaturate=function(I){var o=[];o.length=this.shapes.length;for(var d=0;d<this.shapes.length;d+=1)o[d]=this.shapes[d].desaturate(I);return new p(o)},p.prototype.invert=function(){var I=[];I.length=this.shapes.length;for(var o=0;o<this.shapes.length;o+=1)I[o]=this.shapes[o].invert();return new p(I)},p.prototype.bounds=function(){if(this.shapes.length===0)return new r(0,0,0,0);var I,o,d,h=this.shapes;for(I=0;I<h.length;I+=1)d=h[I],o===void 0&&(o=d.bounds()),(d.shapes&&d.shapes.length!==0||d.commands&&d.commands.length!==0)&&(o=o.unite(d.bounds()));return o!==void 0?o:new r(0,0,0,0)},p.prototype.contains=function(I,o,d){d===void 0&&(d=100);var h,u=this.shapes;for(h=0;h<u.length;h+=1)if(u[h].contains(I,o,d))return!0;return!1},p.prototype.length=function(I){I===void 0&&(I=10);for(var o=0,d=this.shapes,h=0;h<d.length;h+=1)o+=d[h].length(I);return o},p.prototype.resampleByAmount=function(I,o){var d;if(!o)return d=new S.combine(this),d.resampleByAmount(I,o);var h=[];h.length=this.shapes.length;for(var u=0;u<this.shapes.length;u+=1)h[u]=this.shapes[u].resampleByAmount(I,o);return new p(h)},p.prototype.resampleByLength=function(I){var o=[];o.length=this.shapes.length;for(var d=0;d<this.shapes.length;d+=1)o[d]=this.shapes[d].resampleByLength(I);return new p(o)},p.prototype.toSVG=function(){var I=[];I.length=this.shapes.length;for(var o=0;o<this.shapes.length;o+=1)I[o]=this.shapes[o].toSVG();return"<g>"+I.join("")+"</g>"},p.prototype.draw=function(I){var o,d=this.shapes,h=d.length;for(o=0;o<h;o+=1)d[o].draw(I)},ve=p,ve}var ge,lr;function Kt(){if(lr)return ge;lr=1;var S=ee(),r=Vt(),P=ne(),p=Qt(),I=Zt(),o=S.MOVETO,d=S.LINETO,h=S.QUADTO,u=S.CURVETO,x=S.CLOSE,b=function(C){C!==void 0?this.m=C:this.m=[1,0,0,1,0,0]};return b.IDENTITY=new b,b.identity=function(){return new b},b._mmult=function(C,w){return C.m!==void 0&&(C=C.m),w.m!==void 0&&(w=w.m),new b([C[0]*w[0]+C[1]*w[2],C[0]*w[1]+C[1]*w[3],C[2]*w[0]+C[3]*w[2],C[2]*w[1]+C[3]*w[3],C[4]*w[0]+C[5]*w[2]+w[4],C[4]*w[1]+C[5]*w[3]+w[5]])},b.prototype.isIdentity=function(){var C=this.m;return C[0]===1&&C[1]===0&&C[2]===0&&C[3]===1&&C[4]===0&&C[5]===0},b.prototype.prepend=function(C){return b._mmult(this.m,C.m)},b.prototype.append=function(C){return b._mmult(C.m,this.m)},b.prototype.inverse=function(){var C=this.m,w=C[0]*C[3]-C[1]*C[2];return new b([C[3]/w,-C[1]/w,-C[2]/w,C[0]/w,(C[2]*C[5]-C[3]*C[4])/w,-(C[0]*C[5]-C[1]*C[4])/w])},b.prototype.scale=function(C,w){return w===void 0&&(w=C),b._mmult([C,0,0,w,0,0],this.m)},b.prototype.translate=function(C,w){return b._mmult([1,0,0,1,C,w],this.m)},b.prototype.rotate=function(C){var w=Math.cos(r.radians(C)),O=Math.sin(r.radians(C));return b._mmult([w,O,-O,w,0,0],this.m)},b.prototype.skew=function(C,w){var O=Math.PI*C/180,l=Math.PI*w/180;return b._mmult([1,Math.tan(l),-Math.tan(O),1,0,0],this.m)},b.prototype.transformPoint=function(C){var w=C.x,O=C.y,l=this.m;return new I(w*l[0]+O*l[2]+l[4],w*l[1]+O*l[3]+l[5])},b.prototype.transformPoints=function(C){for(var w=[],O=0;O<C.length;O+=1)w.push(this.transformPoint(C[O]));return w},b.prototype.transformPath=function(C){var w=this.m,O=[];O.length=C.commands.length;for(var l=0,g=C.commands.length;l<g;l++){var m=C.commands[l];switch(m.type){case o:case d:O[l]={type:m.type,x:m.x*w[0]+m.y*w[2]+w[4],y:m.x*w[1]+m.y*w[3]+w[5]};break;case h:O[l]={type:h,x:m.x*w[0]+m.y*w[2]+w[4],y:m.x*w[1]+m.y*w[3]+w[5],x1:m.x1*w[0]+m.y1*w[2]+w[4],y1:m.x1*w[1]+m.y1*w[3]+w[5]};break;case u:O[l]={type:u,x:m.x*w[0]+m.y*w[2]+w[4],y:m.x*w[1]+m.y*w[3]+w[5],x1:m.x1*w[0]+m.y1*w[2]+w[4],y1:m.x1*w[1]+m.y1*w[3]+w[5],x2:m.x2*w[0]+m.y2*w[2]+w[4],y2:m.x2*w[1]+m.y2*w[3]+w[5]};break;case x:O[l]={type:x};break;default:throw new Error("Unknown command type "+m)}}return new p(O,C.fill,C.stroke,C.strokeWidth)},b.prototype.transformText=function(C){var w=C.clone();return w.transform=this.append(w.transform),w},b.prototype.transformGroup=function(C){for(var w=[],O=0;O<C.shapes.length;O+=1)w.push(this.transformShape(C.shapes[O]));return new P(w)},b.prototype.transformShape=function(C){var w;if(C.shapes)w=this.transformGroup;else if(C.commands)w=this.transformPath;else if(C.text)w=this.transformText;else if(C.x!==void 0&&C.y!==void 0)w=this.transformPoint;else{if(C._transform!==void 0)return C._transform(this.m);if(Array.isArray(C)&&C.length>0)if(C[0].x!==void 0&&C[0].y!==void 0)w=this.transformPoints;else{for(var O=[],l=0;l<C.length;l+=1)O.push(this.transformShape(C[l]));return O}else throw new Error("Don't know how to transform "+C)}return w.call(this,C)},ge=b,ge}var ar;function Un(){return ar||(ar=1,function(S){var r=Xn(),P=zt(),p=ne(),I=Qt(),o=Zt(),d=Kt(),h=function(g){return g.replace(/^\s+|\s+$/g,"")},u=function(g){return g.replace(/[\s\r\t\n]+/gm," ")},x=function(g){var m,i=h(u((g||"").replace(/,/g," "))).split(" ");for(m=0;m<i.length;m+=1)i[m]=parseFloat(i[m]);return i},b=function(g,m){var i,s,a,y,c,_,T,A,N,Y,F,W;m?W=Object.create(m):W={},A=[],N={},N.translate=function(rt){var j=x(rt),$=j[0],tt=j[1]||0;return new d().translate($,tt)},N.scale=function(rt){var j=x(rt),$=j[0],tt=j[1]||$;return new d().scale($,tt)},N.rotate=function(rt){var j,$=x(rt),tt=$[0],z=$[1]||0,ot=$[2]||0;return j=new d,j=j.translate(z,ot),j=j.rotate(tt),j=j.translate(-z,-ot),j},N.matrix=function(rt){var j=x(rt);return new d([j[0],j[1],0,j[2],j[3],0,j[4],j[5],1])};for(var U,H,J,D,M,X,R,G=0;G<g.attributes.length;G+=1)switch(U=g.attributes[G],U.nodeName){case"transform":for(H=h(u(U.nodeValue)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),F=0;F<H.length;F+=1)J=h(H[F].split("(")[0]),D=H[F].split("(")[1].replace(")",""),Y=N[J](D),A.push(Y);break;case"visibility":break;case"stroke-linecap":break;case"stroke-linejoin":break;case"stroke-miterlimit":break;case"stroke-width":c=parseFloat(U.nodeValue);break;case"stroke-opacity":y=parseFloat(U.nodeValue);break;case"fill-opacity":s=parseFloat(U.nodeValue);break;case"fill":i=U.nodeValue;break;case"stroke":a=U.nodeValue;break;case"opacity":_=parseFloat(U.nodeValue);break;case"color":T=U.nodeValue;break;case"style":for(M={},X=U.nodeValue.split(";"),F=0;F<X.length;F+=1)R=X[F].split(":"),M[R[0].trim()]=R[1];M.fill&&(i=M.fill),M.stroke&&(a=M.stroke),M["stroke-width"]!==void 0&&(c=parseFloat(M["stroke-width"])),M["stroke-opacity"]!==void 0&&(y=parseFloat(M["stroke-opacity"])),M["fill-opacity"]!==void 0&&(s=parseFloat(M["fill-opacity"])),M.opacity!==void 0&&(_=parseFloat(M.opacity)),M.color&&(T=M.color);break}if(i!==void 0&&(W.fill=i),a!==void 0&&(W.stroke=a),s!==void 0&&(W.fillOpacity=s),y!==void 0&&(W.strokeOpacity=y),c!==void 0&&(W.strokeWidth=c),_!==void 0&&(W.opacity=_),T!==void 0&&T!=="currentColor"&&(W.color=T),A.length>0){for(Y=new d,F=0;F<A.length;F+=1)Y=Y.append(A[F]);Y.isIdentity()||(W.transform?W.transform=W.transform.append(Y):W.transform=Y)}return W},C=function(g,m){var i=m.fill;g.commands&&g.commands.length>0&&i===void 0&&(i="black");var s=m.fillOpacity,a=m.stroke,y=m.strokeOpacity,c=m.opacity,_=m.strokeWidth,T=m.transform,A=m.color;i==="currentColor"&&(i=A===void 0?"black":A),i!==void 0&&(i=P.parse(i),s!==void 0&&(i.a*=s),c!==void 0&&(i.a*=c)),a==="currentColor"&&(a=A===void 0?"black":A),a!==void 0&&(a=P.parse(a),y!==void 0&&(a.a*=y),c!==void 0&&(a.a*=c));var N;T?N=T.transformShape(g).commands:N=g.commands;var Y=i===void 0?g.fill:i,F=a===void 0?g.stroke:a,W=_===void 0?g.strokeWidth:_;return W!==void 0&&T!==void 0&&(W*=T.m[0]),new I(N,Y,F,W)},w=function(g,m,i,s,a,y,c,_,T){var A,N,Y,F,W,U,H,J,D,M,X,R,G,rt,j,$,tt,z,ot,it,ct,st,yt,xt,Ct,vt,gt;for(A=c*(Math.PI/180),N=Math.sin(A),Y=Math.cos(A),i=Math.abs(i),s=Math.abs(s),F=Y*(_-g)*.5+N*(T-m)*.5,W=Y*(T-m)*.5-N*(_-g)*.5,U=F*F/(i*i)+W*W/(s*s),U>1&&(U=Math.sqrt(U),i*=U,s*=U),H=Y/i,J=N/i,D=-N/s,M=Y/s,X=H*_+J*T,R=D*_+M*T,G=H*g+J*m,rt=D*g+M*m,j=(G-X)*(G-X)+(rt-R)*(rt-R),$=1/j-.25,$<0&&($=0),tt=Math.sqrt($),y===a&&(tt=-tt),z=.5*(X+G)-tt*(rt-R),ot=.5*(R+rt)+tt*(G-X),it=Math.atan2(R-ot,X-z),ct=Math.atan2(rt-ot,G-z),st=ct-it,st<0&&y===1?st+=2*Math.PI:st>0&&y===0&&(st-=2*Math.PI),yt=Math.ceil(Math.abs(st/(Math.PI*.5+.001))),xt=[],gt=0;gt<yt;gt+=1)Ct=it+gt*st/yt,vt=it+(gt+1)*st/yt,xt[gt]=[z,ot,Ct,vt,i,s,N,Y];return xt},O=function(g,m,i,s,a,y,c,_){var T=_*a,A=-c*y,N=c*a,Y=_*y,F=.5*(s-i),W=8/3*Math.sin(F*.5)*Math.sin(F*.5)/Math.sin(F),U=g+Math.cos(i)-W*Math.sin(i),H=m+Math.sin(i)+W*Math.cos(i),J=g+Math.cos(s),D=m+Math.sin(s),M=J+W*Math.sin(s),X=D-W*Math.cos(s);return[T*U+A*H,N*U+Y*H,T*M+A*X,N*M+Y*X,T*J+A*D,N*J+Y*D]},l={svg:function(){return l.g.apply(this,arguments)},g:function(g,m){for(var i=[],s=b(g,m),a,y,c,_,T=0;T<g.childNodes.length;T+=1){if(a=g.childNodes[T],y=a.nodeName,!y)return;c=y.replace(/svg\:/ig,"").toLowerCase(),l[c]!==void 0&&(_=l[c].call(this,a,s),i.push(_))}return new p(i)},_polyline:function(g){var m=g.getAttribute("points"),i=new I;return m.replace(/([\d\.?]+),([\d\.?]+)/g,function(s,a,y){var c=parseFloat(a),_=parseFloat(y);i.commands.length===0?i.moveTo(c,_):i.lineTo(c,_)}),i},polygon:function(g,m){var i=b(g,m),s=l._polyline(g);return s.close(),C(s,i)},polyline:function(g,m){var i=b(g,m),s=l._polyline(g);return C(s,i)},rect:function(g,m){var i=b(g,m),s=parseFloat(g.getAttribute("x")),a=parseFloat(g.getAttribute("y"));s||(s=0),a||(a=0);var y=parseFloat(g.getAttribute("width")),c=parseFloat(g.getAttribute("height"));y||(y=0),c||(c=0),y<0&&(console.error('Error: invalid negative value for <rect> attribute width="'+y+'"'),y=0),c<0&&(console.error('Error: invalid negative value for <rect> attribute height="'+c+'"'),c=0);var _=parseFloat(g.getAttribute("rx")),T=parseFloat(g.getAttribute("ry"));_||(_=0),T||(T=0),_<0&&(console.error('Error: invalid negative value for <rect> attribute rx="'+_+'"'),_=0),T<0&&(console.error('Error: invalid negative value for <rect> attribute ry="'+T+'"'),T=0),(!_||!T)&&(_=T=Math.max(_,T)),_>y/2&&(_=y/2),T>c/2&&(T=c/2);var A=new I;return _&&T?A.addRoundedRect(s,a,y,c,_,T):A.addRect(s,a,y,c),C(A,i)},ellipse:function(g,m){var i=b(g,m),s=parseFloat(g.getAttribute("cx")),a=parseFloat(g.getAttribute("cy"));s||(s=0),a||(a=0);var y=parseFloat(g.getAttribute("rx")),c=parseFloat(g.getAttribute("ry"));y||(y=0),c||(c=0),y<0&&(console.error('Error: invalid negative value for <ellipse> attribute rx="'+y+'"'),y=0),c<0&&(console.error('Error: invalid negative value for <ellipse> attribute ry="'+c+'"'),c=0);var _=new I;return _.addEllipse(s-y,a-c,y*2,c*2),C(_,i)},circle:function(g,m){var i=b(g,m),s=parseFloat(g.getAttribute("cx")),a=parseFloat(g.getAttribute("cy"));s||(s=0),a||(a=0);var y=parseFloat(g.getAttribute("r"));y||(y=0),y<0&&(console.error('Error: invalid negative value for <circle> attribute r="'+y+'"'),y=0);var c=new I;return c.addEllipse(s-y,a-y,y*2,y*2),C(c,i)},line:function(g,m){var i=b(g,m),s=parseFloat(g.getAttribute("x1")),a=parseFloat(g.getAttribute("y1")),y=parseFloat(g.getAttribute("x2")),c=parseFloat(g.getAttribute("y2"));s||(s=0),a||(a=0),y||(y=0),c||(c=0);var _=new I;return _.addLine(s,a,y,c),C(_,i)},path:function(g,m){var i=b(g,m),s,a,y,c,_,T,A,N,Y,F,W,U,H,J,D,M,X,R,G,rt,j,$,tt;s=g.getAttribute("d"),s=s.replace(/,/gm," "),s=s.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),s=s.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),s=s.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),s=s.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),s=s.replace(/([0-9])([+\-])/gm,"$1 $2"),s=s.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),s=s.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),s=u(s),s=h(s),a=function(ot){this.tokens=ot.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new o(0,0),this.control=new o(0,0),this.current=new o(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:this.tokens[this.i+1].match(/^[A-Za-z]$/)!==null},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i+=1,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var it=new o(this.getScalar(),this.getScalar());return this.makeAbsolute(it)},this.getAsControlPoint=function(){var it=this.getPoint();return this.control=it,it},this.getAsCurrentPoint=function(){var it=this.getPoint();return this.current=it,it},this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!=="c"&&this.previousCommand.toLowerCase()!=="s"&&this.previousCommand.toLowerCase()!=="q"&&this.previousCommand.toLowerCase()!=="t")return this.current;var it=new o(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return it},this.makeAbsolute=function(it){return this.isRelativeCommand()?new o(it.x+this.current.x,it.y+this.current.y):it}};var z=new I;for(y=new a(s),y.reset();!y.isEnd();)switch(y.nextCommand(),y.command){case"M":case"m":for(c=y.getAsCurrentPoint(),z.moveTo(c.x,c.y),y.start=y.current;!y.isCommandOrEnd();)c=y.getAsCurrentPoint(),z.lineTo(c.x,c.y);break;case"L":case"l":for(;!y.isCommandOrEnd();)c=y.getAsCurrentPoint(),z.lineTo(c.x,c.y);break;case"H":case"h":for(;!y.isCommandOrEnd();)_=new o((y.isRelativeCommand()?y.current.x:0)+y.getScalar(),y.current.y),y.current=_,z.lineTo(y.current.x,y.current.y);break;case"V":case"v":for(;!y.isCommandOrEnd();)_=new o(y.current.x,(y.isRelativeCommand()?y.current.y:0)+y.getScalar()),y.current=_,z.lineTo(y.current.x,y.current.y);break;case"C":case"c":for(;!y.isCommandOrEnd();)T=y.current,A=y.getPoint(),N=y.getAsControlPoint(),Y=y.getAsCurrentPoint(),z.curveTo(A.x,A.y,N.x,N.y,Y.x,Y.y);break;case"S":case"s":for(;!y.isCommandOrEnd();)T=y.current,A=y.getReflectedControlPoint(),N=y.getAsControlPoint(),Y=y.getAsCurrentPoint(),z.curveTo(A.x,A.y,N.x,N.y,Y.x,Y.y);break;case"Q":case"q":for(;!y.isCommandOrEnd();)T=y.current,N=y.getAsControlPoint(),Y=y.getAsCurrentPoint(),F=T.x+2/3*(N.x-T.x),W=T.y+2/3*(N.y-T.y),U=F+1/3*(Y.x-T.x),H=W+1/3*(Y.y-T.y),z.curveTo(F,W,U,H,Y.x,Y.y);break;case"T":case"t":for(;!y.isCommandOrEnd();)T=y.current,N=y.getReflectedControlPoint(),y.control=N,Y=y.getAsCurrentPoint(),F=T.x+2/3*(N.x-T.x),W=T.y+2/3*(N.y-T.y),U=F+1/3*(Y.x-T.x),H=W+1/3*(Y.y-T.y),z.curveTo(F,W,U,H,Y.x,Y.y);break;case"A":case"a":for(;!y.isCommandOrEnd();)for(T=y.current,J=y.getScalar(),D=y.getScalar(),M=y.getScalar(),X=y.getScalar(),R=y.getScalar(),Y=y.getAsCurrentPoint(),G=Y.x,rt=Y.y,j=w(G,rt,J,D,X,R,M,T.x,T.y),$=0;$<j.length;$+=1)tt=O.apply(this,j[$]),z.curveTo.apply(z,tt);break;case"Z":case"z":z.close(),y.current=y.start;break}return C(z,i)}};S.interpret=function(g){var m,i=g.tagName.toLowerCase();return l[i]===void 0?null:(m=l[i].call(this,g),m)},S.parseString=function(g){var m=new r.DOMParser({errorHandler:function(i,s){throw new Error('Could not parse string "'+String(g)+'": '+s)}}).parseFromString(g);return m?S.interpret(m.documentElement):null}}(ce)),ce}var Pe,fr;function Fr(){if(fr)return Pe;fr=1;var S=function(r,P,p){this.x=r===void 0?0:r,this.y=P===void 0?0:P,this.z=p===void 0?0:p};return S.ZERO=new S(0,0,0),S.up=function(){return new S(0,1,0)},S.dot=function(r,P){return r.x*P.x+r.y*P.y+r.z*P.z},S.cross=function(r,P){return new S(r.y*P.z-r.z*P.y,r.z*P.x-r.x*P.z,r.x*P.y-r.y*P.x)},S.prototype.toString=function(){return"["+this.x+", "+this.y+", "+this.z+"]"},S.prototype.toArray=function(){var r=[];return r.push(this.x),r.push(this.y),r.push(this.z),r},S.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},S.prototype.normalize=function(){var r,P;return r=this.getLength(),r===0?this:(P=1/r,new S(this.x*P,this.y*P,this.z*P))},S.prototype.add=function(r){return new S(this.x+r.x,this.y+r.y,this.z+r.z)},S.prototype.subtract=function(r){return new S(this.x-r.x,this.y-r.y,this.z-r.z)},S.prototype.transform=function(r){var P,p,I,o,d;return d=r,P=this.x*d.m[0]+this.y*d.m[4]+this.z*d.m[8]+d.m[12],p=this.x*d.m[1]+this.y*d.m[5]+this.z*d.m[9]+d.m[13],I=this.x*d.m[2]+this.y*d.m[6]+this.z*d.m[10]+d.m[14],o=this.x*d.m[3]+this.y*d.m[7]+this.z*d.m[11]+d.m[15],new S(P/o,p/o,I/o)},Pe=S,Pe}var xe,ur;function Hn(){if(ur)return xe;ur=1;var S=Fr(),r=function(P){P!==void 0?this.m=P:(P=new Float32Array(16),P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,this.m=P)};return r.IDENTITY=new r,r.perspective=function(P,p,I,o){var d=new Float32Array(r.IDENTITY.m),h=1/Math.tan(P*.5);return d[0]=h/p,d[1]=d[2]=d[3]=0,d[5]=h,d[4]=d[6]=d[7]=0,d[8]=d[9]=0,d[10]=-o/(I-o),d[11]=1,d[12]=d[13]=d[15]=0,d[14]=I*o/(I-o),new r(d)},r.lookAt=function(P,p,I){var o,d,h,u,x,b,C;return o=new Float32Array(16),d=p.subtract(P).normalize(),h=S.cross(I,d).normalize(),u=S.cross(d,h).normalize(),x=-S.dot(h,P),b=-S.dot(u,P),C=-S.dot(d,P),o[0]=h.x,o[1]=u.x,o[2]=d.x,o[3]=0,o[4]=h.y,o[5]=u.y,o[6]=d.y,o[7]=0,o[8]=h.z,o[9]=u.z,o[10]=d.z,o[11]=0,o[12]=x,o[13]=b,o[14]=C,o[15]=1,new r(o)},r.prototype.invert=function(){var P,p,I,o,d,h,u,x,b,C,w,O,l,g,m,i,s,a,y,c,_,T,A,N,Y,F,W,U,H,J,D,M,X,R,G,rt,j,$,tt,z;return P=this.m[0],p=this.m[1],I=this.m[2],o=this.m[3],d=this.m[4],h=this.m[5],u=this.m[6],x=this.m[7],b=this.m[8],C=this.m[9],w=this.m[10],O=this.m[11],l=this.m[12],g=this.m[13],m=this.m[14],i=this.m[15],s=w*i-O*m,a=C*i-O*g,y=C*m-w*g,c=b*i-O*l,_=b*m-w*l,T=b*g-C*l,A=h*s-u*a+x*y,N=-(d*s-u*c+x*_),Y=d*a-h*c+x*T,F=-(d*y-h*_+u*T),W=1/(P*A+p*N+I*Y+o*F),U=u*i-x*m,H=h*i-x*g,J=h*m-u*g,D=d*i-x*l,M=d*m-u*l,X=d*g-h*l,R=u*O-x*w,G=h*O-x*C,rt=h*w-u*C,j=d*O-x*b,$=d*w-u*b,tt=d*C-h*b,z=new Float32Array(16),z[0]=A*W,z[4]=N*W,z[8]=Y*W,z[12]=F*W,z[1]=-(p*s-I*a+o*y)*W,z[5]=(P*s-I*c+o*_)*W,z[9]=-(P*a-p*c+o*T)*W,z[13]=(P*y-p*_+I*T)*W,z[2]=(p*U-I*H+o*J)*W,z[6]=-(P*U-I*D+o*M)*W,z[10]=(P*H-p*D+o*X)*W,z[14]=-(P*J-p*M+I*X)*W,z[3]=-(p*R-I*G+o*rt)*W,z[7]=(P*R-I*j+o*$)*W,z[11]=-(P*G-p*j+o*tt)*W,z[15]=(P*rt-p*$+I*tt)*W,new r(z)},r.prototype.multiply=function(P){var p=new Float32Array(16);return p[0]=this.m[0]*P.m[0]+this.m[1]*P.m[4]+this.m[2]*P.m[8]+this.m[3]*P.m[12],p[1]=this.m[0]*P.m[1]+this.m[1]*P.m[5]+this.m[2]*P.m[9]+this.m[3]*P.m[13],p[2]=this.m[0]*P.m[2]+this.m[1]*P.m[6]+this.m[2]*P.m[10]+this.m[3]*P.m[14],p[3]=this.m[0]*P.m[3]+this.m[1]*P.m[7]+this.m[2]*P.m[11]+this.m[3]*P.m[15],p[4]=this.m[4]*P.m[0]+this.m[5]*P.m[4]+this.m[6]*P.m[8]+this.m[7]*P.m[12],p[5]=this.m[4]*P.m[1]+this.m[5]*P.m[5]+this.m[6]*P.m[9]+this.m[7]*P.m[13],p[6]=this.m[4]*P.m[2]+this.m[5]*P.m[6]+this.m[6]*P.m[10]+this.m[7]*P.m[14],p[7]=this.m[4]*P.m[3]+this.m[5]*P.m[7]+this.m[6]*P.m[11]+this.m[7]*P.m[15],p[8]=this.m[8]*P.m[0]+this.m[9]*P.m[4]+this.m[10]*P.m[8]+this.m[11]*P.m[12],p[9]=this.m[8]*P.m[1]+this.m[9]*P.m[5]+this.m[10]*P.m[9]+this.m[11]*P.m[13],p[10]=this.m[8]*P.m[2]+this.m[9]*P.m[6]+this.m[10]*P.m[10]+this.m[11]*P.m[14],p[11]=this.m[8]*P.m[3]+this.m[9]*P.m[7]+this.m[10]*P.m[11]+this.m[11]*P.m[15],p[12]=this.m[12]*P.m[0]+this.m[13]*P.m[4]+this.m[14]*P.m[8]+this.m[15]*P.m[12],p[13]=this.m[12]*P.m[1]+this.m[13]*P.m[5]+this.m[14]*P.m[9]+this.m[15]*P.m[13],p[14]=this.m[12]*P.m[2]+this.m[13]*P.m[6]+this.m[14]*P.m[10]+this.m[15]*P.m[14],p[15]=this.m[12]*P.m[3]+this.m[13]*P.m[7]+this.m[14]*P.m[11]+this.m[15]*P.m[15],new r(p)},r.prototype.translate=function(P,p,I){var o=new Float32Array(this.m);return o[12]+=P,o[13]+=p,o[14]+=I,new r(o)},xe=r,xe}var Ce,hr;function kr(){if(hr)return Ce;hr=1;var S=zt(),r=jt(),P=Kt(),p=null,I=function(o){var d=Array.prototype.slice.call(arguments,1),h=arguments[1],u=arguments[2],x=arguments[arguments.length-1],b;this.text=String(o),typeof h=="number"?(this._x=h,this._y=u,d=d.slice(2)):Array.isArray(h)?(this._x=h[0],this._y=h[1],d=d.slice(1)):typeof h=="object"?(this._x=h.x!==void 0?h.x:0,this._y=h.y!==void 0?h.y:0,d=d.slice(1)):(this._x=0,this._y=0),typeof x=="object"?(b=x,h!==x&&(d=d.slice(0,d.length-1))):b={},d.length?this.fontFamily=d.shift():this.fontFamily=b.fontFamily||b.fontName||b.font||"sans-serif",d.length?this.fontSize=d.shift():this.fontSize=b.fontSize||24,d.length?this.textAlign=d.shift():this.textAlign=b.align||b.textAlign||"left",d.length?this.fill=d.shift():this.fill=b.fill||"black",this.transform=new P};return I.prototype.clone=function(){var o=new I;return o.text=this.text,o._x=this._x,o._y=this._y,o.fontFamily=this.fontFamily,o.fontSize=this.fontSize,o.textAlign=this.textAlign,o.fill=S.clone(this.fill),o.transform=this.transform,o},I._getDummyContext=function(){return p||(typeof document<"u"?p=document.createElement("canvas").getContext("2d"):p={font:"10px sans-serif",measureText:function(o){var d=parseFloat(this.font);return{width:o.length*d*.6}}}),p},I.prototype._getFont=function(){return this.fontSize+"px "+this.fontFamily},I.prototype.colorize=function(o){var d=this.clone();return d.fill=S.clone(o),d},I.prototype.draw=function(o){o.save(),o.font=this._getFont(),o.textAlign=this.textAlign;var d=this.transform.m;o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o.fillStyle=S.toCSS(this.fill),o.fillText(this.text,this._x,this._y),o.restore()},I.prototype.bounds=function(){var o=I._getDummyContext(),d,h=this._x;return o.font=this._getFont(),d=o.measureText(this.text),this.textAlign==="center"?h=this._x-d.width/2:this.textAlign==="right"&&(h=this._x-d.width),new r(h,this._y-this.fontSize,d.width,this.fontSize*1.2)},I.prototype.toSVG=function(){var o="<text";o+=' x="'+this._x+'"',o+=' y="'+this._y+'"',o+=' font-family="'+this.fontFamily+'"',o+=' font-size="'+this.fontSize+'"';var d;if(this.textAlign==="left"?d="start":this.textAlign==="center"?d="middle":this.textAlign==="right"&&(d="end"),o+=' text-anchor="'+d+'"',this.fill!=="black"){var h=S.parse(this.fill);o+=' fill="'+h.toHex(!0)+'"',h.a<1&&(o+=' opacity="'+h.a+'"')}return this.transform.isIdentity()||(o+=' transform="matrix('+this.transform.m.join(",")+')"'),o+=">",o+=this.text,o+="</text>",o},Ce=I,Ce}var we,dr;function Rr(){if(dr)return we;dr=1;var S=Zt(),r=Kt(),P={translate:function(p){p||(p=S.ZERO);var I=new r().translate(p.x,p.y);return I.transformShape(this)},scale:function(p,I){I||(I=S.ZERO);var o,d;typeof p=="number"?(o=p,d=p):(o=p.x,d=p.y);var h=new r;return h=h.translate(I.x,I.y),h=h.scale(o,d),h=h.translate(-I.x,-I.y),h.transformShape(this)},rotate:function(p,I){I||(I=S.ZERO);var o=new r;return o=o.translate(I.x,I.y),o=o.rotate(p),o=o.translate(-I.x,-I.y),o.transformShape(this)},skew:function(p,I){I||(I=S.ZERO);var o=new r;return o=o.translate(I.x,I.y),o=o.skew(p.x,p.y),o=o.translate(-I.x,-I.y),o.transformShape(this)}};return we=P,we}var Ie,pr;function Gn(){if(pr)return Ie;pr=1;var S=zt(),r={};return r.isDrawable=function(P){return Array.isArray(P)&&(P=P[0]),P?typeof P.draw=="function"||typeof P.x=="number"&&typeof P.y=="number"?!0:typeof P.r=="number"&&typeof P.g=="number"&&typeof P.b=="number":!1},r.drawPoints=function(P,p){P.fillStyle="blue",P.beginPath();for(var I,o=0;o<p.length;o+=1)I=p[o],P.moveTo(I.x,I.y),P.arc(I.x,I.y,2,0,Math.PI*2,!1);P.fill()},r.drawColoredPoints=function(P,p){for(var I,o=0,d=p.length;o<d;o+=1)I=p[o],P.fillStyle=S.toCSS(I),P.fillRect(I.x-2,I.y-2,4,4)},r.drawRectangles=function(P,p){P.save();for(var I,o=0;o<p.length;o+=1)I=p[o],P.strokeStyle="black",P.strokeWidth=1,P.rect(I.x,I.y,I.width,I.height),P.stroke();P.restore()},r.drawColors=function(P,p){P.save();for(var I,o=0;o<p.length;o+=1)I=p[o],P.fillStyle=S.toCSS(I),P.fillRect(0,0,30,30),P.translate(30,0);P.restore()},r.draw=function(P,p){var I=p,o=!1;if(Array.isArray(p)&&(I=p[0],o=!0),I)if(typeof I.draw=="function")if(o)for(var d=0,h=p.length;d<h;d+=1)r.draw(P,p[d]);else p.draw(P);else typeof I.x=="number"&&typeof I.y=="number"?typeof I.r=="number"&&typeof I.g=="number"&&typeof I.b=="number"?r.drawColoredPoints(P,o?p:[p]):typeof I.width=="number"&&typeof I.height=="number"?r.drawRectangles(P,o?p:[p]):r.drawPoints(P,o?p:[p]):typeof I.r=="number"&&typeof I.g=="number"&&typeof I.b=="number"&&r.drawColors(P,o?p:[p])},r.toSVG=function(P,p){p=p||{};var I=p.header===!0,o=p.x!==void 0?p.x:0,d=p.y!==void 0?p.y:0,h=p.width!==void 0?p.width:500,u=p.height!==void 0?p.height:500,x="";if(P){if(typeof P.toSVG=="function")x=P.toSVG();else if(Array.isArray(P)){x=`<g>
`;for(var b=0,C=P.length;b<C;b+=1)x+=r.toSVG(P[b])+`
`;x+=`</g>
`}}return I&&(x='<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="'+o+'" y="'+d+'" width="'+h+'px" height="'+u+'px" viewBox="'+o+" "+d+" "+h+" "+u+`">
`+x+`</svg>
`),x},Ie=r,Ie}var _e={exports:{}},cr;function zn(){return cr||(cr=1,function(S){(function(){var r={};r.use_lines=!0,r.use_xyz=!1;var P=!1;S.exports?(S.exports=r,P=!0):typeof document<"u"?window.ClipperLib=r:self.ClipperLib=r;var p;if(P){var I="chrome";p="Netscape"}else{var I=navigator.userAgent.toString().toLowerCase();p=navigator.appName}var o={};I.indexOf("chrome")!=-1&&I.indexOf("chromium")==-1?o.chrome=1:o.chrome=0,I.indexOf("chromium")!=-1?o.chromium=1:o.chromium=0,I.indexOf("safari")!=-1&&I.indexOf("chrome")==-1&&I.indexOf("chromium")==-1?o.safari=1:o.safari=0,I.indexOf("firefox")!=-1?o.firefox=1:o.firefox=0,I.indexOf("firefox/17")!=-1?o.firefox17=1:o.firefox17=0,I.indexOf("firefox/15")!=-1?o.firefox15=1:o.firefox15=0,I.indexOf("firefox/3")!=-1?o.firefox3=1:o.firefox3=0,I.indexOf("opera")!=-1?o.opera=1:o.opera=0,I.indexOf("msie 10")!=-1?o.msie10=1:o.msie10=0,I.indexOf("msie 9")!=-1?o.msie9=1:o.msie9=0,I.indexOf("msie 8")!=-1?o.msie8=1:o.msie8=0,I.indexOf("msie 7")!=-1?o.msie7=1:o.msie7=0,I.indexOf("msie ")!=-1?o.msie=1:o.msie=0,r.biginteger_used=null;var d;function h(t,e,n){r.biginteger_used=1,t!=null&&(typeof t=="number"&&typeof e>"u"?this.fromInt(t):typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}function u(){return new h(null,void 0,void 0)}function x(t,e,n,f,v,L){for(;--L>=0;){var E=e*this[t++]+n[f]+v;v=Math.floor(E/67108864),n[f++]=E&67108863}return v}function b(t,e,n,f,v,L){for(var E=e&32767,B=e>>15;--L>=0;){var k=this[t]&32767,Z=this[t++]>>15,V=B*k+Z*E;k=E*k+((V&32767)<<15)+n[f]+(v&1073741823),v=(k>>>30)+(V>>>15)+B*Z+(v>>>30),n[f++]=k&1073741823}return v}function C(t,e,n,f,v,L){for(var E=e&16383,B=e>>14;--L>=0;){var k=this[t]&16383,Z=this[t++]>>14,V=B*k+Z*E;k=E*k+((V&16383)<<14)+n[f]+v,v=(k>>28)+(V>>14)+B*Z,n[f++]=k&268435455}return v}p=="Microsoft Internet Explorer"?(h.prototype.am=b,d=30):p!="Netscape"?(h.prototype.am=x,d=26):(h.prototype.am=C,d=28),h.prototype.DB=d,h.prototype.DM=(1<<d)-1,h.prototype.DV=1<<d;var w=52;h.prototype.FV=Math.pow(2,w),h.prototype.F1=w-d,h.prototype.F2=2*d-w;var O="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array,g,m;for(g=48,m=0;m<=9;++m)l[g++]=m;for(g=97,m=10;m<36;++m)l[g++]=m;for(g=65,m=10;m<36;++m)l[g++]=m;function i(t){return O.charAt(t)}function s(t,e){var n=l[t.charCodeAt(e)];return n??-1}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function y(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function c(t){var e=u();return e.fromInt(t),e}function _(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var f=t.length,v=!1,L=0;--f>=0;){var E=n==8?t[f]&255:s(t,f);if(E<0){t.charAt(f)=="-"&&(v=!0);continue}v=!1,L==0?this[this.t++]=E:L+n>this.DB?(this[this.t-1]|=(E&(1<<this.DB-L)-1)<<L,this[this.t++]=E>>this.DB-L):this[this.t-1]|=E<<L,L+=n,L>=this.DB&&(L-=this.DB)}n==8&&t[0]&128&&(this.s=-1,L>0&&(this[this.t-1]|=(1<<this.DB-L)-1<<L)),this.clamp(),v&&h.ZERO.subTo(this,this)}function T(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function A(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,f,v=!1,L="",E=this.t,B=this.DB-E*this.DB%e;if(E-- >0)for(B<this.DB&&(f=this[E]>>B)>0&&(v=!0,L=i(f));E>=0;)B<e?(f=(this[E]&(1<<B)-1)<<e-B,f|=this[--E]>>(B+=this.DB-e)):(f=this[E]>>(B-=e)&n,B<=0&&(B+=this.DB,--E)),f>0&&(v=!0),v&&(L+=i(f));return v?L:"0"}function N(){var t=u();return h.ZERO.subTo(this,t),t}function Y(){return this.s<0?this.negate():this}function F(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this[n]-t[n])!=0)return e;return 0}function W(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function U(){return this.t<=0?0:this.DB*(this.t-1)+W(this[this.t-1]^this.s&this.DM)}function H(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function J(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function D(t,e){var n=t%this.DB,f=this.DB-n,v=(1<<f)-1,L=Math.floor(t/this.DB),E=this.s<<n&this.DM,B;for(B=this.t-1;B>=0;--B)e[B+L+1]=this[B]>>f|E,E=(this[B]&v)<<n;for(B=L-1;B>=0;--B)e[B]=0;e[L]=E,e.t=this.t+L+1,e.s=this.s,e.clamp()}function M(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var f=t%this.DB,v=this.DB-f,L=(1<<f)-1;e[0]=this[n]>>f;for(var E=n+1;E<this.t;++E)e[E-n-1]|=(this[E]&L)<<v,e[E-n]=this[E]>>f;f>0&&(e[this.t-n-1]|=(this.s&L)<<v),e.t=this.t-n,e.clamp()}function X(t,e){for(var n=0,f=0,v=Math.min(t.t,this.t);n<v;)f+=this[n]-t[n],e[n++]=f&this.DM,f>>=this.DB;if(t.t<this.t){for(f-=t.s;n<this.t;)f+=this[n],e[n++]=f&this.DM,f>>=this.DB;f+=this.s}else{for(f+=this.s;n<t.t;)f-=t[n],e[n++]=f&this.DM,f>>=this.DB;f-=t.s}e.s=f<0?-1:0,f<-1?e[n++]=this.DV+f:f>0&&(e[n++]=f),e.t=n,e.clamp()}function R(t,e){var n=this.abs(),f=t.abs(),v=n.t;for(e.t=v+f.t;--v>=0;)e[v]=0;for(v=0;v<f.t;++v)e[v+n.t]=n.am(0,f[v],e,v,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&h.ZERO.subTo(e,e)}function G(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var f=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,f,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function rt(t,e,n){var f=t.abs();if(!(f.t<=0)){var v=this.abs();if(v.t<f.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=u());var L=u(),E=this.s,B=t.s,k=this.DB-W(f[f.t-1]);k>0?(f.lShiftTo(k,L),v.lShiftTo(k,n)):(f.copyTo(L),v.copyTo(n));var Z=L.t,V=L[Z-1];if(V!=0){var Q=V*(1<<this.F1)+(Z>1?L[Z-2]>>this.F2:0),et=this.FV/Q,lt=(1<<this.F1)/Q,ft=1<<this.F2,pt=n.t,Et=pt-Z,Tt=e??u();for(L.dlShiftTo(Et,Tt),n.compareTo(Tt)>=0&&(n[n.t++]=1,n.subTo(Tt,n)),h.ONE.dlShiftTo(Z,Tt),Tt.subTo(L,L);L.t<Z;)L[L.t++]=0;for(;--Et>=0;){var Rt=n[--pt]==V?this.DM:Math.floor(n[pt]*et+(n[pt-1]+ft)*lt);if((n[pt]+=L.am(0,Rt,n,Et,0,Z))<Rt)for(L.dlShiftTo(Et,Tt),n.subTo(Tt,n);n[pt]<--Rt;)n.subTo(Tt,n)}e!=null&&(n.drShiftTo(Z,e),E!=B&&h.ZERO.subTo(e,e)),n.t=Z,n.clamp(),k>0&&n.rShiftTo(k,n),E<0&&h.ZERO.subTo(n,n)}}}function j(t){var e=u();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(h.ZERO)>0&&t.subTo(e,e),e}function $(t){this.m=t}function tt(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function z(t){return t}function ot(t){t.divRemTo(this.m,null,t)}function it(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function ct(t,e){t.squareTo(e),this.reduce(e)}$.prototype.convert=tt,$.prototype.revert=z,$.prototype.reduce=ot,$.prototype.mulTo=it,$.prototype.sqrTo=ct;function st(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function yt(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function xt(t){var e=u();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(h.ZERO)>0&&this.m.subTo(e,e),e}function Ct(t){var e=u();return t.copyTo(e),this.reduce(e),e}function vt(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t[e]&32767,f=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,f,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function gt(t,e){t.squareTo(e),this.reduce(e)}function wt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}yt.prototype.convert=xt,yt.prototype.revert=Ct,yt.prototype.reduce=vt,yt.prototype.mulTo=wt,yt.prototype.sqrTo=gt;function bt(){return(this.t>0?this[0]&1:this.s)==0}function Mt(t,e){if(t>4294967295||t<1)return h.ONE;var n=u(),f=u(),v=e.convert(this),L=W(t)-1;for(v.copyTo(n);--L>=0;)if(e.sqrTo(n,f),(t&1<<L)>0)e.mulTo(f,v,n);else{var E=n;n=f,f=E}return e.revert(n)}function Ut(t,e){var n;return t<256||e.isEven()?n=new $(e):n=new yt(e),this.exp(t,n)}h.prototype.copyTo=a,h.prototype.fromInt=y,h.prototype.fromString=_,h.prototype.clamp=T,h.prototype.dlShiftTo=H,h.prototype.drShiftTo=J,h.prototype.lShiftTo=D,h.prototype.rShiftTo=M,h.prototype.subTo=X,h.prototype.multiplyTo=R,h.prototype.squareTo=G,h.prototype.divRemTo=rt,h.prototype.invDigit=st,h.prototype.isEven=bt,h.prototype.exp=Mt,h.prototype.toString=A,h.prototype.negate=N,h.prototype.abs=Y,h.prototype.compareTo=F,h.prototype.bitLength=U,h.prototype.mod=j,h.prototype.modPowInt=Ut,h.ZERO=c(0),h.ONE=c(1);function Ht(){var t=u();return this.copyTo(t),t}function Gt(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function St(){return this.t==0?this.s:this[0]<<24>>24}function qt(){return this.t==0?this.s:this[0]<<16>>16}function q(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function nt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),f=c(n),v=u(),L=u(),E="";for(this.divRemTo(f,v,L);v.signum()>0;)E=(n+L.intValue()).toString(t).substr(1)+E,v.divRemTo(f,v,L);return L.intValue().toString(t)+E}function ut(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),f=Math.pow(e,n),v=!1,L=0,E=0,B=0;B<t.length;++B){var k=s(t,B);if(k<0){t.charAt(B)=="-"&&this.signum()==0&&(v=!0);continue}E=e*E+k,++L>=n&&(this.dMultiply(f),this.dAddOffset(E,0),L=0,E=0)}L>0&&(this.dMultiply(Math.pow(e,L)),this.dAddOffset(E,0)),v&&h.ZERO.subTo(this,this)}function at(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(h.ONE.shiftLeft(t-1),Xt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(h.ONE.shiftLeft(t-1),this);else{var f=new Array,v=t&7;f.length=(t>>3)+1,e.nextBytes(f),v>0?f[0]&=(1<<v)-1:f[0]=0,this.fromString(f,256)}}function dt(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,f,v=0;if(t-- >0)for(n<this.DB&&(f=this[t]>>n)!=(this.s&this.DM)>>n&&(e[v++]=f|this.s<<this.DB-n);t>=0;)n<8?(f=(this[t]&(1<<n)-1)<<8-n,f|=this[--t]>>(n+=this.DB-8)):(f=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),f&128&&(f|=-256),v==0&&(this.s&128)!=(f&128)&&++v,(v>0||f!=this.s)&&(e[v++]=f);return e}function mt(t){return this.compareTo(t)==0}function It(t){return this.compareTo(t)<0?this:t}function Nt(t){return this.compareTo(t)>0?this:t}function Pt(t,e,n){var f,v,L=Math.min(t.t,this.t);for(f=0;f<L;++f)n[f]=e(this[f],t[f]);if(t.t<this.t){for(v=t.s&this.DM,f=L;f<this.t;++f)n[f]=e(this[f],v);n.t=this.t}else{for(v=this.s&this.DM,f=L;f<t.t;++f)n[f]=e(v,t[f]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function Ft(t,e){return t&e}function Yt(t){var e=u();return this.bitwiseTo(t,Ft,e),e}function Xt(t,e){return t|e}function Lt(t){var e=u();return this.bitwiseTo(t,Xt,e),e}function At(t,e){return t^e}function kt(t){var e=u();return this.bitwiseTo(t,At,e),e}function Bt(t,e){return t&~e}function Ot(t){var e=u();return this.bitwiseTo(t,Bt,e),e}function Wt(){for(var t=u(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function se(t){var e=u();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function oe(t){var e=u();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Gr(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function zr(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+Gr(this[t]);return this.s<0?this.t*this.DB:-1}function Vr(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function Dr(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=Vr(this[n]^e);return t}function Jr(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function jr(t,e){var n=h.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Qr(t){return this.changeBit(t,Xt)}function $r(t){return this.changeBit(t,Bt)}function Kr(t){return this.changeBit(t,At)}function tn(t,e){for(var n=0,f=0,v=Math.min(t.t,this.t);n<v;)f+=this[n]+t[n],e[n++]=f&this.DM,f>>=this.DB;if(t.t<this.t){for(f+=t.s;n<this.t;)f+=this[n],e[n++]=f&this.DM,f>>=this.DB;f+=this.s}else{for(f+=this.s;n<t.t;)f+=t[n],e[n++]=f&this.DM,f>>=this.DB;f+=t.s}e.s=f<0?-1:0,f>0?e[n++]=f:f<-1&&(e[n++]=this.DV+f),e.t=n,e.clamp()}function en(t){var e=u();return this.addTo(t,e),e}function rn(t){var e=u();return this.subTo(t,e),e}function nn(t){var e=u();return this.multiplyTo(t,e),e}function sn(){var t=u();return this.squareTo(t),t}function on(t){var e=u();return this.divRemTo(t,e,null),e}function ln(t){var e=u();return this.divRemTo(t,null,e),e}function an(t){var e=u(),n=u();return this.divRemTo(t,e,n),new Array(e,n)}function fn(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function un(t,e){if(t!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function $t(){}function Ve(t){return t}function hn(t,e,n){t.multiplyTo(e,n)}function dn(t,e){t.squareTo(e)}$t.prototype.convert=Ve,$t.prototype.revert=Ve,$t.prototype.mulTo=hn,$t.prototype.sqrTo=dn;function pn(t){return this.exp(t,new $t)}function cn(t,e,n){var f=Math.min(this.t+t.t,e);for(n.s=0,n.t=f;f>0;)n[--f]=0;var v;for(v=n.t-this.t;f<v;++f)n[f+this.t]=this.am(0,t[f],n,f,0,this.t);for(v=Math.min(t.t,e);f<v;++f)this.am(0,t[f],n,f,0,e-f);n.clamp()}function mn(t,e,n){--e;var f=n.t=this.t+t.t-e;for(n.s=0;--f>=0;)n[f]=0;for(f=Math.max(e-this.t,0);f<t.t;++f)n[this.t+f-e]=this.am(e-f,t[f],n,0,0,this.t+f-e);n.clamp(),n.drShiftTo(1,n)}function Dt(t){this.r2=u(),this.q3=u(),h.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function yn(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=u();return t.copyTo(e),this.reduce(e),e}function vn(t){return t}function gn(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Pn(t,e){t.squareTo(e),this.reduce(e)}function xn(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Dt.prototype.convert=yn,Dt.prototype.revert=vn,Dt.prototype.reduce=gn,Dt.prototype.mulTo=xn,Dt.prototype.sqrTo=Pn;function Cn(t,e){var n=t.bitLength(),f,v=c(1),L;if(n<=0)return v;n<18?f=1:n<48?f=3:n<144?f=4:n<768?f=5:f=6,n<8?L=new $(e):e.isEven()?L=new Dt(e):L=new yt(e);var E=new Array,B=3,k=f-1,Z=(1<<f)-1;if(E[1]=L.convert(this),f>1){var V=u();for(L.sqrTo(E[1],V);B<=Z;)E[B]=u(),L.mulTo(V,E[B-2],E[B]),B+=2}var Q=t.t-1,et,lt=!0,ft=u(),pt;for(n=W(t[Q])-1;Q>=0;){for(n>=k?et=t[Q]>>n-k&Z:(et=(t[Q]&(1<<n+1)-1)<<k-n,Q>0&&(et|=t[Q-1]>>this.DB+n-k)),B=f;!(et&1);)et>>=1,--B;if((n-=B)<0&&(n+=this.DB,--Q),lt)E[et].copyTo(v),lt=!1;else{for(;B>1;)L.sqrTo(v,ft),L.sqrTo(ft,v),B-=2;B>0?L.sqrTo(v,ft):(pt=v,v=ft,ft=pt),L.mulTo(ft,E[et],v)}for(;Q>=0&&!(t[Q]&1<<n);)L.sqrTo(v,ft),pt=v,v=ft,ft=pt,--n<0&&(n=this.DB-1,--Q)}return L.revert(v)}function wn(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var f=e;e=n,n=f}var v=e.getLowestSetBit(),L=n.getLowestSetBit();if(L<0)return e;for(v<L&&(L=v),L>0&&(e.rShiftTo(L,e),n.rShiftTo(L,n));e.signum()>0;)(v=e.getLowestSetBit())>0&&e.rShiftTo(v,e),(v=n.getLowestSetBit())>0&&n.rShiftTo(v,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return L>0&&n.lShiftTo(L,n),n}function In(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this[0]%t;else for(var f=this.t-1;f>=0;--f)n=(e*n+this[f])%t;return n}function _n(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return h.ZERO;for(var n=t.clone(),f=this.clone(),v=c(1),L=c(0),E=c(0),B=c(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!v.isEven()||!L.isEven())&&(v.addTo(this,v),L.subTo(t,L)),v.rShiftTo(1,v)):L.isEven()||L.subTo(t,L),L.rShiftTo(1,L);for(;f.isEven();)f.rShiftTo(1,f),e?((!E.isEven()||!B.isEven())&&(E.addTo(this,E),B.subTo(t,B)),E.rShiftTo(1,E)):B.isEven()||B.subTo(t,B),B.rShiftTo(1,B);n.compareTo(f)>=0?(n.subTo(f,n),e&&v.subTo(E,v),L.subTo(B,L)):(f.subTo(n,f),e&&E.subTo(v,E),B.subTo(L,B))}if(f.compareTo(h.ONE)!=0)return h.ZERO;if(B.compareTo(t)>=0)return B.subtract(t);if(B.signum()<0)B.addTo(t,B);else return B;return B.signum()<0?B.add(t):B}var _t=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Tn=(1<<26)/_t[_t.length-1];function bn(t){var e,n=this.abs();if(n.t==1&&n[0]<=_t[_t.length-1]){for(e=0;e<_t.length;++e)if(n[0]==_t[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<_t.length;){for(var f=_t[e],v=e+1;v<_t.length&&f<Tn;)f*=_t[v++];for(f=n.modInt(f);e<v;)if(f%_t[e++]==0)return!1}return n.millerRabin(t)}function Ln(t){var e=this.subtract(h.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var f=e.shiftRight(n);t=t+1>>1,t>_t.length&&(t=_t.length);for(var v=u(),L=0;L<t;++L){v.fromInt(_t[Math.floor(Math.random()*_t.length)]);var E=v.modPow(f,this);if(E.compareTo(h.ONE)!=0&&E.compareTo(e)!=0){for(var B=1;B++<n&&E.compareTo(e)!=0;)if(E=E.modPowInt(2,this),E.compareTo(h.ONE)==0)return!1;if(E.compareTo(e)!=0)return!1}}return!0}h.prototype.chunkSize=q,h.prototype.toRadix=nt,h.prototype.fromRadix=ut,h.prototype.fromNumber=at,h.prototype.bitwiseTo=Pt,h.prototype.changeBit=jr,h.prototype.addTo=tn,h.prototype.dMultiply=fn,h.prototype.dAddOffset=un,h.prototype.multiplyLowerTo=cn,h.prototype.multiplyUpperTo=mn,h.prototype.modInt=In,h.prototype.millerRabin=Ln,h.prototype.clone=Ht,h.prototype.intValue=Gt,h.prototype.byteValue=St,h.prototype.shortValue=qt,h.prototype.signum=K,h.prototype.toByteArray=dt,h.prototype.equals=mt,h.prototype.min=It,h.prototype.max=Nt,h.prototype.and=Yt,h.prototype.or=Lt,h.prototype.xor=kt,h.prototype.andNot=Ot,h.prototype.not=Wt,h.prototype.shiftLeft=se,h.prototype.shiftRight=oe,h.prototype.getLowestSetBit=zr,h.prototype.bitCount=Dr,h.prototype.testBit=Jr,h.prototype.setBit=Qr,h.prototype.clearBit=$r,h.prototype.flipBit=Kr,h.prototype.add=en,h.prototype.subtract=rn,h.prototype.multiply=nn,h.prototype.divide=on,h.prototype.remainder=ln,h.prototype.divideAndRemainder=an,h.prototype.modPow=Cn,h.prototype.modInverse=_n,h.prototype.pow=pn,h.prototype.gcd=wn,h.prototype.isProbablePrime=bn,h.prototype.square=sn;var ht=h;ht.prototype.IsNegative=function(){return this.compareTo(ht.ZERO)==-1},ht.op_Equality=function(t,e){return t.compareTo(e)==0},ht.op_Inequality=function(t,e){return t.compareTo(e)!=0},ht.op_GreaterThan=function(t,e){return t.compareTo(e)>0},ht.op_LessThan=function(t,e){return t.compareTo(e)<0},ht.op_Addition=function(t,e){return new ht(t).add(new ht(e))},ht.op_Subtraction=function(t,e){return new ht(t).subtract(new ht(e))},ht.Int128Mul=function(t,e){return new ht(t).multiply(new ht(e))},ht.op_Division=function(t,e){return t.divide(e)},ht.prototype.ToDouble=function(){return parseFloat(this.toString())};var De=function(t,e){var n;if(typeof Object.getOwnPropertyNames>"u"){for(n in e.prototype)(typeof t.prototype[n]>"u"||t.prototype[n]==Object.prototype[n])&&(t.prototype[n]=e.prototype[n]);for(n in e)typeof t[n]>"u"&&(t[n]=e[n]);t.$baseCtor=e}else{for(var f=Object.getOwnPropertyNames(e.prototype),v=0;v<f.length;v++)typeof Object.getOwnPropertyDescriptor(t.prototype,f[v])>"u"&&Object.defineProperty(t.prototype,f[v],Object.getOwnPropertyDescriptor(e.prototype,f[v]));for(n in e)typeof t[n]>"u"&&(t[n]=e[n]);t.$baseCtor=e}};r.Path=function(){return[]},r.Paths=function(){return[]},r.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,t.length==1?(this.X=t[0].X,this.Y=t[0].Y):t.length==2&&(this.X=t[0],this.Y=t[1])},r.DoublePoint0=function(){this.X=0,this.Y=0},r.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},r.DoublePoint2=function(t,e){this.X=t,this.Y=e},r.PolyNode=function(){this.m_Parent=null,this.m_polygon=new r.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},r.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;e!==null;)t=!t,e=e.m_Parent;return t},r.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},r.PolyNode.prototype.Contour=function(){return this.m_polygon},r.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},r.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},r.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},r.PolyNode.prototype.Childs=function(){return this.m_Childs},r.PolyNode.prototype.Parent=function(){return this.m_Parent},r.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},r.PolyTree=function(){this.m_AllPolys=[],r.PolyNode.call(this)},r.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},r.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},r.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!=this.m_AllPolys[0]&&t--,t},De(r.PolyTree,r.PolyNode),r.Math_Abs_Int64=r.Math_Abs_Int32=r.Math_Abs_Double=function(t){return Math.abs(t)},r.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},o.msie||o.opera||o.safari?r.Cast_Int32=function(t){return t|0}:r.Cast_Int32=function(t){return~~t},o.chrome?r.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:o.firefox&&typeof Number.toInteger=="function"?r.Cast_Int64=function(t){return Number.toInteger(t)}:o.msie7||o.msie8?r.Cast_Int64=function(t){return parseInt(t,10)}:o.msie?r.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):t|0}:r.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},r.Clear=function(t){t.length=0},r.PI=3.141592653589793,r.PI2=2*3.141592653589793,r.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,r.use_xyz)if(this.Z=0,e==3)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(e==2)this.X=t[0],this.Y=t[1],this.Z=0;else if(e==1)if(t[0]instanceof r.DoublePoint){var n=t[0];this.X=r.Clipper.Round(n.X),this.Y=r.Clipper.Round(n.Y),this.Z=0}else{var f=t[0];typeof f.Z>"u"&&(f.Z=0),this.X=f.X,this.Y=f.Y,this.Z=f.Z}else this.X=0,this.Y=0,this.Z=0;else if(e==2)this.X=t[0],this.Y=t[1];else if(e==1)if(t[0]instanceof r.DoublePoint){var n=t[0];this.X=r.Clipper.Round(n.X),this.Y=r.Clipper.Round(n.Y)}else{var f=t[0];this.X=f.X,this.Y=f.Y}else this.X=0,this.Y=0},r.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},r.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},r.use_xyz?(r.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},r.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},r.IntPoint1dp=function(t){this.X=r.Clipper.Round(t.X),this.Y=r.Clipper.Round(t.Y),this.Z=0},r.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},r.IntPoint3=function(t,e,n){this.X=t,this.Y=e,this.Z=n}):(r.IntPoint0=function(){this.X=0,this.Y=0},r.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},r.IntPoint1dp=function(t){this.X=r.Clipper.Round(t.X),this.Y=r.Clipper.Round(t.Y)},r.IntPoint2=function(t,e){this.X=t,this.Y=e}),r.IntRect=function(){var t=arguments,e=t.length;e==4?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):e==1?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},r.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},r.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},r.IntRect4=function(t,e,n,f){this.left=t,this.top=e,this.right=n,this.bottom=f},r.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},r.PolyType={ptSubject:0,ptClip:1},r.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},r.JoinType={jtSquare:0,jtRound:1,jtMiter:2},r.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},r.EdgeSide={esLeft:0,esRight:1},r.Direction={dRightToLeft:0,dLeftToRight:1},r.TEdge=function(){this.Bot=new r.IntPoint,this.Curr=new r.IntPoint,this.Top=new r.IntPoint,this.Delta=new r.IntPoint,this.Dx=0,this.PolyTyp=r.PolyType.ptSubject,this.Side=r.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},r.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new r.IntPoint},r.MyIntersectNodeSort=function(){},r.MyIntersectNodeSort.Compare=function(t,e){var n=e.Pt.Y-t.Pt.Y;return n>0?1:n<0?-1:0},r.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},r.Scanbeam=function(){this.Y=0,this.Next=null},r.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},r.OutPt=function(){this.Idx=0,this.Pt=new r.IntPoint,this.Next=null,this.Prev=null},r.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new r.IntPoint},r.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.horizontal=-9007199254740992,r.ClipperBase.Skip=-2,r.ClipperBase.Unassigned=-1,r.ClipperBase.tolerance=1e-20,r.ClipperBase.loRange=47453132,r.ClipperBase.hiRange=0xfffffffffffff,r.ClipperBase.near_zero=function(t){return t>-r.ClipperBase.tolerance&&t<r.ClipperBase.tolerance},r.ClipperBase.IsHorizontal=function(t){return t.Delta.Y===0},r.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(r.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!=e);return!1},r.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,f){return f?t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&ht.op_Equality(ht.Int128Mul(t.X-e.X,n.Y-e.Y),ht.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},r.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var f=e;;){if(this.PointOnLineSegment(t,f.Pt,f.Next.Pt,n))return!0;if(f=f.Next,f==e)break}return!1},r.ClipperBase.prototype.SlopesEqual=r.ClipperBase.SlopesEqual=function(){var t=arguments,e=t.length,n,f,v,L,E,B,k;return e==3?(n=t[0],f=t[1],k=t[2],k?ht.op_Equality(ht.Int128Mul(n.Delta.Y,f.Delta.X),ht.Int128Mul(n.Delta.X,f.Delta.Y)):r.Cast_Int64(n.Delta.Y*f.Delta.X)==r.Cast_Int64(n.Delta.X*f.Delta.Y)):e==4?(v=t[0],L=t[1],E=t[2],k=t[3],k?ht.op_Equality(ht.Int128Mul(v.Y-L.Y,L.X-E.X),ht.Int128Mul(v.X-L.X,L.Y-E.Y)):r.Cast_Int64((v.Y-L.Y)*(L.X-E.X))-r.Cast_Int64((v.X-L.X)*(L.Y-E.Y))===0):(v=t[0],L=t[1],E=t[2],B=t[3],k=t[4],k?ht.op_Equality(ht.Int128Mul(v.Y-L.Y,E.X-B.X),ht.Int128Mul(v.X-L.X,E.Y-B.Y)):r.Cast_Int64((v.Y-L.Y)*(E.X-B.X))-r.Cast_Int64((v.X-L.X)*(E.Y-B.Y))===0)},r.ClipperBase.SlopesEqual3=function(t,e,n){return n?ht.op_Equality(ht.Int128Mul(t.Delta.Y,e.Delta.X),ht.Int128Mul(t.Delta.X,e.Delta.Y)):r.Cast_Int64(t.Delta.Y*e.Delta.X)==r.Cast_Int64(t.Delta.X*e.Delta.Y)},r.ClipperBase.SlopesEqual4=function(t,e,n,f){return f?ht.op_Equality(ht.Int128Mul(t.Y-e.Y,e.X-n.X),ht.Int128Mul(t.X-e.X,e.Y-n.Y)):r.Cast_Int64((t.Y-e.Y)*(e.X-n.X))-r.Cast_Int64((t.X-e.X)*(e.Y-n.Y))===0},r.ClipperBase.SlopesEqual5=function(t,e,n,f,v){return v?ht.op_Equality(ht.Int128Mul(t.Y-e.Y,n.X-f.X),ht.Int128Mul(t.X-e.X,n.Y-f.Y)):r.Cast_Int64((t.Y-e.Y)*(n.X-f.X))-r.Cast_Int64((t.X-e.X)*(n.Y-f.Y))===0},r.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var n=0,f=this.m_edges[t].length;n<f;++n)this.m_edges[t][n]=null;r.Clear(this.m_edges[t])}r.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},r.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},r.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>r.ClipperBase.hiRange||t.Y>r.ClipperBase.hiRange||-t.X>r.ClipperBase.hiRange||-t.Y>r.ClipperBase.hiRange)&&r.Error("Coordinate outside allowed range in RangeTest()."):(t.X>r.ClipperBase.loRange||t.Y>r.ClipperBase.loRange||-t.X>r.ClipperBase.loRange||-t.Y>r.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},r.ClipperBase.prototype.InitEdge=function(t,e,n,f){t.Next=e,t.Prev=n,t.Curr.X=f.X,t.Curr.Y=f.Y,r.use_xyz&&(t.Curr.Z=f.Z),t.OutIdx=-1},r.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,r.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,r.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,r.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,r.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=e},r.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;r.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||r.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=r.ClipperBase.horizontal&&t.Prev.Dx!=r.ClipperBase.horizontal)break;for(;t.Prev.Dx==r.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==r.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},r.ClipperBase.prototype.ProcessBound=function(t,e){var n,f=t,v;if(f.OutIdx==r.ClipperBase.Skip){if(t=f,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=f&&t.Dx==r.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=f&&t.Dx==r.ClipperBase.horizontal;)t=t.Next}if(t==f)e?f=t.Next:f=t.Prev;else{e?t=f.Next:t=f.Prev;var L=new r.LocalMinima;L.Next=null,L.Y=t.Bot.Y,L.LeftBound=null,L.RightBound=t,t.WindDelta=0,f=this.ProcessBound(t,e),this.InsertLocalMinima(L)}return f}if(t.Dx==r.ClipperBase.horizontal&&(e?n=t.Prev:n=t.Next,n.OutIdx!=r.ClipperBase.Skip&&(n.Dx==r.ClipperBase.horizontal?n.Bot.X!=t.Bot.X&&n.Top.X!=t.Bot.X&&this.ReverseHorizontal(t):n.Bot.X!=t.Bot.X&&this.ReverseHorizontal(t))),n=t,e){for(;f.Top.Y==f.Next.Bot.Y&&f.Next.OutIdx!=r.ClipperBase.Skip;)f=f.Next;if(f.Dx==r.ClipperBase.horizontal&&f.Next.OutIdx!=r.ClipperBase.Skip){for(v=f;v.Prev.Dx==r.ClipperBase.horizontal;)v=v.Prev;v.Prev.Top.X==f.Next.Top.X?e||(f=v.Prev):v.Prev.Top.X>f.Next.Top.X&&(f=v.Prev)}for(;t!=f;)t.NextInLML=t.Next,t.Dx==r.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==r.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),f=f.Next}else{for(;f.Top.Y==f.Prev.Bot.Y&&f.Prev.OutIdx!=r.ClipperBase.Skip;)f=f.Prev;if(f.Dx==r.ClipperBase.horizontal&&f.Prev.OutIdx!=r.ClipperBase.Skip){for(v=f;v.Next.Dx==r.ClipperBase.horizontal;)v=v.Next;v.Next.Top.X==f.Prev.Top.X?e||(f=v.Next):v.Next.Top.X>f.Prev.Top.X&&(f=v.Next)}for(;t!=f;)t.NextInLML=t.Prev,t.Dx==r.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==r.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),f=f.Prev}return f},r.ClipperBase.prototype.AddPath=function(t,e,n){r.use_lines?!n&&e==r.PolyType.ptClip&&r.Error("AddPath: Open paths must be subject."):n||r.Error("AddPath: Open paths have been disabled.");var f=t.length-1;if(n)for(;f>0&&r.IntPoint.op_Equality(t[f],t[0]);)--f;for(;f>0&&r.IntPoint.op_Equality(t[f],t[f-1]);)--f;if(n&&f<2||!n&&f<1)return!1;for(var v=new Array,L=0;L<=f;L++)v.push(new r.TEdge);var E=!0;v[1].Curr.X=t[1].X,v[1].Curr.Y=t[1].Y,r.use_xyz&&(v[1].Curr.Z=t[1].Z);var B={Value:this.m_UseFullRange};this.RangeTest(t[0],B),this.m_UseFullRange=B.Value,B.Value=this.m_UseFullRange,this.RangeTest(t[f],B),this.m_UseFullRange=B.Value,this.InitEdge(v[0],v[1],v[f],t[0]),this.InitEdge(v[f],v[0],v[f-1],t[f]);for(var L=f-1;L>=1;--L)B.Value=this.m_UseFullRange,this.RangeTest(t[L],B),this.m_UseFullRange=B.Value,this.InitEdge(v[L],v[L+1],v[L-1],t[L]);for(var k=v[0],Z=k,V=k;;){if(Z.Curr==Z.Next.Curr&&(n||Z.Next!=k)){if(Z==Z.Next)break;Z==k&&(k=Z.Next),Z=this.RemoveEdge(Z),V=Z;continue}if(Z.Prev==Z.Next)break;if(n&&r.ClipperBase.SlopesEqual(Z.Prev.Curr,Z.Curr,Z.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(Z.Prev.Curr,Z.Curr,Z.Next.Curr))){Z==k&&(k=Z.Next),Z=this.RemoveEdge(Z),Z=Z.Prev,V=Z;continue}if(Z=Z.Next,Z==V||!n&&Z.Next==k)break}if(!n&&Z==Z.Next||n&&Z.Prev==Z.Next)return!1;n||(this.m_HasOpenPaths=!0,k.Prev.OutIdx=r.ClipperBase.Skip),Z=k;do this.InitEdge2(Z,e),Z=Z.Next,E&&Z.Curr.Y!=k.Curr.Y&&(E=!1);while(Z!=k);if(E){if(n)return!1;Z.Prev.OutIdx=r.ClipperBase.Skip,Z.Prev.Bot.X<Z.Prev.Top.X&&this.ReverseHorizontal(Z.Prev);var Q=new r.LocalMinima;for(Q.Next=null,Q.Y=Z.Bot.Y,Q.LeftBound=null,Q.RightBound=Z,Q.RightBound.Side=r.EdgeSide.esRight,Q.RightBound.WindDelta=0;Z.Next.OutIdx!=r.ClipperBase.Skip;)Z.NextInLML=Z.Next,Z.Bot.X!=Z.Prev.Top.X&&this.ReverseHorizontal(Z),Z=Z.Next;return this.InsertLocalMinima(Q),this.m_edges.push(v),!0}this.m_edges.push(v);var et,lt=null;for(r.IntPoint.op_Equality(Z.Prev.Bot,Z.Prev.Top)&&(Z=Z.Next);Z=this.FindNextLocMin(Z),Z!=lt;){lt==null&&(lt=Z);var Q=new r.LocalMinima;Q.Next=null,Q.Y=Z.Bot.Y,Z.Dx<Z.Prev.Dx?(Q.LeftBound=Z.Prev,Q.RightBound=Z,et=!1):(Q.LeftBound=Z,Q.RightBound=Z.Prev,et=!0),Q.LeftBound.Side=r.EdgeSide.esLeft,Q.RightBound.Side=r.EdgeSide.esRight,n?Q.LeftBound.Next==Q.RightBound?Q.LeftBound.WindDelta=-1:Q.LeftBound.WindDelta=1:Q.LeftBound.WindDelta=0,Q.RightBound.WindDelta=-Q.LeftBound.WindDelta,Z=this.ProcessBound(Q.LeftBound,et),Z.OutIdx==r.ClipperBase.Skip&&(Z=this.ProcessBound(Z,et));var ft=this.ProcessBound(Q.RightBound,!et);ft.OutIdx==r.ClipperBase.Skip&&(ft=this.ProcessBound(ft,!et)),Q.LeftBound.OutIdx==r.ClipperBase.Skip?Q.LeftBound=null:Q.RightBound.OutIdx==r.ClipperBase.Skip&&(Q.RightBound=null),this.InsertLocalMinima(Q),et||(Z=ft)}return!0},r.ClipperBase.prototype.AddPaths=function(t,e,n){for(var f=!1,v=0,L=t.length;v<L;++v)this.AddPath(t[v],e,n)&&(f=!0);return f},r.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,n){return r.IntPoint.op_Equality(t,n)||r.IntPoint.op_Equality(t,e)||r.IntPoint.op_Equality(n,e)?!1:t.X!=n.X?e.X>t.X==e.X<n.X:e.Y>t.Y==e.Y<n.Y},r.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},r.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Delta.Y===0?t.Dx=r.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},r.ClipperBase.prototype.InsertLocalMinima=function(t){if(this.m_MinimaList===null)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;e.Next!==null&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},r.ClipperBase.prototype.PopLocalMinima=function(){this.m_CurrentLM!==null&&(this.m_CurrentLM=this.m_CurrentLM.Next)},r.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,r.use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},r.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!=null)for(var t=this.m_MinimaList;t!=null;){var e=t.LeftBound;e!=null&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,r.use_xyz&&(e.Curr.Z=e.Bot.Z),e.Side=r.EdgeSide.esLeft,e.OutIdx=r.ClipperBase.Unassigned),e=t.RightBound,e!=null&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,r.use_xyz&&(e.Curr.Z=e.Bot.Z),e.Side=r.EdgeSide.esRight,e.OutIdx=r.ClipperBase.Unassigned),t=t.Next}},r.Clipper=function(t){typeof t>"u"&&(t=0),this.m_PolyOuts=null,this.m_ClipType=r.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=r.PolyFillType.pftEvenOdd,this.m_SubjFillType=r.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,r.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=r.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&t)!==0,this.StrictlySimple=(2&t)!==0,this.PreserveCollinear=(4&t)!==0,r.use_xyz&&(this.ZFillFunction=null)},r.Clipper.ioReverseSolution=1,r.Clipper.ioStrictlySimple=2,r.Clipper.ioPreserveCollinear=4,r.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),r.ClipperBase.prototype.Clear.call(this))},r.Clipper.prototype.DisposeScanbeamList=function(){for(;this.m_Scanbeam!==null;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},r.Clipper.prototype.Reset=function(){r.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;t!==null;)this.InsertScanbeam(t.Y),t=t.Next},r.Clipper.prototype.InsertScanbeam=function(t){if(this.m_Scanbeam===null)this.m_Scanbeam=new r.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new r.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var n=this.m_Scanbeam;n.Next!==null&&t<=n.Next.Y;)n=n.Next;if(t==n.Y)return;var e=new r.Scanbeam;e.Y=t,e.Next=n.Next,n.Next=e}},r.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,n=t[1]instanceof r.PolyTree;if(e==4&&!n){var f=t[0],v=t[1],L=t[2],E=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&r.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,r.Clear(v),this.m_SubjFillType=L,this.m_ClipFillType=E,this.m_ClipType=f,this.m_UsingPolyTree=!1;try{var B=this.ExecuteInternal();B&&this.BuildResult(v)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return B}else if(e==4&&n){var f=t[0],k=t[1],L=t[2],E=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=L,this.m_ClipFillType=E,this.m_ClipType=f,this.m_UsingPolyTree=!0;try{var B=this.ExecuteInternal();B&&this.BuildResult2(k)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return B}else if(e==2&&!n){var f=t[0],v=t[1];return this.Execute(f,v,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}else if(e==2&&n){var f=t[0],k=t[1];return this.Execute(f,k,r.PolyFillType.pftEvenOdd,r.PolyFillType.pftEvenOdd)}},r.Clipper.prototype.FixHoleLinkage=function(t){if(!(t.FirstLeft===null||t.IsHole!=t.FirstLeft.IsHole&&t.FirstLeft.Pts!==null)){for(var e=t.FirstLeft;e!==null&&(e.IsHole==t.IsHole||e.Pts===null);)e=e.FirstLeft;t.FirstLeft=e}},r.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),this.m_CurrentLM===null)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),r.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),this.m_Scanbeam===null)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(this.m_Scanbeam!==null||this.m_CurrentLM!==null);for(var n=0,f=this.m_PolyOuts.length;n<f;n++){var v=this.m_PolyOuts[n];v.Pts===null||v.IsOpen||(v.IsHole^this.ReverseSolution)==this.Area(v)>0&&this.ReversePolyPtLinks(v.Pts)}this.JoinCommonEdges();for(var n=0,f=this.m_PolyOuts.length;n<f;n++){var v=this.m_PolyOuts[n];v.Pts!==null&&!v.IsOpen&&this.FixupOutPolygon(v)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{r.Clear(this.m_Joins),r.Clear(this.m_GhostJoins)}},r.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam=this.m_Scanbeam.Next,t},r.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);r.Clear(this.m_PolyOuts)},r.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},r.Clipper.prototype.AddJoin=function(t,e,n){var f=new r.Join;f.OutPt1=t,f.OutPt2=e,f.OffPt.X=n.X,f.OffPt.Y=n.Y,r.use_xyz&&(f.OffPt.Z=n.Z),this.m_Joins.push(f)},r.Clipper.prototype.AddGhostJoin=function(t,e){var n=new r.Join;n.OutPt1=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,r.use_xyz&&(n.OffPt.Z=e.Z),this.m_GhostJoins.push(n)},r.Clipper.prototype.SetZ=function(t,e,n){if(this.ZFillFunction!==null){if(t.Z!=0||this.ZFillFunction===null)return;r.IntPoint.op_Equality(t,e.Bot)?t.Z=e.Bot.Z:r.IntPoint.op_Equality(t,e.Top)?t.Z=e.Top.Z:r.IntPoint.op_Equality(t,n.Bot)?t.Z=n.Bot.Z:r.IntPoint.op_Equality(t,n.Top)?t.Z=n.Top.Z:this.ZFillFunction(e.Bot,e.Top,n.Bot,n.Top,t)}},r.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;this.m_CurrentLM!==null&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var f=null;if(e===null?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(f=this.AddOutPt(n,n.Bot))):n==null?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(f=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(f=this.AddLocalMinPoly(e,n,e.Bot)),this.InsertScanbeam(e.Top.Y)),n!=null&&(r.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),!(e==null||n==null)){if(f!==null&&r.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&n.WindDelta!==0)for(var v=0,L=this.m_GhostJoins.length;v<L;v++){var E=this.m_GhostJoins[v];this.HorzSegmentsOverlap(E.OutPt1.Pt.X,E.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(E.OutPt1,f,E.OffPt)}if(e.OutIdx>=0&&e.PrevInAEL!==null&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&e.WindDelta!==0&&e.PrevInAEL.WindDelta!==0){var B=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(f,B,e.Top)}if(e.NextInAEL!=n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&r.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&n.WindDelta!==0&&n.PrevInAEL.WindDelta!==0){var B=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(f,B,n.Top)}var k=e.NextInAEL;if(k!==null)for(;k!=n;)this.IntersectEdges(n,k,e.Curr,!1),k=k.NextInAEL}}}},r.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(this.m_ActiveEdges===null)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(e===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(e===null&&(e=this.m_ActiveEdges);e.NextInAEL!==null&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},r.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<r.Clipper.TopX(t,e.Top.Y):t.Top.X>r.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},r.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==r.PolyType.ptSubject?this.m_SubjFillType==r.PolyFillType.pftEvenOdd:this.m_ClipFillType==r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==r.PolyType.ptSubject?this.m_ClipFillType==r.PolyFillType.pftEvenOdd:this.m_SubjFillType==r.PolyFillType.pftEvenOdd},r.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.PolyTyp==r.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case r.PolyFillType.pftEvenOdd:if(t.WindDelta===0&&t.WindCnt!=1)return!1;break;case r.PolyFillType.pftNonZero:if(Math.abs(t.WindCnt)!=1)return!1;break;case r.PolyFillType.pftPositive:if(t.WindCnt!=1)return!1;break;default:if(t.WindCnt!=-1)return!1;break}switch(this.m_ClipType){case r.ClipType.ctIntersection:switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return t.WindCnt2!==0;case r.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case r.ClipType.ctUnion:switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return t.WindCnt2===0;case r.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case r.ClipType.ctDifference:if(t.PolyTyp==r.PolyType.ptSubject)switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return t.WindCnt2===0;case r.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return t.WindCnt2!==0;case r.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case r.ClipType.ctXor:if(t.WindDelta===0)switch(n){case r.PolyFillType.pftEvenOdd:case r.PolyFillType.pftNonZero:return t.WindCnt2===0;case r.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else return!0}return!0},r.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;e!==null&&(e.PolyTyp!=t.PolyTyp||e.WindDelta===0);)e=e.PrevInAEL;if(e===null)t.WindCnt=t.WindDelta===0?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(t.WindDelta===0&&this.m_ClipType!=r.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(t.WindDelta===0){for(var n=!0,f=e.PrevInAEL;f!==null;)f.PolyTyp==e.PolyTyp&&f.WindDelta!==0&&(n=!n),f=f.PrevInAEL;t.WindCnt=n?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=t.WindDelta===0?1:t.WindDelta:t.WindDelta===0?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)e.WindDelta!==0&&(t.WindCnt2=t.WindCnt2===0?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},r.Clipper.prototype.AddEdgeToSEL=function(t){this.m_SortedEdges===null?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},r.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;t!==null;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},r.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(!(t.NextInAEL==t.PrevInAEL||e.NextInAEL==e.PrevInAEL)){if(t.NextInAEL==e){var n=e.NextInAEL;n!==null&&(n.PrevInAEL=t);var f=t.PrevInAEL;f!==null&&(f.NextInAEL=e),e.PrevInAEL=f,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n}else if(e.NextInAEL==t){var n=t.NextInAEL;n!==null&&(n.PrevInAEL=e);var f=e.PrevInAEL;f!==null&&(f.NextInAEL=t),t.PrevInAEL=f,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n}else{var n=t.NextInAEL,f=t.PrevInAEL;t.NextInAEL=e.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=n,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=f,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e)}t.PrevInAEL===null?this.m_ActiveEdges=t:e.PrevInAEL===null&&(this.m_ActiveEdges=e)}},r.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(t.NextInSEL===null&&t.PrevInSEL===null)&&!(e.NextInSEL===null&&e.PrevInSEL===null)){if(t.NextInSEL==e){var n=e.NextInSEL;n!==null&&(n.PrevInSEL=t);var f=t.PrevInSEL;f!==null&&(f.NextInSEL=e),e.PrevInSEL=f,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n}else if(e.NextInSEL==t){var n=t.NextInSEL;n!==null&&(n.PrevInSEL=e);var f=e.PrevInSEL;f!==null&&(f.NextInSEL=t),t.PrevInSEL=f,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n}else{var n=t.NextInSEL,f=t.PrevInSEL;t.NextInSEL=e.NextInSEL,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=f,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e)}t.PrevInSEL===null?this.m_SortedEdges=t:e.PrevInSEL===null&&(this.m_SortedEdges=e)}},r.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),e.WindDelta==0&&this.AddOutPt(e,n),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},r.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var f,v,L;if(r.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(f=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,t.Side=r.EdgeSide.esLeft,e.Side=r.EdgeSide.esRight,v=t,v.PrevInAEL==e?L=e.PrevInAEL:L=v.PrevInAEL):(f=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,t.Side=r.EdgeSide.esRight,e.Side=r.EdgeSide.esLeft,v=e,v.PrevInAEL==t?L=t.PrevInAEL:L=v.PrevInAEL),L!==null&&L.OutIdx>=0&&r.Clipper.TopX(L,n.Y)==r.Clipper.TopX(v,n.Y)&&r.ClipperBase.SlopesEqual(v,L,this.m_UseFullRange)&&v.WindDelta!==0&&L.WindDelta!==0){var E=this.AddOutPt(L,n);this.AddJoin(f,E,v.Top)}return f},r.Clipper.prototype.CreateOutRec=function(){var t=new r.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},r.Clipper.prototype.AddOutPt=function(t,e){var n=t.Side==r.EdgeSide.esLeft;if(t.OutIdx<0){var f=this.CreateOutRec();f.IsOpen=t.WindDelta===0;var v=new r.OutPt;return f.Pts=v,v.Idx=f.Idx,v.Pt.X=e.X,v.Pt.Y=e.Y,r.use_xyz&&(v.Pt.Z=e.Z),v.Next=v,v.Prev=v,f.IsOpen||this.SetHoleState(t,f),t.OutIdx=f.Idx,v}else{var f=this.m_PolyOuts[t.OutIdx],L=f.Pts;if(n&&r.IntPoint.op_Equality(e,L.Pt))return L;if(!n&&r.IntPoint.op_Equality(e,L.Prev.Pt))return L.Prev;var v=new r.OutPt;return v.Idx=f.Idx,v.Pt.X=e.X,v.Pt.Y=e.Y,r.use_xyz&&(v.Pt.Z=e.Z),v.Next=L,v.Prev=L.Prev,v.Prev.Next=v,L.Prev=v,n&&(f.Pts=v),v}},r.Clipper.prototype.SwapPoints=function(t,e){var n=new r.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,r.use_xyz&&(t.Value.Z=e.Value.Z),e.Value.X=n.X,e.Value.Y=n.Y,r.use_xyz&&(e.Value.Z=n.Z)},r.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,f){var v;return t>e&&(v=t,t=e,e=v),n>f&&(v=n,n=f,f=v),t<f&&n<e},r.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,f=t.PrevInAEL;f!==null;)f.OutIdx>=0&&f.WindDelta!=0&&(n=!n,e.FirstLeft===null&&(e.FirstLeft=this.m_PolyOuts[f.OutIdx])),f=f.PrevInAEL;n&&(e.IsHole=!0)},r.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?r.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},r.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.Prev;r.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;var f=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;r.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;var v=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=e.Prev;r.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Prev;var L=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;r.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Next;var E=Math.abs(this.GetDx(e.Pt,n.Pt));return f>=L&&f>=E||v>=L&&v>=E},r.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.Next;n!=t;)n.Pt.Y>t.Pt.Y?(t=n,e=null):n.Pt.Y==t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(e=null,t=n):n.Next!=t&&n.Prev!=t&&(e=n)),n=n.Next;if(e!==null)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.Next;r.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},r.Clipper.prototype.GetLowermostRec=function(t,e){t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts)),e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,f=e.BottomPt;return n.Pt.Y>f.Pt.Y?t:n.Pt.Y<f.Pt.Y?e:n.Pt.X<f.Pt.X?t:n.Pt.X>f.Pt.X||n.Next==n?e:f.Next==f||this.FirstIsBottomPt(n,f)?t:e},r.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(t!==null);return!1},r.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},r.Clipper.prototype.AppendPolygon=function(t,e){var n=this.m_PolyOuts[t.OutIdx],f=this.m_PolyOuts[e.OutIdx],v;this.Param1RightOfParam2(n,f)?v=f:this.Param1RightOfParam2(f,n)?v=n:v=this.GetLowermostRec(n,f);var L=n.Pts,E=L.Prev,B=f.Pts,k=B.Prev,Z;t.Side==r.EdgeSide.esLeft?(e.Side==r.EdgeSide.esLeft?(this.ReversePolyPtLinks(B),B.Next=L,L.Prev=B,E.Next=k,k.Prev=E,n.Pts=k):(k.Next=L,L.Prev=k,B.Prev=E,E.Next=B,n.Pts=B),Z=r.EdgeSide.esLeft):(e.Side==r.EdgeSide.esRight?(this.ReversePolyPtLinks(B),E.Next=k,k.Prev=E,B.Next=L,L.Prev=B):(E.Next=B,B.Prev=E,L.Prev=k,k.Next=L),Z=r.EdgeSide.esRight),n.BottomPt=null,v==f&&(f.FirstLeft!=n&&(n.FirstLeft=f.FirstLeft),n.IsHole=f.IsHole),f.Pts=null,f.BottomPt=null,f.FirstLeft=n;var V=t.OutIdx,Q=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var et=this.m_ActiveEdges;et!==null;){if(et.OutIdx==Q){et.OutIdx=V,et.Side=Z;break}et=et.NextInAEL}f.Idx=n.Idx},r.Clipper.prototype.ReversePolyPtLinks=function(t){if(t!==null){var e,n;e=t;do n=e.Next,e.Next=e.Prev,e.Prev=n,e=n;while(e!=t)}},r.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},r.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},r.Clipper.prototype.IntersectEdges=function(t,e,n){var f=t.OutIdx>=0,v=e.OutIdx>=0;if(r.use_xyz&&this.SetZ(n,t,e),r.use_lines&&(t.WindDelta===0||e.WindDelta===0)){if(t.WindDelta==0&&e.WindDelta==0)return;t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==r.ClipType.ctUnion?t.WindDelta===0?v&&(this.AddOutPt(t,n),f&&(t.OutIdx=-1)):f&&(this.AddOutPt(e,n),v&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(t.WindDelta===0&&Math.abs(e.WindCnt)==1&&(this.m_ClipType!=r.ClipType.ctUnion||e.WindCnt2===0)?(this.AddOutPt(t,n),f&&(t.OutIdx=-1)):e.WindDelta===0&&Math.abs(t.WindCnt)==1&&(this.m_ClipType!=r.ClipType.ctUnion||t.WindCnt2===0)&&(this.AddOutPt(e,n),v&&(e.OutIdx=-1)));return}if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var L=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=L}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2-=t.WindDelta;var E,B,k,Z;t.PolyTyp==r.PolyType.ptSubject?(E=this.m_SubjFillType,k=this.m_ClipFillType):(E=this.m_ClipFillType,k=this.m_SubjFillType),e.PolyTyp==r.PolyType.ptSubject?(B=this.m_SubjFillType,Z=this.m_ClipFillType):(B=this.m_ClipFillType,Z=this.m_SubjFillType);var V,Q;switch(E){case r.PolyFillType.pftPositive:V=t.WindCnt;break;case r.PolyFillType.pftNegative:V=-t.WindCnt;break;default:V=Math.abs(t.WindCnt);break}switch(B){case r.PolyFillType.pftPositive:Q=e.WindCnt;break;case r.PolyFillType.pftNegative:Q=-e.WindCnt;break;default:Q=Math.abs(e.WindCnt);break}if(f&&v)V!=0&&V!=1||Q!=0&&Q!=1||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=r.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):(this.AddOutPt(t,n),this.AddOutPt(e,n),r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e));else if(f)(Q===0||Q==1)&&(this.AddOutPt(t,n),r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e));else if(v)(V===0||V==1)&&(this.AddOutPt(e,n),r.Clipper.SwapSides(t,e),r.Clipper.SwapPolyIndexes(t,e));else if((V==0||V==1)&&(Q==0||Q==1)){var et,lt;switch(k){case r.PolyFillType.pftPositive:et=t.WindCnt2;break;case r.PolyFillType.pftNegative:et=-t.WindCnt2;break;default:et=Math.abs(t.WindCnt2);break}switch(Z){case r.PolyFillType.pftPositive:lt=e.WindCnt2;break;case r.PolyFillType.pftNegative:lt=-e.WindCnt2;break;default:lt=Math.abs(e.WindCnt2);break}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,n);else if(V==1&&Q==1)switch(this.m_ClipType){case r.ClipType.ctIntersection:et>0&&lt>0&&this.AddLocalMinPoly(t,e,n);break;case r.ClipType.ctUnion:et<=0&&lt<=0&&this.AddLocalMinPoly(t,e,n);break;case r.ClipType.ctDifference:(t.PolyTyp==r.PolyType.ptClip&&et>0&&lt>0||t.PolyTyp==r.PolyType.ptSubject&&et<=0&&lt<=0)&&this.AddLocalMinPoly(t,e,n);break;case r.ClipType.ctXor:this.AddLocalMinPoly(t,e,n);break}else r.Clipper.SwapSides(t,e)}},r.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;e===null&&n===null&&t!=this.m_ActiveEdges||(e!==null?e.NextInAEL=n:this.m_ActiveEdges=n,n!==null&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},r.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;e===null&&n===null&&t!=this.m_SortedEdges||(e!==null?e.NextInSEL=n:this.m_SortedEdges=n,n!==null&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},r.Clipper.prototype.UpdateEdgeIntoAEL=function(t){t.NextInLML===null&&r.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,e!==null?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,n!==null&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,r.use_xyz&&(t.Curr.Z=t.Bot.Z),t.PrevInAEL=e,t.NextInAEL=n,r.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},r.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;e!==null;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},r.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=r.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=r.Direction.dRightToLeft)},r.Clipper.prototype.ProcessHorizontal=function(t,e){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,n);for(var f=n.Dir,v=n.Left,L=n.Right,E=t,B=null;E.NextInLML!==null&&r.ClipperBase.IsHorizontal(E.NextInLML);)E=E.NextInLML;for(E.NextInLML===null&&(B=this.GetMaximaPair(E));;){for(var k=t==E,Z=this.GetNextInAEL(t,f);Z!==null&&!(Z.Curr.X==t.Top.X&&t.NextInLML!==null&&Z.Dx<t.NextInLML.Dx);){var V=this.GetNextInAEL(Z,f);if(f==r.Direction.dLeftToRight&&Z.Curr.X<=L||f==r.Direction.dRightToLeft&&Z.Curr.X>=v){if(Z==B&&k){if(t.OutIdx>=0){for(var Q=this.AddOutPt(t,t.Top),et=this.m_SortedEdges;et!==null;){if(et.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,et.Bot.X,et.Top.X)){var lt=this.AddOutPt(et,et.Bot);this.AddJoin(lt,Q,et.Top)}et=et.NextInSEL}this.AddGhostJoin(Q,t.Bot),this.AddLocalMaxPoly(t,B,t.Top)}this.DeleteFromAEL(t),this.DeleteFromAEL(B);return}else if(f==r.Direction.dLeftToRight){var ft=new r.IntPoint(Z.Curr.X,t.Curr.Y);this.IntersectEdges(t,Z,ft)}else{var ft=new r.IntPoint(Z.Curr.X,t.Curr.Y);this.IntersectEdges(Z,t,ft)}this.SwapPositionsInAEL(t,Z)}else if(f==r.Direction.dLeftToRight&&Z.Curr.X>=L||f==r.Direction.dRightToLeft&&Z.Curr.X<=v)break;Z=V}if(t.NextInLML!==null&&r.ClipperBase.IsHorizontal(t.NextInLML)){t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot);var n={Dir:f,Left:v,Right:L};this.GetHorzDirection(t,n),f=n.Dir,v=n.Left,L=n.Right}else break}if(t.NextInLML!==null)if(t.OutIdx>=0){var Q=this.AddOutPt(t,t.Top);if(e&&this.AddGhostJoin(Q,t.Bot),t=this.UpdateEdgeIntoAEL(t),t.WindDelta===0)return;var pt=t.PrevInAEL,V=t.NextInAEL;if(pt!==null&&pt.Curr.X==t.Bot.X&&pt.Curr.Y==t.Bot.Y&&pt.WindDelta!==0&&pt.OutIdx>=0&&pt.Curr.Y>pt.Top.Y&&r.ClipperBase.SlopesEqual(t,pt,this.m_UseFullRange)){var lt=this.AddOutPt(pt,t.Bot);this.AddJoin(Q,lt,t.Top)}else if(V!==null&&V.Curr.X==t.Bot.X&&V.Curr.Y==t.Bot.Y&&V.WindDelta!==0&&V.OutIdx>=0&&V.Curr.Y>V.Top.Y&&r.ClipperBase.SlopesEqual(t,V,this.m_UseFullRange)){var lt=this.AddOutPt(V,t.Bot);this.AddJoin(Q,lt,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},r.Clipper.prototype.GetNextInAEL=function(t,e){return e==r.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},r.Clipper.prototype.IsMinima=function(t){return t!==null&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},r.Clipper.prototype.IsMaxima=function(t,e){return t!==null&&t.Top.Y==e&&t.NextInLML===null},r.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&t.NextInLML!==null},r.Clipper.prototype.GetMaximaPair=function(t){var e=null;return r.IntPoint.op_Equality(t.Next.Top,t.Top)&&t.Next.NextInLML===null?e=t.Next:r.IntPoint.op_Equality(t.Prev.Top,t.Top)&&t.Prev.NextInLML===null&&(e=t.Prev),e!==null&&(e.OutIdx==-2||e.NextInAEL==e.PrevInAEL&&!r.ClipperBase.IsHorizontal(e))?null:e},r.Clipper.prototype.ProcessIntersections=function(t){if(this.m_ActiveEdges==null)return!0;try{if(this.BuildIntersectList(t),this.m_IntersectList.length==0)return!0;if(this.m_IntersectList.length==1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,r.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},r.Clipper.prototype.BuildIntersectList=function(t){if(this.m_ActiveEdges!==null){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=r.Clipper.TopX(e,t),e=e.NextInAEL;for(var n=!0;n&&this.m_SortedEdges!==null;){for(n=!1,e=this.m_SortedEdges;e.NextInSEL!==null;){var f=e.NextInSEL,v=new r.IntPoint;if(e.Curr.X>f.Curr.X){this.IntersectPoint(e,f,v);var L=new r.IntersectNode;L.Edge1=e,L.Edge2=f,L.Pt.X=v.X,L.Pt.Y=v.Y,r.use_xyz&&(L.Pt.Z=v.Z),this.m_IntersectList.push(L),this.SwapPositionsInSEL(e,f),n=!0}else e=f}if(e.PrevInSEL!==null)e.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},r.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},r.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},r.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;n<t&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==t)return!1;var f=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=f}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},r.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0};var An=function(t){return t<0?Math.ceil(t-.5):Math.round(t)},On=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},En=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)},Mn=function(t){return t<0?(t-=.5,t<-2147483648?Math.ceil(t):t|0):(t+=.5,t>2147483647?Math.floor(t):t|0)};o.msie?r.Clipper.Round=An:o.chromium?r.Clipper.Round=En:o.safari?r.Clipper.Round=Mn:r.Clipper.Round=On,r.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+r.Clipper.Round(t.Dx*(e-t.Bot.Y))},r.Clipper.prototype.IntersectPoint=function(t,e,n){n.X=0,n.Y=0;var f,v;if(t.Dx==e.Dx){n.Y=t.Curr.Y,n.X=r.Clipper.TopX(t,n.Y);return}if(t.Delta.X===0)n.X=t.Bot.X,r.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(v=e.Bot.Y-e.Bot.X/e.Dx,n.Y=r.Clipper.Round(n.X/e.Dx+v));else if(e.Delta.X===0)n.X=e.Bot.X,r.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(f=t.Bot.Y-t.Bot.X/t.Dx,n.Y=r.Clipper.Round(n.X/t.Dx+f));else{f=t.Bot.X-t.Bot.Y*t.Dx,v=e.Bot.X-e.Bot.Y*e.Dx;var L=(v-f)/(t.Dx-e.Dx);n.Y=r.Clipper.Round(L),Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=r.Clipper.Round(t.Dx*L+f):n.X=r.Clipper.Round(e.Dx*L+v)}if(n.Y<t.Top.Y||n.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return n.Y=t.Top.Y,n.X=r.Clipper.TopX(e,t.Top.Y),n.X<t.Top.X;n.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?n.X=r.Clipper.TopX(t,n.Y):n.X=r.Clipper.TopX(e,n.Y)}n.Y>t.Curr.Y&&(n.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(e.Dx)?n.X=r.Clipper.TopX(e,n.Y):n.X=r.Clipper.TopX(t,n.Y))},r.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;e!==null;){var n=this.IsMaxima(e,t);if(n){var f=this.GetMaximaPair(e);n=f===null||!r.ClipperBase.IsHorizontal(f)}if(n){var v=e.PrevInAEL;this.DoMaxima(e),v===null?e=this.m_ActiveEdges:e=v.NextInAEL}else{if(this.IsIntermediate(e,t)&&r.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=r.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){var v=e.PrevInAEL;if(e.OutIdx>=0&&e.WindDelta!==0&&v!==null&&v.OutIdx>=0&&v.Curr.X==e.Curr.X&&v.WindDelta!==0){var L=new r.IntPoint(e.Curr);r.use_xyz&&this.SetZ(L,v,e);var E=this.AddOutPt(v,L),B=this.AddOutPt(e,L);this.AddJoin(E,B,L)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;e!==null;){if(this.IsIntermediate(e,t)){var E=null;e.OutIdx>=0&&(E=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var v=e.PrevInAEL,k=e.NextInAEL;if(v!==null&&v.Curr.X==e.Bot.X&&v.Curr.Y==e.Bot.Y&&E!==null&&v.OutIdx>=0&&v.Curr.Y>v.Top.Y&&r.ClipperBase.SlopesEqual(e,v,this.m_UseFullRange)&&e.WindDelta!==0&&v.WindDelta!==0){var B=this.AddOutPt(v,e.Bot);this.AddJoin(E,B,e.Top)}else if(k!==null&&k.Curr.X==e.Bot.X&&k.Curr.Y==e.Bot.Y&&E!==null&&k.OutIdx>=0&&k.Curr.Y>k.Top.Y&&r.ClipperBase.SlopesEqual(e,k,this.m_UseFullRange)&&e.WindDelta!==0&&k.WindDelta!==0){var B=this.AddOutPt(k,e.Bot);this.AddJoin(E,B,e.Top)}}e=e.NextInAEL}},r.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(e===null){t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t);return}for(var n=t.NextInAEL;n!==null&&n!=e;)this.IntersectEdges(t,n,t.Top),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;t.OutIdx==-1&&e.OutIdx==-1?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):r.use_lines&&t.WindDelta===0?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):r.Error("DoMaxima error")},r.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;e<n;e++)t[e].reverse()},r.Clipper.Orientation=function(t){return r.Clipper.Area(t)>=0},r.Clipper.prototype.PointCount=function(t){if(t===null)return 0;var e=0,n=t;do e++,n=n.Next;while(n!=t);return e},r.Clipper.prototype.BuildResult=function(t){r.Clear(t);for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var f=this.m_PolyOuts[e];if(f.Pts!==null){var v=f.Pts.Prev,L=this.PointCount(v);if(!(L<2)){for(var E=new Array(L),B=0;B<L;B++)E[B]=v.Pt,v=v.Prev;t.push(E)}}}},r.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var f=this.m_PolyOuts[e],v=this.PointCount(f.Pts);if(!(f.IsOpen&&v<2||!f.IsOpen&&v<3)){this.FixHoleLinkage(f);var L=new r.PolyNode;t.m_AllPolys.push(L),f.PolyNode=L,L.m_polygon.length=v;for(var E=f.Pts.Prev,B=0;B<v;B++)L.m_polygon[B]=E.Pt,E=E.Prev}}for(var e=0,n=this.m_PolyOuts.length;e<n;e++){var f=this.m_PolyOuts[e];f.PolyNode!==null&&(f.IsOpen?(f.PolyNode.IsOpen=!0,t.AddChild(f.PolyNode)):f.FirstLeft!==null&&f.FirstLeft.PolyNode!=null?f.FirstLeft.PolyNode.AddChild(f.PolyNode):t.AddChild(f.PolyNode))}},r.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var n=t.Pts;;){if(n.Prev==n||n.Prev==n.Next){t.Pts=null;return}if(r.IntPoint.op_Equality(n.Pt,n.Next.Pt)||r.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||r.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))e=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n==e)break;e===null&&(e=n),n=n.Next}}t.Pts=n},r.Clipper.prototype.DupOutPt=function(t,e){var n=new r.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,r.use_xyz&&(n.Pt.Z=t.Pt.Z),n.Idx=t.Idx,e?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},r.Clipper.prototype.GetOverlap=function(t,e,n,f,v){return t<e?n<f?(v.Left=Math.max(t,n),v.Right=Math.min(e,f)):(v.Left=Math.max(t,f),v.Right=Math.min(e,n)):n<f?(v.Left=Math.max(e,n),v.Right=Math.min(t,f)):(v.Left=Math.max(e,f),v.Right=Math.min(t,n)),v.Left<v.Right},r.Clipper.prototype.JoinHorz=function(t,e,n,f,v,L){var E=t.Pt.X>e.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight,B=n.Pt.X>f.Pt.X?r.Direction.dRightToLeft:r.Direction.dLeftToRight;if(E==B)return!1;if(E==r.Direction.dLeftToRight){for(;t.Next.Pt.X<=v.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==v.Y;)t=t.Next;L&&t.Pt.X!=v.X&&(t=t.Next),e=this.DupOutPt(t,!L),r.IntPoint.op_Inequality(e.Pt,v)&&(t=e,t.Pt.X=v.X,t.Pt.Y=v.Y,r.use_xyz&&(t.Pt.Z=v.Z),e=this.DupOutPt(t,!L))}else{for(;t.Next.Pt.X>=v.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==v.Y;)t=t.Next;!L&&t.Pt.X!=v.X&&(t=t.Next),e=this.DupOutPt(t,L),r.IntPoint.op_Inequality(e.Pt,v)&&(t=e,t.Pt.X=v.X,t.Pt.Y=v.Y,r.use_xyz&&(t.Pt.Z=v.Z),e=this.DupOutPt(t,L))}if(B==r.Direction.dLeftToRight){for(;n.Next.Pt.X<=v.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==v.Y;)n=n.Next;L&&n.Pt.X!=v.X&&(n=n.Next),f=this.DupOutPt(n,!L),r.IntPoint.op_Inequality(f.Pt,v)&&(n=f,n.Pt.X=v.X,n.Pt.Y=v.Y,r.use_xyz&&(n.Pt.Z=v.Z),f=this.DupOutPt(n,!L))}else{for(;n.Next.Pt.X>=v.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==v.Y;)n=n.Next;!L&&n.Pt.X!=v.X&&(n=n.Next),f=this.DupOutPt(n,L),r.IntPoint.op_Inequality(f.Pt,v)&&(n=f,n.Pt.X=v.X,n.Pt.Y=v.Y,r.use_xyz&&(n.Pt.Z=v.Z),f=this.DupOutPt(n,L))}return E==r.Direction.dLeftToRight==L?(t.Prev=n,n.Next=t,e.Next=f,f.Prev=e):(t.Next=n,n.Prev=t,e.Prev=f,f.Next=e),!0},r.Clipper.prototype.JoinPoints=function(t,e,n){var f=t.OutPt1,v=new r.OutPt,L=t.OutPt2,E=new r.OutPt,B=t.OutPt1.Pt.Y==t.OffPt.Y;if(B&&r.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&r.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!=n)return!1;for(v=t.OutPt1.Next;v!=f&&r.IntPoint.op_Equality(v.Pt,t.OffPt);)v=v.Next;var k=v.Pt.Y>t.OffPt.Y;for(E=t.OutPt2.Next;E!=L&&r.IntPoint.op_Equality(E.Pt,t.OffPt);)E=E.Next;var Z=E.Pt.Y>t.OffPt.Y;return k==Z?!1:k?(v=this.DupOutPt(f,!1),E=this.DupOutPt(L,!0),f.Prev=L,L.Next=f,v.Next=E,E.Prev=v,t.OutPt1=f,t.OutPt2=v,!0):(v=this.DupOutPt(f,!0),E=this.DupOutPt(L,!1),f.Next=L,L.Prev=f,v.Prev=E,E.Next=v,t.OutPt1=f,t.OutPt2=v,!0)}else if(B){for(v=f;f.Prev.Pt.Y==f.Pt.Y&&f.Prev!=v&&f.Prev!=L;)f=f.Prev;for(;v.Next.Pt.Y==v.Pt.Y&&v.Next!=f&&v.Next!=L;)v=v.Next;if(v.Next==f||v.Next==L)return!1;for(E=L;L.Prev.Pt.Y==L.Pt.Y&&L.Prev!=E&&L.Prev!=v;)L=L.Prev;for(;E.Next.Pt.Y==E.Pt.Y&&E.Next!=L&&E.Next!=f;)E=E.Next;if(E.Next==L||E.Next==f)return!1;var V={Left:null,Right:null};if(!this.GetOverlap(f.Pt.X,v.Pt.X,L.Pt.X,E.Pt.X,V))return!1;var Q=V.Left,et=V.Right,lt=new r.IntPoint,ft;return f.Pt.X>=Q&&f.Pt.X<=et?(lt.X=f.Pt.X,lt.Y=f.Pt.Y,r.use_xyz&&(lt.Z=f.Pt.Z),ft=f.Pt.X>v.Pt.X):L.Pt.X>=Q&&L.Pt.X<=et?(lt.X=L.Pt.X,lt.Y=L.Pt.Y,r.use_xyz&&(lt.Z=L.Pt.Z),ft=L.Pt.X>E.Pt.X):v.Pt.X>=Q&&v.Pt.X<=et?(lt.X=v.Pt.X,lt.Y=v.Pt.Y,r.use_xyz&&(lt.Z=v.Pt.Z),ft=v.Pt.X>f.Pt.X):(lt.X=E.Pt.X,lt.Y=E.Pt.Y,r.use_xyz&&(lt.Z=E.Pt.Z),ft=E.Pt.X>L.Pt.X),t.OutPt1=f,t.OutPt2=L,this.JoinHorz(f,v,L,E,lt,ft)}else{for(v=f.Next;r.IntPoint.op_Equality(v.Pt,f.Pt)&&v!=f;)v=v.Next;var pt=v.Pt.Y>f.Pt.Y||!r.ClipperBase.SlopesEqual(f.Pt,v.Pt,t.OffPt,this.m_UseFullRange);if(pt){for(v=f.Prev;r.IntPoint.op_Equality(v.Pt,f.Pt)&&v!=f;)v=v.Prev;if(v.Pt.Y>f.Pt.Y||!r.ClipperBase.SlopesEqual(f.Pt,v.Pt,t.OffPt,this.m_UseFullRange))return!1}for(E=L.Next;r.IntPoint.op_Equality(E.Pt,L.Pt)&&E!=L;)E=E.Next;var Et=E.Pt.Y>L.Pt.Y||!r.ClipperBase.SlopesEqual(L.Pt,E.Pt,t.OffPt,this.m_UseFullRange);if(Et){for(E=L.Prev;r.IntPoint.op_Equality(E.Pt,L.Pt)&&E!=L;)E=E.Prev;if(E.Pt.Y>L.Pt.Y||!r.ClipperBase.SlopesEqual(L.Pt,E.Pt,t.OffPt,this.m_UseFullRange))return!1}return v==f||E==L||v==E||e==n&&pt==Et?!1:pt?(v=this.DupOutPt(f,!1),E=this.DupOutPt(L,!0),f.Prev=L,L.Next=f,v.Next=E,E.Prev=v,t.OutPt1=f,t.OutPt2=v,!0):(v=this.DupOutPt(f,!0),E=this.DupOutPt(L,!1),f.Next=L,L.Prev=f,v.Prev=E,E.Next=v,t.OutPt1=f,t.OutPt2=v,!0)}},r.Clipper.GetBounds=function(t){for(var e=0,n=t.length;e<n&&t[e].length==0;)e++;if(e==n)return new r.IntRect(0,0,0,0);var f=new r.IntRect;for(f.left=t[e][0].X,f.right=f.left,f.top=t[e][0].Y,f.bottom=f.top;e<n;e++)for(var v=0,L=t[e].length;v<L;v++)t[e][v].X<f.left?f.left=t[e][v].X:t[e][v].X>f.right&&(f.right=t[e][v].X),t[e][v].Y<f.top?f.top=t[e][v].Y:t[e][v].Y>f.bottom&&(f.bottom=t[e][v].Y);return f},r.Clipper.prototype.GetBounds2=function(t){var e=t,n=new r.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},r.Clipper.PointInPolygon=function(t,e){var n=0,f=e.length;if(f<3)return 0;for(var v=e[0],L=1;L<=f;++L){var E=L==f?e[0]:e[L];if(E.Y==t.Y&&(E.X==t.X||v.Y==t.Y&&E.X>t.X==v.X<t.X))return-1;if(v.Y<t.Y!=E.Y<t.Y){if(v.X>=t.X)if(E.X>t.X)n=1-n;else{var B=(v.X-t.X)*(E.Y-t.Y)-(E.X-t.X)*(v.Y-t.Y);if(B==0)return-1;B>0==E.Y>v.Y&&(n=1-n)}else if(E.X>t.X){var B=(v.X-t.X)*(E.Y-t.Y)-(E.X-t.X)*(v.Y-t.Y);if(B==0)return-1;B>0==E.Y>v.Y&&(n=1-n)}}v=E}return n},r.Clipper.prototype.PointInPolygon=function(t,e){var n=0,f=e,v=t.X,L=t.Y,E=e.Pt.X,B=e.Pt.Y;do{e=e.Next;var k=e.Pt.X,Z=e.Pt.Y;if(Z==L&&(k==v||B==L&&k>v==E<v))return-1;if(B<L!=Z<L){if(E>=v)if(k>v)n=1-n;else{var V=(E-v)*(Z-L)-(k-v)*(B-L);if(V==0)return-1;V>0==Z>B&&(n=1-n)}else if(k>v){var V=(E-v)*(Z-L)-(k-v)*(B-L);if(V==0)return-1;V>0==Z>B&&(n=1-n)}}E=k,B=Z}while(f!=e);return n},r.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var f=this.PointInPolygon(n.Pt,e);if(f>=0)return f>0;n=n.Next}while(n!=t);return!0},r.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n=0,f=this.m_PolyOuts.length;n<f;n++){var v=this.m_PolyOuts[n];if(!(v.Pts==null||v.FirstLeft==null)){var L=this.ParseFirstLeft(v.FirstLeft);L==t&&this.Poly2ContainsPoly1(v.Pts,e.Pts)&&(v.FirstLeft=e)}}},r.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n=0,f=this.m_PolyOuts,v=f.length,L=f[n];n<v;n++,L=f[n])L.FirstLeft==t&&(L.FirstLeft=e)},r.Clipper.ParseFirstLeft=function(t){for(;t!=null&&t.Pts==null;)t=t.FirstLeft;return t},r.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var n=this.m_Joins[t],f=this.GetOutRec(n.OutPt1.Idx),v=this.GetOutRec(n.OutPt2.Idx);if(!(f.Pts==null||v.Pts==null)){var L;if(f==v?L=f:this.Param1RightOfParam2(f,v)?L=v:this.Param1RightOfParam2(v,f)?L=f:L=this.GetLowermostRec(f,v),!!this.JoinPoints(n,f,v))if(f==v){if(f.Pts=n.OutPt1,f.BottomPt=null,v=this.CreateOutRec(),v.Pts=n.OutPt2,this.UpdateOutPtIdxs(v),this.m_UsingPolyTree)for(var E=0,B=this.m_PolyOuts.length;E<B-1;E++){var k=this.m_PolyOuts[E];k.Pts==null||r.Clipper.ParseFirstLeft(k.FirstLeft)!=f||k.IsHole==f.IsHole||this.Poly2ContainsPoly1(k.Pts,n.OutPt2)&&(k.FirstLeft=v)}this.Poly2ContainsPoly1(v.Pts,f.Pts)?(v.IsHole=!f.IsHole,v.FirstLeft=f,this.m_UsingPolyTree&&this.FixupFirstLefts2(v,f),(v.IsHole^this.ReverseSolution)==this.Area(v)>0&&this.ReversePolyPtLinks(v.Pts)):this.Poly2ContainsPoly1(f.Pts,v.Pts)?(v.IsHole=f.IsHole,f.IsHole=!v.IsHole,v.FirstLeft=f.FirstLeft,f.FirstLeft=v,this.m_UsingPolyTree&&this.FixupFirstLefts2(f,v),(f.IsHole^this.ReverseSolution)==this.Area(f)>0&&this.ReversePolyPtLinks(f.Pts)):(v.IsHole=f.IsHole,v.FirstLeft=f.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(f,v))}else v.Pts=null,v.BottomPt=null,v.Idx=f.Idx,f.IsHole=L.IsHole,L==v&&(f.FirstLeft=v.FirstLeft),v.FirstLeft=f,this.m_UsingPolyTree&&this.FixupFirstLefts2(v,f)}}},r.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},r.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],n=e.Pts;if(!(n==null||e.IsOpen))do{for(var f=n.Next;f!=e.Pts;){if(r.IntPoint.op_Equality(n.Pt,f.Pt)&&f.Next!=n&&f.Prev!=n){var v=n.Prev,L=f.Prev;n.Prev=L,L.Next=n,f.Prev=v,v.Next=f,e.Pts=n;var E=this.CreateOutRec();E.Pts=f,this.UpdateOutPtIdxs(E),this.Poly2ContainsPoly1(E.Pts,e.Pts)?(E.IsHole=!e.IsHole,E.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(E,e)):this.Poly2ContainsPoly1(e.Pts,E.Pts)?(E.IsHole=e.IsHole,e.IsHole=!E.IsHole,E.FirstLeft=e.FirstLeft,e.FirstLeft=E,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,E)):(E.IsHole=e.IsHole,E.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,E)),f=n}f=f.Next}n=n.Next}while(n!=e.Pts)}},r.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var n=0,f=0,v=e-1;f<e;++f)n+=(t[v].X+t[f].X)*(t[v].Y-t[f].Y),v=f;return-n*.5},r.Clipper.prototype.Area=function(t){var e=t.Pts;if(e==null)return 0;var n=0;do n=n+(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return n*.5},r.Clipper.SimplifyPolygon=function(t,e){var n=new Array,f=new r.Clipper(0);return f.StrictlySimple=!0,f.AddPath(t,r.PolyType.ptSubject,!0),f.Execute(r.ClipType.ctUnion,n,e,e),n},r.Clipper.SimplifyPolygons=function(t,e){typeof e>"u"&&(e=r.PolyFillType.pftEvenOdd);var n=new Array,f=new r.Clipper(0);return f.StrictlySimple=!0,f.AddPaths(t,r.PolyType.ptSubject,!0),f.Execute(r.ClipType.ctUnion,n,e,e),n},r.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,f=t.Y-e.Y;return n*n+f*f},r.Clipper.DistanceFromLineSqrd=function(t,e,n){var f=e.Y-n.Y,v=n.X-e.X,L=f*e.X+v*e.Y;return L=f*t.X+v*t.Y-L,L*L/(f*f+v*v)},r.Clipper.SlopesNearCollinear=function(t,e,n,f){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<n.X?r.Clipper.DistanceFromLineSqrd(t,e,n)<f:e.X>t.X==e.X<n.X?r.Clipper.DistanceFromLineSqrd(e,t,n)<f:r.Clipper.DistanceFromLineSqrd(n,t,e)<f:t.Y>e.Y==t.Y<n.Y?r.Clipper.DistanceFromLineSqrd(t,e,n)<f:e.Y>t.Y==e.Y<n.Y?r.Clipper.DistanceFromLineSqrd(e,t,n)<f:r.Clipper.DistanceFromLineSqrd(n,t,e)<f},r.Clipper.PointsAreClose=function(t,e,n){var f=t.X-e.X,v=t.Y-e.Y;return f*f+v*v<=n},r.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},r.Clipper.CleanPolygon=function(t,e){typeof e>"u"&&(e=1.415);var n=t.length;if(n==0)return new Array;for(var f=new Array(n),v=0;v<n;++v)f[v]=new r.OutPt;for(var v=0;v<n;++v)f[v].Pt=t[v],f[v].Next=f[(v+1)%n],f[v].Next.Prev=f[v],f[v].Idx=0;for(var L=e*e,E=f[0];E.Idx==0&&E.Next!=E.Prev;)r.Clipper.PointsAreClose(E.Pt,E.Prev.Pt,L)?(E=r.Clipper.ExcludeOp(E),n--):r.Clipper.PointsAreClose(E.Prev.Pt,E.Next.Pt,L)?(r.Clipper.ExcludeOp(E.Next),E=r.Clipper.ExcludeOp(E),n-=2):r.Clipper.SlopesNearCollinear(E.Prev.Pt,E.Pt,E.Next.Pt,L)?(E=r.Clipper.ExcludeOp(E),n--):(E.Idx=1,E=E.Next);n<3&&(n=0);for(var B=new Array(n),v=0;v<n;++v)B[v]=new r.IntPoint(E.Pt),E=E.Next;return f=null,B},r.Clipper.CleanPolygons=function(t,e){for(var n=new Array(t.length),f=0,v=t.length;f<v;f++)n[f]=r.Clipper.CleanPolygon(t[f],e);return n},r.Clipper.Minkowski=function(t,e,n,f){var v=f?1:0,L=t.length,E=e.length,B=new Array;if(n)for(var k=0;k<E;k++){for(var Z=new Array(L),V=0,Q=t.length,et=t[V];V<Q;V++,et=t[V])Z[V]=new r.IntPoint(e[k].X+et.X,e[k].Y+et.Y);B.push(Z)}else for(var k=0;k<E;k++){for(var Z=new Array(L),V=0,Q=t.length,et=t[V];V<Q;V++,et=t[V])Z[V]=new r.IntPoint(e[k].X-et.X,e[k].Y-et.Y);B.push(Z)}for(var lt=new Array,k=0;k<E-1+v;k++)for(var V=0;V<L;V++){var ft=new Array;ft.push(B[k%E][V%L]),ft.push(B[(k+1)%E][V%L]),ft.push(B[(k+1)%E][(V+1)%L]),ft.push(B[k%E][(V+1)%L]),r.Clipper.Orientation(ft)||ft.reverse(),lt.push(ft)}return lt},r.Clipper.MinkowskiSum=function(t,e,n){if(e[0]instanceof Array){for(var v=e,E=new r.Paths,L=new r.Clipper,B=0;B<v.length;++B){var k=r.Clipper.Minkowski(t,v[B],!0,n);if(L.AddPaths(k,r.PolyType.ptSubject,!0),n){var f=r.Clipper.TranslatePath(v[B],t[0]);L.AddPath(f,r.PolyType.ptClip,!0)}}return L.Execute(r.ClipType.ctUnion,E,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),E}else{var f=e,v=r.Clipper.Minkowski(t,f,!0,n),L=new r.Clipper;return L.AddPaths(v,r.PolyType.ptSubject,!0),L.Execute(r.ClipType.ctUnion,v,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),v}},r.Clipper.TranslatePath=function(t,e){for(var n=new r.Path,f=0;f<t.length;f++)n.push(new r.IntPoint(t[f].X+e.X,t[f].Y+e.Y));return n},r.Clipper.MinkowskiDiff=function(t,e){var n=r.Clipper.Minkowski(t,e,!1,!0),f=new r.Clipper;return f.AddPaths(n,r.PolyType.ptSubject,!0),f.Execute(r.ClipType.ctUnion,n,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),n},r.Clipper.PolyTreeToPaths=function(t){var e=new Array;return r.Clipper.AddPolyNodeToPaths(t,r.Clipper.NodeType.ntAny,e),e},r.Clipper.AddPolyNodeToPaths=function(t,e,n){var f=!0;switch(e){case r.Clipper.NodeType.ntOpen:return;case r.Clipper.NodeType.ntClosed:f=!t.IsOpen;break}t.m_polygon.length>0&&f&&n.push(t.m_polygon);for(var v=0,L=t.Childs(),E=L.length,B=L[v];v<E;v++,B=L[v])r.Clipper.AddPolyNodeToPaths(B,e,n)},r.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new r.Paths,n=0,f=t.ChildCount();n<f;n++)t.Childs()[n].IsOpen&&e.push(t.Childs()[n].m_polygon);return e},r.Clipper.ClosedPathsFromPolyTree=function(t){var e=new r.Paths;return r.Clipper.AddPolyNodeToPaths(t,r.Clipper.NodeType.ntClosed,e),e},De(r.Clipper,r.ClipperBase),r.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},r.ClipperOffset=function(t,e){typeof t>"u"&&(t=2),typeof e>"u"&&(e=r.ClipperOffset.def_arc_tolerance),this.m_destPolys=new r.Paths,this.m_srcPoly=new r.Path,this.m_destPoly=new r.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new r.IntPoint,this.m_polyNodes=new r.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},r.ClipperOffset.two_pi=6.28318530717959,r.ClipperOffset.def_arc_tolerance=.25,r.ClipperOffset.prototype.Clear=function(){r.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},r.ClipperOffset.Round=r.Clipper.Round,r.ClipperOffset.prototype.AddPath=function(t,e,n){var f=t.length-1;if(!(f<0)){var v=new r.PolyNode;if(v.m_jointype=e,v.m_endtype=n,n==r.EndType.etClosedLine||n==r.EndType.etClosedPolygon)for(;f>0&&r.IntPoint.op_Equality(t[0],t[f]);)f--;v.m_polygon.push(t[0]);for(var L=0,E=0,B=1;B<=f;B++)r.IntPoint.op_Inequality(v.m_polygon[L],t[B])&&(L++,v.m_polygon.push(t[B]),(t[B].Y>v.m_polygon[E].Y||t[B].Y==v.m_polygon[E].Y&&t[B].X<v.m_polygon[E].X)&&(E=L));if(!(n==r.EndType.etClosedPolygon&&L<2)&&(this.m_polyNodes.AddChild(v),n==r.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new r.IntPoint(this.m_polyNodes.ChildCount()-1,E);else{var k=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(v.m_polygon[E].Y>k.Y||v.m_polygon[E].Y==k.Y&&v.m_polygon[E].X<k.X)&&(this.m_lowest=new r.IntPoint(this.m_polyNodes.ChildCount()-1,E))}}},r.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var f=0,v=t.length;f<v;f++)this.AddPath(t[f],e,n)},r.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!r.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==r.EndType.etClosedPolygon||e.m_endtype==r.EndType.etClosedLine&&r.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype==r.EndType.etClosedLine&&!r.Clipper.Orientation(e.m_polygon)&&e.m_polygon.reverse()}},r.ClipperOffset.GetUnitNormal=function(t,e){var n=e.X-t.X,f=e.Y-t.Y;if(n==0&&f==0)return new r.DoublePoint(0,0);var v=1/Math.sqrt(n*n+f*f);return n*=v,f*=v,new r.DoublePoint(f,-n)},r.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,r.ClipperBase.near_zero(t)){for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];n.m_endtype==r.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var f;this.ArcTolerance<=0?f=r.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*r.ClipperOffset.def_arc_tolerance?f=Math.abs(t)*r.ClipperOffset.def_arc_tolerance:f=this.ArcTolerance;var v=3.14159265358979/Math.acos(1-f/Math.abs(t));this.m_sin=Math.sin(r.ClipperOffset.two_pi/v),this.m_cos=Math.cos(r.ClipperOffset.two_pi/v),this.m_StepsPerRad=v/r.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];this.m_srcPoly=n.m_polygon;var L=this.m_srcPoly.length;if(!(L==0||t<=0&&(L<3||n.m_endtype!=r.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,L==1){if(n.m_jointype==r.JoinType.jtRound)for(var E=1,B=0,k=1;k<=v;k++){this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+E*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y+B*t)));var Z=E;E=E*this.m_cos-this.m_sin*B,B=Z*this.m_sin+B*this.m_cos}else for(var E=-1,B=-1,k=0;k<4;++k)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+E*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y+B*t))),E<0?E=1:B<0?B=1:E=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var k=0;k<L-1;k++)this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[k],this.m_srcPoly[k+1]));if(n.m_endtype==r.EndType.etClosedLine||n.m_endtype==r.EndType.etClosedPolygon?this.m_normals.push(r.ClipperOffset.GetUnitNormal(this.m_srcPoly[L-1],this.m_srcPoly[0])):this.m_normals.push(new r.DoublePoint(this.m_normals[L-2])),n.m_endtype==r.EndType.etClosedPolygon){for(var V=L-1,k=0;k<L;k++)V=this.OffsetPoint(k,V,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(n.m_endtype==r.EndType.etClosedLine){for(var V=L-1,k=0;k<L;k++)V=this.OffsetPoint(k,V,n.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var Q=this.m_normals[L-1],k=L-1;k>0;k--)this.m_normals[k]=new r.DoublePoint(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new r.DoublePoint(-Q.X,-Q.Y),V=0;for(var k=L-1;k>=0;k--)V=this.OffsetPoint(k,V,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var V=0,k=1;k<L-1;++k)V=this.OffsetPoint(k,V,n.m_jointype);var et;if(n.m_endtype==r.EndType.etOpenButt){var k=L-1;et=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[k].X+this.m_normals[k].X*t),r.ClipperOffset.Round(this.m_srcPoly[k].Y+this.m_normals[k].Y*t)),this.m_destPoly.push(et),et=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[k].X-this.m_normals[k].X*t),r.ClipperOffset.Round(this.m_srcPoly[k].Y-this.m_normals[k].Y*t)),this.m_destPoly.push(et)}else{var k=L-1;V=L-2,this.m_sinA=0,this.m_normals[k]=new r.DoublePoint(-this.m_normals[k].X,-this.m_normals[k].Y),n.m_endtype==r.EndType.etOpenSquare?this.DoSquare(k,V):this.DoRound(k,V)}for(var k=L-1;k>0;k--)this.m_normals[k]=new r.DoublePoint(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new r.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),V=L-1;for(var k=V-1;k>0;--k)V=this.OffsetPoint(k,V,n.m_jointype);n.m_endtype==r.EndType.etOpenButt?(et=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(et),et=new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),r.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(et)):(V=1,this.m_sinA=0,n.m_endtype==r.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},r.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof r.PolyTree;if(e){var n=t[0],f=t[1];n.Clear(),this.FixOrientations(),this.DoOffset(f);var v=new r.Clipper(0);if(v.AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),f>0)v.Execute(r.ClipType.ctUnion,n,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{var L=r.Clipper.GetBounds(this.m_destPolys),E=new r.Path;if(E.push(new r.IntPoint(L.left-10,L.bottom+10)),E.push(new r.IntPoint(L.right+10,L.bottom+10)),E.push(new r.IntPoint(L.right+10,L.top-10)),E.push(new r.IntPoint(L.left-10,L.top-10)),v.AddPath(E,r.PolyType.ptSubject,!0),v.ReverseSolution=!0,v.Execute(r.ClipType.ctUnion,n,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),n.ChildCount()==1&&n.Childs()[0].ChildCount()>0){var B=n.Childs()[0];n.Childs()[0]=B.Childs()[0],n.Childs()[0].m_Parent=n;for(var k=1;k<B.ChildCount();k++)n.AddChild(B.Childs()[k])}else n.Clear()}}else{var n=t[0],f=t[1];r.Clear(n),this.FixOrientations(),this.DoOffset(f);var v=new r.Clipper(0);if(v.AddPaths(this.m_destPolys,r.PolyType.ptSubject,!0),f>0)v.Execute(r.ClipType.ctUnion,n,r.PolyFillType.pftPositive,r.PolyFillType.pftPositive);else{var L=r.Clipper.GetBounds(this.m_destPolys),E=new r.Path;E.push(new r.IntPoint(L.left-10,L.bottom+10)),E.push(new r.IntPoint(L.right+10,L.bottom+10)),E.push(new r.IntPoint(L.right+10,L.top-10)),E.push(new r.IntPoint(L.left-10,L.top-10)),v.AddPath(E,r.PolyType.ptSubject,!0),v.ReverseSolution=!0,v.Execute(r.ClipType.ctUnion,n,r.PolyFillType.pftNegative,r.PolyFillType.pftNegative),n.length>0&&n.splice(0,1)}}},r.ClipperOffset.prototype.OffsetPoint=function(t,e,n){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,Math.abs(this.m_sinA*this.m_delta)<1){var f=this.m_normals[e].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[e].Y;if(f>0)return this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),e}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new r.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case r.JoinType.jtMiter:{var v=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y);v>=this.m_miterLim?this.DoMiter(t,e,v):this.DoSquare(t,e);break}case r.JoinType.jtSquare:this.DoSquare(t,e);break;case r.JoinType.jtRound:this.DoRound(t,e);break}return e=t,e},r.ClipperOffset.prototype.DoSquare=function(t,e){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*n)),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*n)))),this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))))},r.ClipperOffset.prototype.DoMiter=function(t,e,n){var f=this.m_delta/n;this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*f),r.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*f)))},r.ClipperOffset.prototype.DoRound=function(t,e){for(var n=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),f=Math.max(r.Cast_Int32(r.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(n))),1),v=this.m_normals[e].X,L=this.m_normals[e].Y,E,B=0;B<f;++B)this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+v*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+L*this.m_delta))),E=v,v=v*this.m_cos-this.m_sin*L,L=E*this.m_sin+L*this.m_cos;this.m_destPoly.push(new r.IntPoint(r.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),r.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},r.Error=function(t){throw new Error(t)},r.JS={},r.JS.AreaOfPolygon=function(t,e){return e||(e=1),r.Clipper.Area(t)/(e*e)},r.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var n=0,f=0;f<t.length;f++)n+=r.Clipper.Area(t[f]);return n/(e*e)},r.JS.BoundsOfPath=function(t,e){return r.JS.BoundsOfPaths([t],e)},r.JS.BoundsOfPaths=function(t,e){e||(e=1);var n=r.Clipper.GetBounds(t);return n.left/=e,n.bottom/=e,n.right/=e,n.top/=e,n},r.JS.Clean=function(f,e){if(!(f instanceof Array))return[];var n=f[0]instanceof Array,f=r.JS.Clone(f);if(typeof e!="number"||e===null)return r.Error("Delta is not a number in Clean()."),f;if(f.length===0||f.length==1&&f[0].length===0||e<0)return f;n||(f=[f]);for(var v=f.length,L,E,B,k,Z,V,Q,et=[],lt=0;lt<v;lt++)if(E=f[lt],L=E.length,L!==0){if(L<3){B=E,et.push(B);continue}for(B=E,k=e*e,Z=E[0],V=1,Q=1;Q<L;Q++)(E[Q].X-Z.X)*(E[Q].X-Z.X)+(E[Q].Y-Z.Y)*(E[Q].Y-Z.Y)<=k||(B[V]=E[Q],Z=E[Q],V++);Z=E[V-1],(E[0].X-Z.X)*(E[0].X-Z.X)+(E[0].Y-Z.Y)*(E[0].Y-Z.Y)<=k&&V--,V<L&&B.splice(V,L-V),B.length&&et.push(B)}return!n&&et.length?et=et[0]:!n&&et.length===0?et=[]:n&&et.length===0&&(et=[[]]),et},r.JS.Clone=function(t){if(!(t instanceof Array))return[];if(t.length===0)return[];if(t.length==1&&t[0].length===0)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n=t.length,f,v,L,E,B=new Array(n);for(v=0;v<n;v++){for(f=t[v].length,E=new Array(f),L=0;L<f;L++)E[L]={X:t[v][L].X,Y:t[v][L].Y};B[v]=E}return e||(B=B[0]),B},r.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if(typeof e!="number"||e===null)return r.Error("Tolerance is not a number in Lighten()."),r.JS.Clone(t);if(t.length===0||t.length==1&&t[0].length===0||e<0)return r.JS.Clone(t);t[0]instanceof Array||(t=[t]);var n,f,v,L,E,B,k,Z,V,Q,et,lt,ft,pt,Et,Tt,Rt,Sn=t.length,Nn=e*e,Jt=[];for(n=0;n<Sn;n++)if(v=t[n],B=v.length,B!=0){for(L=0;L<1e6;L++){for(E=[],B=v.length,v[B-1].X!=v[0].X||v[B-1].Y!=v[0].Y?(lt=1,v.push({X:v[0].X,Y:v[0].Y}),B=v.length):lt=0,et=[],f=0;f<B-2;f++)k=v[f],V=v[f+1],Z=v[f+2],Tt=k.X,Rt=k.Y,ft=Z.X-Tt,pt=Z.Y-Rt,(ft!==0||pt!==0)&&(Et=((V.X-Tt)*ft+(V.Y-Rt)*pt)/(ft*ft+pt*pt),Et>1?(Tt=Z.X,Rt=Z.Y):Et>0&&(Tt+=ft*Et,Rt+=pt*Et)),ft=V.X-Tt,pt=V.Y-Rt,Q=ft*ft+pt*pt,Q<=Nn&&(et[f+1]=1,f++);for(E.push({X:v[0].X,Y:v[0].Y}),f=1;f<B-1;f++)et[f]||E.push({X:v[f].X,Y:v[f].Y});if(E.push({X:v[B-1].X,Y:v[B-1].Y}),lt&&v.pop(),et.length)v=E;else break}B=E.length,E[B-1].X==E[0].X&&E[B-1].Y==E[0].Y&&E.pop(),E.length>2&&Jt.push(E)}return t[0]instanceof Array||(Jt=Jt[0]),typeof Jt>"u"&&(Jt=[[]]),Jt},r.JS.PerimeterOfPath=function(t,e,n){if(typeof t>"u")return 0;var f=Math.sqrt,v=0,L,E,B=0,k=0,Z=0,V=0,Q=t.length;if(Q<2)return 0;for(e&&(t[Q]=t[0],Q++);--Q;)L=t[Q],B=L.X,k=L.Y,E=t[Q-1],Z=E.X,V=E.Y,v+=f((B-Z)*(B-Z)+(k-V)*(k-V));return e&&t.pop(),v/n},r.JS.PerimeterOfPaths=function(t,e,n){n||(n=1);for(var f=0,v=0;v<t.length;v++)f+=r.JS.PerimeterOfPath(t[v],e,n);return f},r.JS.ScaleDownPath=function(t,e){var n,f;for(e||(e=1),n=t.length;n--;)f=t[n],f.X=f.X/e,f.Y=f.Y/e},r.JS.ScaleDownPaths=function(t,e){var n,f,v;for(e||(e=1),n=t.length;n--;)for(f=t[n].length;f--;)v=t[n][f],v.X=v.X/e,v.Y=v.Y/e},r.JS.ScaleUpPath=function(t,e){var n,f,v=Math.round;for(e||(e=1),n=t.length;n--;)f=t[n],f.X=v(f.X*e),f.Y=v(f.Y*e)},r.JS.ScaleUpPaths=function(t,e){var n,f,v,L=Math.round;for(e||(e=1),n=t.length;n--;)for(f=t[n].length;f--;)v=t[n][f],v.X=L(v.X*e),v.Y=L(v.Y*e)},r.ExPolygons=function(){return[]},r.ExPolygon=function(){this.outer=null,this.holes=null},r.JS.AddOuterPolyNodeToExPolygons=function(t,e){var n=new r.ExPolygon;n.outer=t.Contour();var f=t.Childs(),v=f.length;n.holes=new Array(v);var L,E,B,k,Z,V;for(B=0;B<v;B++)for(L=f[B],n.holes[B]=L.Contour(),k=0,Z=L.Childs(),V=Z.length;k<V;k++)E=Z[k],r.JS.AddOuterPolyNodeToExPolygons(E,e);e.push(n)},r.JS.ExPolygonsToPaths=function(t){var e,n,f,v,L=new r.Paths;for(e=0,f=t.length;e<f;e++)for(L.push(t[e].outer),n=0,v=t[e].holes.length;n<v;n++)L.push(t[e].holes[n]);return L},r.JS.PolyTreeToExPolygons=function(t){var e=new r.ExPolygons,n,f,v,L;for(f=0,v=t.Childs(),L=v.length;f<L;f++)n=v[f],r.JS.AddOuterPolyNodeToExPolygons(n,e);return e}})()}(_e)),_e.exports}var Te,mr;function Vn(){if(mr)return Te;mr=1;var S=He(),r=zn(),P=ee(),p=re(),I=Vt(),o=Br(),d=zt(),h=ne(),u=Qt(),x=Zt(),b=jt(),C=Kt(),w=Rr();function O(i){var s={type:i.type};return s.type!==P.CLOSE&&(s.x=i.x,s.y=i.y),s.type===P.QUADTO?(s.x1=i.x1,s.y1=i.y1):s.type===P.CURVETO&&(s.x1=i.x1,s.y1=i.y1,s.x2=i.x2,s.y2=i.y2),s}var l={};l.HORIZONTAL="horizontal",l.VERTICAL="vertical",l.EAST="e",l.WEST="w",l.NORTH="n",l.SOUTH="s",l.bounds=function(i){var s,a,y;if(i){if(typeof i.bounds=="function")return i.bounds();if(i.x!==void 0&&i.y!==void 0)return i.width!==void 0&&i.height!==void 0?new b(i.x,i.y,i.width,i.height):new b(i.x,i.y,0,0);if(i.r!==void 0&&i.g!==void 0&&i.b!==void 0)return new l.Rect(0,0,30,30);if(Array.isArray(i)){if(s=null,y=i.length,y>0&&i[0].r!==void 0&&i[0].g!==void 0&&i[0].b!==void 0)return new b(0,0,i.length*30,30);for(a=0;a<y;a+=1)s?s=s.unite(l.bounds(i[a])):s=l.bounds(i[a]);return s||new b}else return new b}else return new b},l.makeCenteredRect=function(i,s,a,y){var c=i-a/2,_=s-y/2;return new b(c,_,a,y)},l.makePoint=function(i,s){return new x(i,s)},l.makeRect=function(i,s,a,y){return new b(i,s,a,y)},l.merge=function(){for(var i=S(arguments),s=[],a=0;a<i.length;a+=1)i[a]&&i[a].length!==0&&s.push(i[a]);return new h(s)},l.combinePaths=function(i){return u.combine(i)},l.shapePoints=l.toPoints=function(i){if(!i)return[];var s;if(i.commands){var a,y=[];for(s=0;s<i.commands.length;s+=1)a=i.commands[s],a.x!==void 0&&y.push(new x(a.x,a.y));return y}var c=[];for(s=0;s<i.shapes.length;s+=1)c=c.concat(l.shapePoints(i.shapes[s]));return c},l.colorize=function(i,s,a,y){return i?i.colorize(s,a,y):null},l.translate=function(i,s){return i?i.translate?i.translate(s):w.translate.apply(i,[s]):null},l.scale=function(i,s,a){return i?i.scale?i.scale(s,a):w.scale.apply(i,[s,a]):null},l.rotate=function(i,s,a){return i?i.rotate?i.rotate(s,a):w.rotate.apply(i,[s,a]):null},l.skew=function(i,s,a){return i?i.skew?i.skew(s,a):w.skew.apply(i,[s,a]):null},l.copy=function(i,s,a,y,c,_){var T,A,N,Y,F=[],W=0,U=0,H=0,J=1,D=1;for(T=0;T<s;T+=1){for(A=new C,N=0;N<a.length;N+=1)Y=a[N],Y==="t"?A=A.translate(W,U):Y==="r"?A=A.rotate(H):Y==="s"&&(A=A.scale(J,D));Array.isArray(i)&&i.length>0&&i[0].x!==void 0&&i[0].y!==void 0?F=F.concat(A.transformShape(i)):F.push(A.transformShape(i)),W+=y.x,U+=y.y,H+=c,J+=_.x,D+=_.y}return F},l.fit=function(i,s,a,y,c){if(!i)return null;c=c!==void 0?c:!1;var _,T,A,N=l.bounds(i),Y=N.x,F=N.y,W=N.width,U=N.height;return W=W>1e-12?W:0,U=U>1e-12?U:0,_=new C,_=_.translate(s.x,s.y),c?(T=W>0?a/W:1,A=U>0?y/U:1):(T=W>0?a/W:Number.MAX_VALUE,A=U>0?y/U:Number.MAX_VALUE,T=A=Math.min(T,A)),_=_.scale(T,A),_=_.translate(-W/2-Y,-U/2-F),_.transformShape(i)},l.fitTo=function(i,s,a){if(!i)return null;if(!s)return i;var y=l.bounds(s),c=y.x,_=y.y,T=y.width,A=y.height;return l.fit(i,{x:c+T/2,y:_+A/2},T,A,a)},l.mirror=function(i,s,a,y){if(!i)return null;var c=new C;c=c.translate(a.x,a.y),c=c.rotate(s*2-180),c=c.scale(-1,1),c=c.translate(-a.x,-a.y);var _=c.transformShape(i);return y?Array.isArray(i)&&i.length>0?i.concat(_):new h([i,_]):_},l.pathLength=function(i,s){if(!i)return 0;var a=20;return s&&s.precision&&(a=s.precision),i.length(a)},l.resampleByLength=function(i,s){return i?i.resampleByLength(s):null},l.resampleByAmount=function(i,s,a){return i?i.resampleByAmount(s,a):null},l._wigglePoints=function(i,s,a){var y,c,_;if(i.commands){var T=new u([],i.fill,i.stroke,i.strokeWidth);for(y=0;y<i.commands.length;y+=1){c=(a(0,1)-.5)*s.x*2,_=(a(0,1)-.5)*s.y*2;var A=i.commands[y];A.type===P.MOVETO?T.moveTo(A.x+c,A.y+_):A.type===P.LINETO?T.lineTo(A.x+c,A.y+_):A.type===P.CURVETO?T.curveTo(A.x1,A.y1,A.x2,A.y2,A.x+c,A.y+_):A.type===P.CLOSE&&T.close()}return T}else if(i.shapes){var N=[];for(N.length=i.shapes.length,y=0;y<i.shapes.length;y+=1)N[y]=l._wigglePoints(i.shapes[y],s,a);return new h(N)}else if(Array.isArray(i)&&i.length>0&&i[0].x!==void 0&&i[0].y!==void 0){var Y=[];for(Y.length=i.length,y=0;y<i.length;y+=1)c=(a(0,1)-.5)*s.x*2,_=(a(0,1)-.5)*s.y*2,Y[y]=new x(i[y].x+c,i[y].y+_);return Y}else{var F=[];for(F.length=i.length,y=0;y<i.length;y+=1)F[y]=l._wigglePoints(i[y],s,a);return F}},l.wigglePoints=function(i,s,a){if(!i)return null;a=a!==void 0?a:Math.random();var y=o.generator(a);return s===void 0?s={x:10,y:10}:typeof s=="number"&&(s={x:s,y:s}),l._wigglePoints(i,s,y)},l._wiggleContours=function(i,s,a){var y;if(i.commands){var c,_,T,A=i.contours(),N=[];for(y=0;y<A.length;y+=1)c=(a(0,1)-.5)*s.x*2,_=(a(0,1)-.5)*s.y*2,T=new C().translate(c,_),N=N.concat(T.transformShape(new u(A[y])).commands);return new u(N,i.fill,i.stroke,i.strokeWidth)}else if(i.shapes){var Y=[];for(Y.length=i.shapes.length,y=0;y<i.shapes.length;y+=1)Y[y]=l._wiggleContours(i.shapes[y],s,a);return new h(Y)}else{var F=[];for(F.length=i.length,y=0;y<i.length;y+=1)F[y]=l._wiggleContours(i[y],s,a);return F}},l.wiggleContours=function(i,s,a){if(!i)return null;a=a!==void 0?a:Math.random();var y=o.generator(a);return s===void 0?s={x:10,y:10}:typeof s=="number"&&(s={x:s,y:s}),l._wiggleContours(i,s,y)},l._wigglePaths=function(i,s,a){if(i.commands)return i;if(i.shapes)return new h(l._wigglePaths(i.shapes,s,a));if(Array.isArray(i)){for(var y,c,_,T,A=[],N=0;N<i.length;N+=1)y=i[N],y.commands?(c=(a(0,1)-.5)*s.x*2,_=(a(0,1)-.5)*s.y*2,T=new C().translate(c,_),A.push(T.transformShape(y))):y.shapes&&A.push(l._wigglePaths(y,s,a));return A}},l.wigglePaths=function(i,s,a){if(!i)return null;a=a!==void 0?a:Math.random();var y=o.generator(a);return s===void 0?s={x:10,y:10}:typeof s=="number"&&(s={x:s,y:s}),l._wigglePaths(i,s,y)},l.scatterPoints=function(i,s,a){if(!i)return[];a=a!==void 0?a:Math.random();var y,c,_,T,A,N,Y,F,W=o.generator(a),U=i.bounds(),H=U.x,J=U.y,D=U.width,M=U.height,X=i.contours(),R=[],G=[],rt=5;for(y=0;y<X.length;y++)_=new u(X[y]),T=_.commands.length,R.push(_.points(T*rt,{closed:!0}));for(y=0;y<s;y+=1)for(A=100;A>0;){for(N=0,Y=H+W(0,1)*D,F=J+W(0,1)*M,c=0;c<R.length;c++)p.pointInPolygon(R[c],Y,F)&&(N+=1);if(N%2){G.push(new x(Y,F));break}A-=1}return G},l.connectPoints=function(i,s){if(!i)return null;for(var a,y=new u,c=0;c<i.length;c+=1)a=i[c],c===0?y.moveTo(a.x,a.y):y.lineTo(a.x,a.y);return s&&y.close(),y.fill=null,y.stroke=d.BLACK,y},l.align=function(i,s,a,y){if(!i)return null;var c,_,T,A=s.x,N=s.y,Y=l.bounds(i);return a==="left"?c=A-Y.x:a==="right"?c=A-Y.x-Y.width:a==="center"?c=A-Y.x-Y.width/2:c=0,y==="top"?_=N-Y.y:y==="bottom"?_=N-Y.y-Y.height:y==="middle"?_=N-Y.y-Y.height/2:_=0,T=new C().translate(c,_),T.transformShape(i)},l.snap=function(i,s,a,y){if(!i)return null;a=a!==void 0?a:1,y=y||x.ZERO;var c,_,T;if(i.commands){var A=new u([],i.fill,i.stroke,i.strokeWidth),N,Y,F,W,U;for(c=0;c<i.commands.length;c+=1)if(N=i.commands[c],N.type===P.MOVETO||N.type===P.LINETO||N.type===P.CURVETO)_=I.snap(N.x+y.x,s,a)-y.x,T=I.snap(N.y+y.y,s,a)-y.y,N.type===P.MOVETO?A.moveTo(_,T):N.type===P.LINETO?A.lineTo(_,T):N.type===P.CURVETO&&(Y=I.snap(N.x1+y.x,s,a)-y.x,F=I.snap(N.y1+y.y,s,a)-y.y,W=I.snap(N.x2+y.x,s,a)-y.x,U=I.snap(N.y2+y.y,s,a)-y.y,A.curveTo(Y,F,W,U,_,T));else if(N.type===P.CLOSE)A.close();else throw new Error("Invalid path command "+N);return A}else if(i.shapes){var H=[];for(H.length=i.shapes.length,c=0;c<i.shapes.length;c+=1)H[c]=l.snap(i.shapes[c],s,a,y);return new h(H)}else if(Array.isArray(i)&&i.length>0&&i[0].x!==void 0&&i[0].y!==void 0){var J,D=[];for(D.length=i.length,c=0;c<i.length;c+=1)J=i[c],_=I.snap(J.x+y.x,s,a)-y.x,T=I.snap(J.y+y.y,s,a)-y.y,D[c]=new x(_,T);return D}else{var M=[];for(M.length=i.length,c=0;c<i.length;c+=1)M[c]=l.snap(i[c],s,a,y);return M}},l.deletePoints=function(i,s,a){if(!i)return null;if(!s)return i;var y,c,_=[],T,A=[];if(i.commands){var N=!0;for(y=0;y<i.commands.length;y+=1)c=O(i.commands[y]),(c.x===void 0||a&&s.contains(c.x,c.y)||!a&&!s.contains(c.x,c.y))&&(N&&c.type!==P.MOVETO&&(c.type=P.MOVETO),_.push(c),c.type===P.MOVETO?N=!1:c.type===P.CLOSE&&(N=!0));return new u(_,i.fill,i.stroke,i.strokeWidth)}else if(i.shapes){var Y=[];for(Y.length=i.shapes.length,y=0;y<i.shapes.length;y+=1)Y[y]=l.deletePoints(i.shapes[y],s,a);return new h(Y)}else if(Array.isArray(i)&&i.length>0&&i[0].x!==void 0&&i[0].y!==void 0){for(y=0;y<i.length;y+=1)T=i[y],(a&&s.contains(T.x,T.y)||!a&&!s.contains(T.x,T.y))&&A.push(O(T));return A}else{var F=[];for(F.length=i.length,y=0;y<i.length;y+=1)F[y]=l.deletePoints(i[y],s,a);return F}},l.deletePaths=function(i,s,a){if(!i||i.commands)return null;if(i.shapes)return new h(l.deletePaths(i.shapes,s,a));if(Array.isArray(i)){if(!s)return i;for(var y,c,_,T,A,N=[],Y=i,F=0;F<Y.length;F+=1)if(c=Y[F],c.commands){for(_=!1,y=0;y<c.commands.length;y+=1)if(T=c.commands[y],T.x!==void 0&&s.contains(T.x,T.y)){_=!0;break}a&&!_||_&&!a||N.push(c)}else c.shapes&&(A=l.deletePaths(c,s,a),A.length!==0&&N.push(A));return N}},l.delete=function(i,s,a,y){if(i===null||s===null)return null;if(a==="points")return l.deletePoints(i,s,y);if(a==="paths")return l.deletePaths(i,s,y);throw new Error("Invalid scope.")},l.pointOnPath=function(i,s){if(!i)return x.ZERO;i.shapes&&(i=new u(l.combinePaths(i))),s=s%1,s<0&&(s=1+s);var a=i.point(s);return new x(a.x,a.y)},l._x=function(i){return i.x!==void 0?i.x:i.bounds().x},l._y=function(i){return i.y!==void 0?i.y:i.bounds().y},l._angleToPoint=function(i){return function(s){if(s.x!==void 0&&s.y!==void 0)return p.angle(s.x,s.y,i.x,i.y);var a=s.bounds().centerPoint();return p.angle(a.x,a.y,i.x,i.y)}},l._distanceToPoint=function(i){return function(s){if(s.x!==void 0&&s.y!==void 0)return p.distance(s.x,s.y,i.x,i.y);var a=s.bounds().centerPoint();return p.distance(a.x,a.y,i.x,i.y)}},l.shapeSort=function(i,s,a){if(!i)return null;a=a||x.ZERO;var y={x:l._x,y:l._y,angle:l._angleToPoint(a),distance:l._distanceToPoint(a)};if(s=y[s],s===void 0)return i;var c=i.slice(0);return c.sort(function(_,T){var A=s(_),N=s(T);return A<N?-1:A>N?1:0}),c},l.group=function(){return new h(S(arguments))},l.ungroup=function(i){if(i)if(i.shapes){var s,a,y=[];for(s=0;s<i.shapes.length;s+=1)a=i.shapes[s],a.commands?y.push(a):a.shapes&&(y=y.concat(l.ungroup(a)));return y}else return i.commands?[i]:[];else return[]},l.centerPoint=function(i){if(!i)return x.ZERO;var s=l.bounds(i);return new x(s.x+s.width/2,s.y+s.height/2)},l.link=function(i,s,a){if(!i||!s)return null;var y=new u,c=i.bounds(),_=s.bounds();if(a===l.HORIZONTAL){var T=(_.x-(c.x+c.width))/2;y.moveTo(c.x+c.width,c.y),y.curveTo(c.x+c.width+T,c.y,_.x-T,_.y,_.x,_.y),y.lineTo(_.x,_.y+_.height),y.curveTo(_.x-T,_.y+_.height,c.x+c.width+T,c.y+c.height,c.x+c.width,c.y+c.height),y.close()}else{var A=(_.y-(c.y+c.height))/2;y.moveTo(c.x,c.y+c.height),y.curveTo(c.x,c.y+c.height+A,_.x,_.y-A,_.x,_.y),y.lineTo(_.x+_.width,_.y),y.curveTo(_.x+_.width,_.y-A,c.x+c.width,c.y+c.height+A,c.x+c.width,c.y+c.height),y.close()}return y};var g={union:r.ClipType.ctUnion,difference:r.ClipType.ctDifference,intersection:r.ClipType.ctIntersection,xor:r.ClipType.ctXor};l._compoundToPoints=function(i){var s=[],a,y,c,_,T;for(a=0;a<i.length;a+=1){for(y=[],c=i[a],_=0;_<c.length;_+=1)T=c[_],T.type!==P.CLOSE&&y.push({X:T.x,Y:T.y});s.push(y)}return s},l.compound=function(i,s,a){i.commands||(i=u.combine(i)),s.commands||(s=u.combine(s));var y=i.resampleByLength(1).contours(),c=s.resampleByLength(1).contours(),_=l._compoundToPoints(y),T=l._compoundToPoints(c),A=100;r.JS.ScaleUpPaths(_,A),r.JS.ScaleUpPaths(T,A);var N=new r.Clipper;N.AddPaths(_,r.PolyType.ptSubject,i.isClosed()),N.AddPaths(T,r.PolyType.ptClip,s.isClosed());var Y=new r.Paths;N.Execute(g[a],Y,r.PolyFillType.pftNonZero,r.PolyFillType.pftNonZero),Y=r.JS.Clean(Y,.1*A),r.JS.ScaleDownPaths(Y,A);var F=new u,W,U,H;for(W=0;W<Y.length;W+=1){for(H=Y[W],U=0;U<H.length;U+=1)U===0?F.moveTo(H[U].X,H[U].Y):F.lineTo(H[U].X,H[U].Y);(H[0].X!==H[H.length-1].X||H[0].Y!==H[H.length-1].Y)&&F.closePath()}return F};function m(i,s){const a=[];let y={},c=0;i.forEach(N=>{c===0?y._in=N:c===1?y._pt=N:c===2&&(y._out=N),c+=1,c===3&&(a.push(y),c=0,y={})});const _=[];let T=a.length;for(s&&(T+=1),c=0;c<T;c+=1){let N=a[c%a.length];c===0?_.push({cmd:"moveto",pt:N._pt}):(y={cmd:"curveto",pt:N._pt,ctrl1:a[c-1]._out,ctrl2:N._in},_.push(y))}const A=new u;return _.forEach(N=>{N.cmd==="moveto"?A.moveTo(N.pt.x,N.pt.y):N.cmd==="curveto"&&A.curveTo(N.ctrl1.x,N.ctrl1.y,N.ctrl2.x,N.ctrl2.y,N.pt.x,N.pt.y)}),A}return l.roundedSegments=function(i,s){if(!s||s.length===0)return i;const a=l.toPoints(i),y=[];for(let _=0;_<a.length;_+=1){let T=a[_],A;_===0?A=a[a.length-1]:A=a[_-1];let N=a[(_+1)%a.length],Y=I.degrees(Math.atan2(N.y-A.y,N.x-A.x)),F=p.coordinates(T.x,T.y,Y,-s[_%s.length]),W=p.coordinates(T.x,T.y,Y,s[_%s.length]);y.push(F),y.push(T),y.push(W)}let c=m(y,i.isClosed());return c.fill=i.fill,c.stroke=i.stroke,c.strokeWidth=i.strokeWidth,c},Te=l,Te}var be,yr;function Dn(){if(yr)return be;yr=1;var S=re(),r=zt(),P=Qt(),p=Zt(),I=kr(),o={};o.roundedRect=function(u,x,b,C,w,O){var l=new P;return l.addRoundedRect(u,x,b,C,w,O),l},o.quad=function(u,x,b,C){var w=arguments,O=new P;return w.length===8?P.prototype.addQuad.apply(O,w):(u=p.read(u),x=p.read(x),b=p.read(b),C=p.read(C),O.addQuad(u.x,u.y,x.x,x.y,b.x,b.y,C.x,C.y)),O},o.rect=function(u,x,b,C){var w=arguments;if(w.length===3?u=p.read(u):w.length===4?typeof w[0]=="number"&&typeof w[1]=="number"?(u=p.read(w[0],w[1]),x=w[2],b=w[3],C=null):(u=p.read(u),C=p.read(C)):(w.length===5||w.length===6)&&(u=p.read(w[0],w[1]),x=w[2],b=w[3],w.length===5&&typeof w[4]=="number"?C=p.read(w[4],w[4]):C=p.read(w[4],w[5])),!C||C.x===0&&C.y===0){var O=new P;return O.addRect(u.x-x/2,u.y-b/2,x,b),O}else return o.roundedRect(u.x-x/2,u.y-b/2,x,b,C.x,C.y)},o.ellipse=function(u,x,b){var C=arguments;C.length===4?(u=p.read(C[0],C[1]),x=C[2],b=C[3]):u=p.read(u);var w=new P;return w.addEllipse(u.x-x/2,u.y-b/2,x,b),w},o.line=function(u,x){var b=arguments;b.length===4?(u=p.read(b[0],b[1]),x=p.read(b[2],b[3])):(u=p.read(u),x=p.read(x));var C=new P;return C.addLine(u.x,u.y,x.x,x.y),C.fill=null,C.stroke="black",C},o.lineAngle=function(u,x,b){var C=arguments;C.length===4?(u=p.read(C[0],C[1]),b=C[2],x=C[3]):u=p.read(u);var w=S.coordinates(u.x,u.y,x,b);return o.line(u,w)},o.arc=function(u,x,b,C,w,O){var l=arguments;l.length===7?(u=p.read(l[0],l[1]),x=l[2],b=l[3],C=l[4],w=l[5],O=l[6]):u=p.read(u);var g=new P;return g.addArc(u.x,u.y,x,b,C,w,O),g},o.curve=function(u,x,b,C){var w=arguments;w.length===6?(u=p.read(w[0],w[1]),x=p.read(w[2],w[3]),b=w[4],C=w[5]):(u=p.read(u),x=p.read(x));var O=u.x+b*(x.x-u.x),l=u.y+b*(x.y-u.y),g=S.angle(u.x,u.y,x.x,x.y)+90,m=S.coordinates(O,l,g,C),i=m.x,s=m.y,a=u.x+2/3*(i-u.x),y=u.y+2/3*(s-u.y),c=x.x+2/3*(i-x.x),_=x.y+2/3*(s-x.y),T=new P;return T.moveTo(u.x,u.y),T.curveTo(a,y,c,_,x.x,x.y),T.fill=null,T.stroke=r.BLACK,T},o.polygon=function(u,x,b,C){var w=arguments;w.length===5||w.length===4&&typeof w[0]=="number"&&typeof w[1]=="number"?(u=p.read(w[0],w[1]),x=w[2],b=w[3],C=w.length===5?w[4]:!0):(u=p.read(u),w.length===3&&(C=!0)),b=Math.max(b,3);var O,l,g,m,i=u.x,s=u.y,a=x,y=360/b,c=0;C===!0&&(O=S.coordinates(i,s,0,a),l=S.coordinates(i,s,y,a),c=-S.angle(l.x,l.y,O.x,O.y));var _=new P;for(g=0;g<b;g+=1)m=S.coordinates(i,s,y*g+c,a),g===0?_.moveTo(m.x,m.y):_.lineTo(m.x,m.y);return _.close(),_},o.star=function(u,x,b,C){var w=arguments;w.length===5||w.length===4&&typeof w[0]=="number"&&typeof w[1]=="number"?(u=p.read(w[0],w[1]),x=w[2],b=w[3],C=w[4]):u=p.read(u),C||(C=b);var O,l,g,m,i,s=new P;for(s.moveTo(u.x,u.y+b/2),O=1;O<x*2;O+=1)l=O*Math.PI/x,g=O%2===1?C/2:b/2,m=u.x+g*Math.sin(l),i=u.y+g*Math.cos(l),s.lineTo(m,i);return s.close(),s};var d=function(u){return u!==""},h=function(u){return u.replace(/,/g," ")};return o.freehand=function(u){var x,b,C,w,O,l=[],g=u.split("M");for(x=0;x<g.length;x+=1)d(g[x])&&l.push(h(g[x]));var m=new P;for(b=0;b<l.length;b+=1){for(O=[],g=l[b].split(" "),x=0;x<g.length;x+=1)d(g[x])&&O.push(g[x]);for(x=0;x<O.length;x+=2)O[x+1]!==void 0&&(C=parseFloat(O[x]),w=parseFloat(O[x+1]),x===0?m.moveTo(C,w):m.lineTo(C,w))}return m.fill=null,m.stroke=r.BLACK,m},o.grid=function(u,x,b,C,w){var O,l,g,m,i,s,a,y,c,_=[];for(_.length=u*x,w=w!==void 0?w:p.ZERO,u>1?(O=b*(u-1),l=w.x-O/2):l=w.x,x>1?(g=C*(x-1),m=w.y-g/2):m=w.y,c=0,i=0;i<x;i+=1)for(s=0;s<u;s+=1)a=l+s*b,y=m+i*C,_[c]=new p(a,y),c+=1;return _},o.text=function(){var u=Array.prototype.slice.call(arguments);return u.unshift(null),new(Function.prototype.bind.apply(I,u))},o.demoRect=function(){return new o.rect({x:0,y:0},100,100,{x:0,y:0})},o.demoEllipse=function(){return new o.ellipse({x:0,y:0},100,100)},be=o,be}var Le,vr;function ie(){if(vr)return Le;vr=1;var S=Yn(),r={};r.bezier=ee(),r.color=Yr(),r.geo=re(),r.math=Vt(),r.random=Br(),r.svg=Un(),r.Color=zt(),r.Group=ne(),r.Matrix4=Hn(),r.Path=Qt(),r.Point=r.Vec2=Zt(),r.Rect=jt(),r.Text=kr(),r.Transform=r.Matrix3=Kt(),r.Vec3=Fr();function P(I){for(var o in I)r[o]=I[o]}var p=Rr();return S(r.Point.prototype,p),S(r.Path.prototype,p),S(r.Group.prototype,p),S(r.Text.prototype,p),P(Gn()),P(Vn()),P(Dn()),Le=r,Le}var Ae,gr;function Ge(){if(gr)return Ae;gr=1;function S(o){return o*180/Math.PI}function r(o){return o/180*Math.PI}function P(o,d,h,u){return Math.sqrt(Math.pow(h-o,2)+Math.pow(u-d,2))}function p(o,d,h){return Math.min(h,Math.max(d,o))}function I(o){o===void 0?o=[1,0,0,0,1,0,0,0,1]:o=o.slice();function d(h,u){u=u.slice();var x=u[0],b=u[1];u[2];var C=u[3],w=u[4];u[5];var O=u[6],l=u[7];return u[8],u[0]=h[0]*x+h[1]*C,u[1]=h[0]*b+h[1]*w,u[3]=h[3]*x+h[4]*C,u[4]=h[3]*b+h[4]*w,u[6]=h[6]*x+h[7]*C+O,u[7]=h[6]*b+h[7]*w+l,I(u)}return{matrix:function(){return o.slice()},clone:function(){return I(o)},prepend:function(h){return h.matrix&&(h=h.matrix()),d(o,h)},append:function(h){return h.matrix&&(h=h.matrix()),d(h,o)},translate:function(h,u){return d([1,0,0,0,1,0,h,u,1],o)},scale:function(h,u){return u===void 0&&(u=h),d([h,0,0,0,u,0,0,0,1],o)},skew:function(h,u){u===void 0&&(u=h);var x=Math.PI*h/180,b=Math.PI*u/180;return d([1,Math.tan(b),0,-Math.tan(x),1,0,0,0,1],o)},rotate:function(h){var u=Math.cos(r(h)),x=Math.sin(r(h));return d([u,x,0,-x,u,0,0,0,1],o)},transformPoint:function(h){var u=h.x,x=h.y;return{x:u*o[0]+x*o[3]+o[6],y:u*o[1]+x*o[4]+o[7]}}}}return Ae={degrees:S,radians:r,distance:P,clamp:p,transform:I},Ae}var Oe,Pr;function Jn(){if(Pr)return Oe;Pr=1;var S,r,P={normal:"source-over","linear-dodge":"add"};function p(u){var x,b,C,w=Object.keys(P);for(x=0;x<w.length;x+=1)b=w[x],C=P[b],u[b]=u[C]}function I(u){return P[u]!==void 0?P[u]:u}function o(){if(typeof document>"u")return{};var u,x,b,C,w={},O=document.createElement("canvas"),l=O.getContext("2d");if(!l)return{};var g=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],m=["multiply","screen","overlay","soft-light","hard-light","color-dodge","color-burn","darken","lighten","difference","exclusion","hue","saturation","luminosity","color","add","subtract","average","negation"],i=["divide","darker-color","lighter-color","linear-burn","linear-light","vivid-light","pin-light","hard-mix"];for(u=0;u<g.length;u+=1)w[g[u]]=!0;for(u=0;u<i.length;u+=1)w[i[u]]=!1;for(O.width=1,O.height=1,u=0;u<m.length;u+=1){x=m[u],b=x==="darken",C=!1,l.save();try{l.fillStyle=b?"#300":"#a00",l.fillRect(0,0,1,1),l.globalCompositeOperation=x,l.globalCompositeOperation===x&&(l.fillStyle=b?"#a00":"#300",l.fillRect(0,0,1,1),C=l.getImageData(0,0,1,1).data[0]!==(b?170:51))}catch{}l.restore(),w[x]=C}return p(w),w}r=function(u,x,b,C,w){var O,l,g,m,i,s,a,y,c,_,T,A,N=Math.max,Y=Math.min,F=.2126,W=.7152,U=.0722;function H(q,K,nt){q/=255,K/=255,nt/=255;var ut,at,dt;return q===K&&K===nt?(at=0,ut=0):q>=K&&K>=nt?(at=q-nt,ut=60*(K-nt)/at):K>q&&q>=nt?(at=K-nt,ut=60*(K-q)/at+60):K>=nt&&nt>q?(at=K-q,ut=60*(nt-q)/at+120):nt>K&&K>q?(at=nt-q,ut=60*(nt-K)/at+180):nt>q&&q>=K?(at=nt-K,ut=60*(q-K)/at+240):(at=q-K,ut=60*(q-nt)/at+300),dt=F*q+W*K+U*nt,[ut%360,Y(N(at,0),1),Y(N(dt,0),1)]}function J(q,K,nt){q=q%360;var ut,at,dt,mt;return q>=0&&q<60?(mt=K*q/60,dt=nt-F*K-W*mt,ut=dt+K,at=dt+mt):q>=60&&q<120?(mt=K*(q-60)/60,at=nt+U*K+F*mt,dt=at-K,ut=at-mt):q>=120&&q<180?(mt=K*(q-120)/60,ut=nt-W*K-U*mt,at=ut+K,dt=ut+mt):q>=180&&q<240?(mt=K*(q-180)/60,dt=nt+F*K+W*mt,ut=dt-K,at=dt-mt):q>=240&&q<300?(mt=K*(q-240)/60,at=nt-U*K-F*mt,dt=at+K,ut=at+mt):(mt=K*(q-300)/60,ut=nt+W*K+U*mt,at=ut-K,dt=ut-mt),ut=Y(N(ut,0),1)*255,at=Y(N(at,0),1)*255,dt=Y(N(dt,0),1)*255,[ut,at,dt]}function D(){_=l+s-s*i,T=g+a-a*i,A=m+y-y*i}function M(){_=l*s+l*(1-c)+s*(1-i),T=g*a+g*(1-c)+a*(1-i),A=m*y+m*(1-c)+y*(1-i)}function X(){_=N(s*i-l*c,0)+l*(1-c)+s*(1-i),T=N(a*i-g*c,0)+g*(1-c)+a*(1-i),A=N(y*i-m*c,0)+m*(1-c)+y*(1-i)}function R(){_=l===0?0:s/l*255,T=g===0?0:a/g*255,A=m===0?0:y/m*255}function G(){_=l+s-l*s,T=g+a-g*a,A=m+y-m*y}function rt(){_=N(l*c,s*i)+l*(1-c)+s*(1-i),T=N(g*c,a*i)+g*(1-c)+a*(1-i),A=N(m*c,y*i)+m*(1-c)+y*(1-i)}function j(){_=Y(l*c,s*i)+l*(1-c)+s*(1-i),T=Y(g*c,a*i)+g*(1-c)+a*(1-i),A=Y(m*c,y*i)+m*(1-c)+y*(1-i)}function $(){s*i*.3+a*i*.59+y*i*.11<=l*c*.3+g*c*.59+m*c*.11?(_=s*i,T=a*i,A=y*i):(_=l*c,T=g*c,A=m*c),_+=l*(1-c)+s*(1-i),T+=g*(1-c)+a*(1-i),A+=m*(1-c)+y*(1-i)}function tt(){s*i*.3+a*i*.59+y*i*.11>l*c*.3+g*c*.59+m*c*.11?(_=s*i,T=a*i,A=y*i):(_=l*c,T=g*c,A=m*c),_+=l*(1-c)+s*(1-i),T+=g*(1-c)+a*(1-i),A+=m*(1-c)+y*(1-i)}function z(){_=Y(s+l,255),T=Y(a+g,255),A=Y(y+m,255)}function ot(){_=s+l,T=a+g,A=y+m,_=_<255?0:_-255,T=T<255?0:T-255,A=A<255?0:A-255}function it(){_=l+s-2*Y(l*c,s*i),T=g+a-2*Y(g*c,a*i),A=m+y-2*Y(m*c,y*i)}function ct(){_=l*c+s*i-2*l*s+l*(1-c)+s*(1-i),T=g*c+a*i-2*g*a+g*(1-c)+a*(1-i),A=m*c+y*i-2*m*y+m*(1-c)+y*(1-i)}function st(){2*s<=c?_=2*l*s+l*(1-c)+s*(1-i):_=l*(1+c)+s*(1+i)-2*s*l-c*i,2*a<=c?T=2*g*a+g*(1-c)+a*(1-i):T=g*(1+c)+a*(1+i)-2*a*g-c*i,2*y<=c?A=2*m*y+m*(1-c)+y*(1-i):A=m*(1+c)+y*(1+i)-2*y*m-c*i}function yt(){var q,K=Math.pow;if(c===0){_=l,T=g,A=m;return}q=s/c,2*l<=i?_=s*(i+(2*l-i)*(1-q))+l*(1-c)+s*(1-i):2*l>i&&4*s<=c?_=c*(2*l-i)*(16*K(q,3)-12*K(q,2)-3*q)+l-l*c+s:2*l>i&&4*s>c&&(_=c*(2*l-i)*(K(q,.5)-q)+l-l*c+s),q=a/c,2*g<=i?T=a*(i+(2*g-i)*(1-q))+g*(1-c)+a*(1-i):2*g>i&&4*a<=c?T=c*(2*g-i)*(16*K(q,3)-12*K(q,2)-3*q)+g-g*c+a:2*g>i&&4*a>c&&(T=c*(2*g-i)*(K(q,.5)-q)+g-g*c+a),q=y/c,2*m<=i?A=y*(i+(2*m-i)*(1-q))+m*(1-c)+y*(1-i):2*m>i&&4*y<=c?A=c*(2*m-i)*(16*K(q,3)-12*K(q,2)-3*q)+m-m*c+y:2*m>i&&4*y>c&&(A=c*(2*m-i)*(K(q,.5)-q)+m-m*c+y)}function xt(){2*l<=i?_=2*l*s+l*(1-c)+s*(1-i):_=l*(1+c)+s*(1+i)-i*c-2*l*s,2*g<=i?T=2*g*a+g*(1-c)+a*(1-i):T=g*(1+c)+a*(1+i)-i*c-2*g*a,2*m<=i?A=2*m*y+m*(1-c)+y*(1-i):A=m*(1+c)+y*(1+i)-i*c-2*m*y}function Ct(){if(c===0){_=l,T=g,A=m;return}l===i&&s===0?_=l*(1-c):l===i?_=i*c+l*(1-c)+s*(1-i):l<i&&(_=i*c*Y(1,s/c*i/(i-l))+l*(1-c)+s*(1-i)),g===i&&a===0?T=g*(1-c):l===i?T=i*c+g*(1-c)+a*(1-i):l<i&&(T=i*c*Y(1,a/c*i/(i-g))+g*(1-c)+a*(1-i)),m===i&&y===0?A=m*(1-c):l===i?A=i*c+m*(1-c)+y*(1-i):l<i&&(A=i*c*Y(1,y/c*i/(i-m))+m*(1-c)+y*(1-i))}function vt(){if(c===0){_=l,T=g,A=m;return}l===0&&s===c?_=i*c+s*(1-i):l===0?_=s*(1-i):l>0&&(_=i*c*(1-Y(1,(1-s/c)*i/l))+l*(1-c)+s*(1-i)),g===0&&a===c?T=i*c+a*(1-i):g===0?T=a*(1-i):g>0&&(T=i*c*(1-Y(1,(1-a/c)*i/g))+g*(1-c)+a*(1-i)),m===0&&y===c?A=i*c+y*(1-i):m===0?A=y*(1-i):m>0&&(A=i*c*(1-Y(1,(1-y/c)*i/m))+m*(1-c)+y*(1-i))}function gt(){var q=2*l+s-256,K=2*g+a-256,nt=2*m+y-256;_=q<0||l<128&&q<0?0:q>255?255:q,T=K<0||g<128&&K<0?0:K>255?255:K,A=nt<0||m<128&&nt<0?0:nt>255?255:nt}function wt(){var q;l<128?l?(q=255-(255-s<<8)/(2*l),_=q<0?0:q):_=0:(q=2*l-256,q<255?(q=(s<<8)/(255-q),_=q>255?255:q):_=q<0?0:q),g<128?g?(q=255-(255-a<<8)/(2*g),T=q<0?0:q):T=0:(q=2*g-256,q<255?(q=(a<<8)/(255-q),T=q>255?255:q):T=q<0?0:q),m<128?m?(q=255-(255-y<<8)/(2*m),A=q<0?0:q):A=0:(q=2*m-256,q<255?(q=(y<<8)/(255-q),A=q>255?255:q):A=q<0?0:q)}function bt(){var q;l<128?(q=2*l,_=s<q?s:q):(q=2*l-256,_=s>q?s:q),g<128?(q=2*g,T=a<q?a:q):(q=2*g-256,T=a>q?a:q),m<128?(q=2*m,A=y<q?y:q):(q=2*m-256,A=y>q?y:q)}function Mt(){var q;l<128?_=255-(255-s<<8)/(2*l)<128||l===0?0:255:(q=2*l-256,_=q<255&&(s<<8)/(255-q)<128?0:255),g<128?T=255-(255-a<<8)/(2*g)<128||g===0?0:255:(q=2*g-256,T=q<255&&(a<<8)/(255-q)<128?0:255),m<128?A=255-(255-y<<8)/(2*m)<128||m===0?0:255:(q=2*m-256,A=q<255&&(y<<8)/(255-q)<128?0:255)}function Ut(){var q=H(s,a,y),K=H(l,g,m),nt=J(K[0],q[1],q[2]);_=nt[0],T=nt[1],A=nt[2]}function Ht(){var q=H(s,a,y),K=H(l,g,m),nt=J(q[0],K[1],q[2]);_=nt[0],T=nt[1],A=nt[2]}function Gt(){var q=H(s,a,y),K=H(l,g,m),nt=J(q[0],q[1],K[2]);_=nt[0],T=nt[1],A=nt[2]}function St(){var q=H(s,a,y),K=H(l,g,m),nt=J(K[0],K[1],q[2]);_=nt[0],T=nt[1],A=nt[2]}O={"source-over":D,multiply:M,subtract:X,divide:R,screen:G,lighten:rt,darken:j,"darker-color":$,"lighter-color":tt,add:z,"linear-burn":ot,difference:it,exclusion:ct,overlay:st,"soft-light":yt,"hard-light":xt,"color-dodge":Ct,"color-burn":vt,"linear-light":gt,"vivid-light":wt,"pin-light":bt,"hard-mix":Mt,hue:Ut,saturation:Ht,luminosity:Gt,color:St};function qt(q,K){var nt=q.x+q.width,ut=q.y+q.height,at=K.x+K.width,dt=K.y+K.height,mt=N(q.x,K.x),It=N(q.y,K.y),Nt=N(Y(nt,at)-mt,0),Pt=N(Y(ut,dt)-It,0);return[mt,It,Nt,Pt]}(function(){var q,K,nt,ut,at,dt,mt,It,Nt,Pt=w.data,Ft=w.opacity===0?0:w.opacity||1,Yt=O[w.type||"_svg_normal"],Xt=w.dx||0,Lt=w.dy||0,At=qt({x:0,y:0,width:b,height:C},{x:Xt,y:Lt,width:w.width,height:w.height}),kt=At[0],Bt=At[1],Ot=At[2],Wt=At[3];function se(){i=Pt[K+3]/255*Ft,c=u[q+3]/255,mt=i+c-i*c,It=255/mt,l=Pt[K]/255*i,g=Pt[K+1]/255*i,m=Pt[K+2]/255*i,s=u[q]/255*c,a=u[q+1]/255*c,y=u[q+2]/255*c,Yt(),x[q]=_*It,x[q+1]=T*It,x[q+2]=A*It,x[q+3]=mt*255}function oe(){s=u[q],a=u[q+1],y=u[q+2],l=Pt[K],g=Pt[K+1],m=Pt[K+2],Yt(),x[q]=_,x[q+1]=T,x[q+2]=A,x[q+3]=u[q+3],at=Ft*Pt[K+3]/255,at<1&&(dt=1-at,x[q]=u[q]*dt+x[q]*at,x[q+1]=u[q+1]*dt+x[q+1]*at,x[q+2]=u[q+2]*dt+x[q+2]*at)}for(Nt=Yt.name.indexOf("_svg_")===0?se:oe,ut=0;ut<C;ut+=1)for(nt=0;nt<b;nt+=1)q=(ut*b+nt)*4,ut>=Bt&&nt>=kt&&nt<kt+Ot&&ut<Bt+Wt?(K=((ut-Lt)*w.width+nt-Xt)*4,Nt()):(x[q]=u[q],x[q+1]=u[q+1],x[q+2]=u[q+2],x[q+3]=u[q+3])})()};function d(u,x,b,C,w){r(u,x,b,C,w)}function h(u){return function(x,b,C,w,O){O.type=u,d(x,b,C,w,O)}}return S=function(){for(var u,x={blend:d},b=["source-over","add","multiply","subtract","divide","screen","lighten","darken","darker-color","lighter-color","linear-burn","difference","exclusion","overlay","soft-light","hard-light","color-dodge","color-burn","linear-light","vivid-light","pin-light","hard-mix","hue","saturation","luminosity","color"],C=0;C<b.length;C+=1)u=b[C],x[u]=h(u);for(b=Object.keys(b),C=0;C<b.length;C+=1);return p(x),x.getNativeModes=o,x.realBlendMode=I,x}(),Oe=S,Oe}/*!
 * Image processing based on Pixastic library:
 *
 * Pixastic - JavaScript Image Processing
 * http://pixastic.com/
 * Copyright 2012, Jacob Seidelin
 *
 * Dual licensed under the MPL 1.1 or GPLv3 licenses.
 * http://pixastic.com/license-mpl.txt
 * http://pixastic.com/license-gpl-3.0.txt
 *
 */var Ee,xr;function qr(){if(xr)return Ee;xr=1;var S=Bn(),r=Ge(),P=r.clamp,p="ITU-R BT.601",I="ITU-R BT.709";function o(l,g){if(!l)return g;var m,i={};for(m in g)g.hasOwnProperty(m)&&(typeof l[m]>"u"?i[m]=g[m]:i[m]=l[m]);return i}function d(l,g,m){return m<l?0:m>=g?1:(m=(m-l)/(g-l),m*m*(3-2*m))}function h(l,g,m,i,s,a,y,c){var _,T,A,N,Y,F,W,U,H,J,D,M,X,R=s[0][0],G=s[0][1],rt=s[0][2],j=s[1][0],$=s[1][1],tt=s[1][2],z=s[2][0],ot=s[2][1],it=s[2][2],ct,st,yt,xt,Ct,vt,gt,wt,bt;for(T=0;T<i;T+=1)for(U=T*m*4,H=U-m*4,J=U+m*4,T<1&&(H=U),T>=m-1&&(J=U),_=0;_<m;_+=1)A=(T*m+_)*4,D=_*4,M=D-4,X=D+4,_<1&&(M=D),_>=m-1&&(X=D),ct=H+M,st=H+D,yt=H+X,xt=U+M,Ct=U+D,vt=U+X,gt=J+M,wt=J+D,bt=J+X,N=l[ct]*R+l[st]*G+l[yt]*rt+l[xt]*j+l[Ct]*$+l[vt]*tt+l[gt]*z+l[wt]*ot+l[bt]*it,Y=l[ct+1]*R+l[st+1]*G+l[yt+1]*rt+l[xt+1]*j+l[Ct+1]*$+l[vt+1]*tt+l[gt+1]*z+l[wt+1]*ot+l[bt+1]*it,F=l[ct+2]*R+l[st+2]*G+l[yt+2]*rt+l[xt+2]*j+l[Ct+2]*$+l[vt+2]*tt+l[gt+2]*z+l[wt+2]*ot+l[bt+2]*it,a?W=l[ct+3]*R+l[st+3]*G+l[yt+3]*rt+l[xt+3]*j+l[Ct+3]*$+l[vt+3]*tt+l[gt+3]*z+l[wt+3]*ot+l[bt+3]*it:W=l[A+3],c&&(N=Y=F=(N+Y+F)/3),y&&(N=255-N,Y=255-Y,F=255-F),g[A]=N,g[A+1]=Y,g[A+2]=F,g[A+3]=W}function u(l,g,m,i,s,a,y,c){var _,T,A,N,Y,F,W,U,H,J,D,M,X,R,G,rt,j=s[0][0],$=s[0][1],tt=s[0][2];s[0][3];var z=s[0][4],ot=s[1][0],it=s[1][1],ct=s[1][2];s[1][3];var st=s[1][4],yt=s[2][0],xt=s[2][1],Ct=s[2][2];s[2][3];var vt=s[2][4],gt=s[3][0],wt=s[3][1],bt=s[3][2];s[3][3];var Mt=s[3][4],Ut=s[4][0],Ht=s[4][1],Gt=s[4][2];s[4][3];var St=s[4][4],qt,q,K,nt,ut,at,dt,mt,It,Nt,Pt,Ft,Yt,Xt,Lt,At,kt,Bt,Ot,Wt;for(T=0;T<i;T+=1)for(U=T*m*4,H=U-m*4,D=U-m*4*2,J=U+m*4,M=U+m*4*2,T<1&&(H=U),T>=m-1&&(J=U),T<2&&(D=H),T>=m-2&&(M=J),_=0;_<m;_+=1)A=(T*m+_)*4,X=_*4,R=X-4,G=X+4,rt=X-8,_<1&&(R=X),_>=m-1&&(G=X),_<2&&(rt=R),qt=D+rt,q=D+R,K=D+X,nt=D+G,ut=H+rt,at=H+R,dt=H+X,mt=H+G,It=U+rt,Nt=U+R,Pt=U+X,Ft=U+G,Yt=J+rt,Xt=J+R,Lt=J+X,At=J+G,kt=M+rt,Bt=M+R,Ot=M+X,Wt=M+G,N=l[qt]*j+l[q]*$+l[K]*tt+l[nt]*z+l[K]*z+l[ut]*ot+l[at]*it+l[dt]*ct+l[mt]*st+l[dt]*st+l[It]*yt+l[Nt]*xt+l[Pt]*Ct+l[Ft]*vt+l[Pt]*vt+l[Yt]*gt+l[Xt]*wt+l[Lt]*bt+l[At]*Mt+l[Lt]*Mt+l[kt]*Ut+l[Bt]*Ht+l[Ot]*Gt+l[Wt]*St+l[Ot]*St,Y=l[qt+1]*j+l[q+1]*$+l[K+1]*tt+l[nt+1]*z+l[K+1]*z+l[ut+1]*ot+l[at+1]*it+l[dt+1]*ct+l[mt+1]*st+l[dt+1]*st+l[It+1]*yt+l[Nt+1]*xt+l[Pt+1]*Ct+l[Ft+1]*vt+l[Pt+1]*vt+l[Yt+1]*gt+l[Xt+1]*wt+l[Lt+1]*bt+l[At+1]*Mt+l[Lt+1]*Mt+l[kt+1]*Ut+l[Bt+1]*Ht+l[Ot+1]*Gt+l[Wt+1]*St+l[Ot+1]*St,F=l[qt+2]*j+l[q+2]*$+l[K+2]*tt+l[nt+2]*z+l[K+2]*z+l[ut+2]*ot+l[at+2]*it+l[dt+2]*ct+l[mt+2]*st+l[dt+2]*st+l[It+2]*yt+l[Nt+2]*xt+l[Pt+2]*Ct+l[Ft+2]*vt+l[Pt+2]*vt+l[Yt+2]*gt+l[Xt+2]*wt+l[Lt+2]*bt+l[At+2]*Mt+l[Lt+2]*Mt+l[kt+2]*Ut+l[Bt+2]*Ht+l[Ot+2]*Gt+l[Wt+2]*St+l[Ot+2]*St,a?W=l[qt+3]*j+l[q+3]*$+l[K+3]*tt+l[nt+3]*z+l[K+3]*z+l[ut+3]*ot+l[at+3]*it+l[dt+3]*ct+l[mt+3]*st+l[dt+3]*st+l[It+3]*yt+l[Nt+3]*xt+l[Pt+3]*Ct+l[Ft+3]*vt+l[Pt+3]*vt+l[Yt+3]*gt+l[Xt+3]*wt+l[Lt+3]*bt+l[At+3]*Mt+l[Lt+3]*Mt+l[kt+3]*Ut+l[Bt+3]*Ht+l[Ot+3]*Gt+l[Wt+3]*St+l[Ot+3]*St:W=l[A+3],c&&(N=Y=F=(N+Y+F)/3),y&&(N=255-N,Y=255-Y,F=255-F),g[A]=N,g[A+1]=Y,g[A+2]=F,g[A+3]=W}function x(l,g,m,i,s){var a,y,c,_,T,A,N,Y,F,W,U,H,J=[],D=13,M,X,R,G=[[1]];for(s=P(s,3,D),M=-s/2+(s%2?.5:0),X=s+M,c=1;c<D;c+=1)G[0][c]=0;for(c=1;c<D;c+=1)for(G[c]=[1],_=1;_<D;_+=1)G[c][_]=G[c-1][_]+G[c-1][_-1];for(R=G[s-1],c=0,H=0;c<s;c+=1)H+=R[c];for(c=0;c<s;c+=1)R[c]/=H;for(y=0;y<i;y+=1)for(a=0;a<m;a+=1){for(T=A=N=Y=0,c=M;c<X;c+=1)W=a+c,U=y,H=R[c-M],W<0&&(W=0),W>=m&&(W=m-1),F=(U*m+W)*4,T+=l[F]*H,A+=l[F+1]*H,N+=l[F+2]*H,Y+=l[F+3]*H;F=(y*m+a)*4,J[F]=T,J[F+1]=A,J[F+2]=N,J[F+3]=Y}for(y=0;y<i;y+=1)for(a=0;a<m;a+=1){for(T=A=N=Y=0,c=M;c<X;c+=1)W=a,U=y+c,H=R[c-M],U<0&&(U=0),U>=i&&(U=i-1),F=(U*m+W)*4,T+=J[F]*H,A+=J[F+1]*H,N+=J[F+2]*H,Y+=J[F+3]*H;F=(y*m+a)*4,g[F]=T,g[F+1]=A,g[F+2]=N,g[F+3]=Y}}function b(l,g){return g*=4,[l[g+0],l[g+1],l[g+2],l[g+3]]}function C(l,g,m){g*=4,l[g+0]=m[0],l[g+1]=m[1],l[g+2]=m[2],l[g+3]=m[3]}function w(l,g,m,i,s,a,y){m=s/2+(m||0),i=a/2+(i||0);var c,_,T,A,N,Y,F;for(c=0;c<a;c+=1)for(_=0;_<s;_+=1)T=_-m,A=c-i,N=Math.sqrt(Math.pow(T,2)+Math.pow(A,2)),Y=Math.atan2(A,T),F=y(N,Y),N=F[0],Y=F[1],C(g,_+c*s,b(l,Math.round(m+Math.cos(Y)*N)+Math.round(i+Math.sin(Y)*N)*s))}var O={invert:function(l,g,m,i){var s,a=m*i*4;for(s=0;s<a;s+=4)g[s]=255-l[s],g[s+1]=255-l[s+1],g[s+2]=255-l[s+2],g[s+3]=l[s+3]},sepia:function(l,g,m,i){var s,a=m*i*4,y,c,_;for(s=0;s<a;s+=4)y=l[s],c=l[s+1],_=l[s+2],g[s]=y*.393+c*.769+_*.189,g[s+1]=y*.349+c*.686+_*.168,g[s+2]=y*.272+c*.534+_*.131,g[s+3]=l[s+3]},solarize:function(l,g,m,i){var s,a=m*i*4,y,c,_;for(s=0;s<a;s+=4)y=l[s],c=l[s+1],_=l[s+2],g[s]=y>127?255-y:y,g[s+1]=c>127?255-c:c,g[s+2]=_>127?255-_:_,g[s+3]=l[s+3]},brightness:function(l,g,m,i,s){s=o(s,{brightness:1,contrast:0});var a,y=m*i*4,c,_,T,A=P(s.contrast,-1,1)/2,N=1+P(s.brightness,-1,1),Y=N<0?-N:N,F=N<0?0:N,W;for(A=.5*Math.tan((A+1)*Math.PI/4),W=-(A-.5)*255,a=0;a<y;a+=4)c=l[a],_=l[a+1],T=l[a+2],c=(c+c*Y+F)*A+W,_=(_+_*Y+F)*A+W,T=(T+T*Y+F)*A+W,g[a]=c,g[a+1]=_,g[a+2]=T,g[a+3]=l[a+3]},desaturate:function(l,g,m,i,s){s=o(s,{method:p});var a,y=m*i*4,c,_,T,A;for(s.method===p?(_=.3,T=.59,A=.11):s.method===I&&(_=.2125,T=.7154,A=.0721),a=0;a<y;a+=4)c=l[a]*_+l[a+1]*T+l[a+2]*A,g[a]=c,g[a+1]=c,g[a+2]=c,g[a+3]=l[a+3]},lighten:function(l,g,m,i,s){s=o(s,{amount:.25});var a,y=m*i*4,c=1+P(s.amount,0,1);for(a=0;a<y;a+=4)g[a]=l[a]*c,g[a+1]=l[a+1]*c,g[a+2]=l[a+2]*c,g[a+3]=l[a+3]},noise:function(l,g,m,i,s){s=o(s,{amount:.5,strength:.5,mono:!1});var a,y=m*i*4,c,_,T,A,N=P(s.amount,0,1),Y=P(s.strength,0,1),F=!!s.mono,W=Math.random;for(a=0;a<y;a+=4)_=l[a],T=l[a+1],A=l[a+2],c=W(),c<N&&(F?(c=Y*(c/N*2-1)*255,_+=c,T+=c,A+=c):(_+=Y*W()*255,T+=Y*W()*255,A+=Y*W()*255)),g[a]=_,g[a+1]=T,g[a+2]=A,g[a+3]=l[a+3]},flipv:function(l,g,m,i){var s,a,y,c;for(a=0;a<i;a+=1)for(s=0;s<m;s+=1)y=(a*m+s)*4,c=(a*m+(m-s-1))*4,g[c]=l[y],g[c+1]=l[y+1],g[c+2]=l[y+2],g[c+3]=l[y+3]},fliph:function(l,g,m,i){var s,a,y,c;for(a=0;a<i;a+=1)for(s=0;s<m;s+=1)y=(a*m+s)*4,c=((i-a-1)*m+s)*4,g[c]=l[y],g[c+1]=l[y+1],g[c+2]=l[y+2],g[c+3]=l[y+3]},blur:function(l,g,m,i,s){s=o(s,{radius:10});for(var a=0;a<l.length;a+=1)g[a]=l[a];S(g,m,i,s.radius)},glow:function(l,g,m,i,s){s=o(s,{amount:.75,kernelSize:5});var a,y=m*i*4,c,_,T,A=s.amount,N=[];for(x(l,N,m,i,s.kernelSize),a=0;a<y;a+=4)c=l[a]+N[a]*A,_=l[a+1]+N[a+1]*A,T=l[a+2]+N[a+2]*A,c>255&&(c=255),_>255&&(_=255),T>255&&(T=255),g[a]=c,g[a+1]=_,g[a+2]=T,g[a+3]=l[a+3]},convolve3x3:function(l,g,m,i,s){h(l,g,m,i,s.kernel)},convolve5x5:function(l,g,m,i,s){u(l,g,m,i,s.kernel)},sharpen3x3:function(l,g,m,i,s){s=o(s,{strength:1});var a=-P(s.strength,0,1);h(l,g,m,i,[[a,a,a],[a,1-a*8,a],[a,a,a]])},sharpen5x5:function(l,g,m,i,s){s=o(s,{strength:1});var a=-P(s.strength,0,1);u(l,g,m,i,[[a,a,a,a,a],[a,a,a,a,a],[a,a,1-a*24,a,a],[a,a,a,a,a],[a,a,a,a,a]])},soften3x3:function(l,g,m,i){var s=.1111111111111111;h(l,g,m,i,[[s,s,s],[s,s,s],[s,s,s]])},soften5x5:function(l,g,m,i){var s=.04;u(l,g,m,i,[[s,s,s,s,s],[s,s,s,s,s],[s,s,s,s,s],[s,s,s,s,s],[s,s,s,s,s]])},crossedges:function(l,g,m,i,s){s=o(s,{strength:1});var a=P(s.strength,0,1)*5;h(l,g,m,i,[[0,-a,0],[-a,0,a],[0,a,0]],!1,!0)},emboss:function(l,g,m,i,s){s=o(s,{amount:1,angle:0});var a,y=m*i*4,c=s.amount,_=s.angle,T=Math.cos(-_)*c,A=Math.sin(-_)*c,N=-T-A,Y=-T,F=A-T,W=-A,U=A,H=-A+T,J=T,D=A+T,M=[];for(h(l,M,m,i,[[N,W,H],[Y,0,J],[F,U,D]]),a=0;a<y;a+=4)g[a]=128+M[a],g[a+1]=128+M[a+1],g[a+2]=128+M[a+2],g[a+3]=l[a+3]},findedges:function(l,g,m,i){var s,a=m*i*4,y,c,_,T,A,N,Y=[],F=[];for(h(l,Y,m,i,[[-1,0,1],[-2,0,2],[-1,0,1]]),h(l,F,m,i,[[-1,-2,-1],[0,0,0],[1,2,1]]),s=0;s<a;s+=4)y=Y[s],c=F[s],_=Y[s+1],T=F[s+1],A=Y[s+2],N=F[s+2],y<0&&(y=-y),c<0&&(c=-c),_<0&&(_=-_),T<0&&(T=-T),A<0&&(A=-A),N<0&&(N=-N),g[s]=255-(y+c)*.8,g[s+1]=255-(_+T)*.8,g[s+2]=255-(A+N)*.8,g[s+3]=l[s+3]},edgeenhance3x3:function(l,g,m,i){var s=-.1111111111111111;h(l,g,m,i,[[s,s,s],[s,17/9,s],[s,s,s]])},edgeenhance5x5:function(l,g,m,i){var s=-.04;u(l,g,m,i,[[s,s,s,s,s],[s,s,s,s,s],[s,s,49/25,s,s],[s,s,s,s,s],[s,s,s,s,s]])},laplace3x3:function(l,g,m,i){h(l,g,m,i,[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],!1,!0,!0)},laplace5x5:function(l,g,m,i){u(l,g,m,i,[[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,24,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1]],!1,!0,!0)},rgbAdjust:function(l,g,m,i,s){s=o(s,{r:0,g:0,b:0,a:0});var a,y=m*i*4,c,_,T,A,N=P(s.r,-1,1)*255,Y=P(s.g,-1,1)*255,F=P(s.b,-1,1)*255,W=P(s.a,-1,1)*255;for(a=0;a<y;a+=4)c=l[a]+N,_=l[a+1]+Y,T=l[a+2]+F,A=l[a+3]+W,c<0&&(c=0),_<0&&(_=0),T<0&&(T=0),A<0&&(A=0),c>255&&(c=255),_>255&&(_=255),T>255&&(T=255),A>255&&(A=255),g[a]=c,g[a+1]=_,g[a+2]=T,g[a+3]=A},colorfilter:function(l,g,m,i,s){s=o(s,{luminosity:!1,r:1,g:.5,b:0});var a,y=m*i*4,c,_,T,A=!!s.luminosity,N,Y,F,W,U,H,J,D=P(s.r,0,1),M=P(s.g,0,1),X=P(s.b,0,1);for(a=0;a<y;a+=4)c=l[a]/255,_=l[a+1]/255,T=l[a+2]/255,W=c*.3+_*.59+T*.11,c=(c+c*D)/2,_=(_+_*M)/2,T=(T+T*X)/2,A&&(N=Y=c,_>Y&&(Y=_),T>Y&&(Y=T),_<N&&(N=_),T<N&&(N=T),H=Y-N,c===Y?F=(_-T)/H%6:_===Y?F=(T-c)/H+2:F=(c-_)/H+4,U=F>>0,J=H*(F-U),c=_=T=W-(c*.3+_*.59+T*.11),U===0?(c+=H,_+=J):U===1?(c+=H-J,_+=H):U===2?(_+=H,T+=J):U===3?(_+=H-J,T+=H):U===4?(c+=J,T+=H):U===5&&(c+=H,T+=H-J)),g[a]=c*255,g[a+1]=_*255,g[a+2]=T*255,g[a+3]=l[a+3]},hslAdjust:function(l,g,m,i,s){s=o(s,{h:.5,s:.3,l:.1,a:0});var a,y=m*i*4,c,_,T,A,N=P(s.h,-1,1),Y=P(s.s,-1,1),F=P(s.l,-1,1),W=P(s.a,-1,1)*255,U=1+Y*(Y<0?1:2),H=F<0?1+F:1-F,J=F<0?0:F*255,D,M,X,R,G,rt,j,$,tt,z;for(N=N*6%6,a=0;a<y;a+=4)c=l[a],_=l[a+1],T=l[a+2],A=l[a+3]+W,(N!==0||Y!==0)&&(D=c,_>D&&(D=_),T>D&&(D=T),M=c,_<M&&(M=_),T<M&&(M=T),X=D-M,rt=(M+D)/510,rt>0&&X>0&&(rt<=.5?(G=X/(D+M)*U,G>1&&(G=1),j=rt*(1+G)):(G=X/(510-D-M)*U,G>1&&(G=1),j=rt+G-rt*G),c===D?_===M?R=5+(D-T)/X+N:R=1-(D-_)/X+N:_===D?T===M?R=1+(D-c)/X+N:R=3-(D-T)/X+N:c===M?R=3+(D-_)/X+N:R=5-(D-c)/X+N,R<0&&(R+=6),R>=6&&(R-=6),$=rt+rt-j,z=R>>0,tt=(j-$)*(R-z),z===0?(c=j,_=$+tt,T=$):z===1?(c=j-tt,_=j,T=$):z===2?(c=$,_=j,T=$+tt):z===3?(c=$,_=j-tt,T=j):z===4?(c=$+tt,_=$,T=j):z===5&&(c=j,_=$,T=j-tt),c*=255,_*=255,T*=255)),c=c*H+J,_=_*H+J,T=T*H+J,c<0&&(c=0),_<0&&(_=0),T<0&&(T=0),A<0&&(A=0),c>255&&(c=255),_>255&&(_=255),T>255&&(T=255),A>255&&(A=255),g[a]=c,g[a+1]=_,g[a+2]=T,g[a+3]=A},posterize:function(l,g,m,i,s){s=o(s,{levels:5});var a,y=m*i*4,c=P(s.levels,2,256),_=256/c,T=256/(c-1);for(a=0;a<y;a+=4)g[a]=T*(l[a]/_>>0),g[a+1]=T*(l[a+1]/_>>0),g[a+2]=T*(l[a+2]/_>>0),g[a+3]=l[a+3]},removenoise:function(l,g,m,i){var s,a,y,c,_,T,A,N,Y,F,W,U,H,J,D,M,X,R,G;for(a=0;a<i;a+=1)for(N=a*m*4,Y=N-m*4,F=N+m*4,a<1&&(Y=N),a>=m-1&&(F=N),s=0;s<m;s+=1)A=(a*m+s)*4,W=s*4,U=W-4,H=W+4,s<1&&(U=W),s>=m-1&&(H=W),J=X=l[N+U],T=l[N+H],T<J&&(J=T),T>X&&(X=T),T=l[Y+W],T<J&&(J=T),T>X&&(X=T),T=l[F+W],T<J&&(J=T),T>X&&(X=T),D=l[N+U+1],T=l[N+H+1],T<D&&(D=T),T=l[Y+W+1],T<D&&(D=T),T=l[F+W+1],T<D&&(D=T),M=l[N+U+2],T=l[N+H+2],T<M&&(M=T),T=l[Y+W+2],T<M&&(M=T),T=l[F+W+2],T<M&&(M=T),y=l[A],c=l[A+1],_=l[A+2],y<J&&(y=J),y>X&&(y=X),c<D&&(c=D),c>R&&(c=R),_<M&&(_=M),_>G&&(_=G),g[A]=y,g[A+1]=c,g[A+2]=_,g[A+3]=l[A+3]},mosaic:function(l,g,m,i,s){s=o(s,{blockSize:8});var a=P(s.blockSize,1,Math.max(m,i)),y=Math.ceil(i/a),c=Math.ceil(m/a),_,T,A,N,Y,F,W,U,H,J,D,M,X;for(_=0,W=0;W<y;W+=1){for(T=P(_+a,0,i),A=0,U=0;U<c;U+=1){for(N=P(A+a,0,m),Y=_*m+A<<2,H=l[Y],J=l[Y+1],D=l[Y+2],M=_;M<T;M+=1)for(X=A;X<N;X+=1)F=M*m+X<<2,g[F]=H,g[F+1]=J,g[F+2]=D,g[F+3]=l[F+3];A=N}_=T}},equalize:function(l,g,m,i,s){var a=m*i,y,c,_,T,A=Math.round,N=new Array(256);for(c=0;c<256;c+=1)N[c]=0;for(c=0;c<a;c+=1)y=c*4,_=P(A(l[y]*.3+l[y+1]*.59+l[y+2]*.11),0,255),g[y+3]=_,N[_]+=1;var Y=new Array(256);for(Y[0]=N[0],c=1;c<256;c+=1)Y[c]=Y[c-1]+N[c];for(c=0;c<256;c+=1)Y[c]=Y[c]/a*255;for(c=0;c<a;c+=1)y=c*4,_=g[y+3],T=Y[_]/(_||1),g[y]=P(A(l[y]*T),0,255),g[y+1]=P(A(l[y+1]*T),0,255),g[y+2]=P(A(l[y+2]*T),0,255),g[y+3]=l[y+3]},mask:function(l,g,m,i,s){var a,y=m*i*4,c=s.data;for(a=0;a<y;a+=4)g[a]=l[a],g[a+1]=l[a+1],g[a+2]=l[a+2],g[a+3]=l[a+3]*c[a]/255*c[a+3]/255},bump:function(l,g,m,i,s){s=o(s,{dx:0,dy:0,radius:0,zoom:0});var a=s.radius,y=P(s.zoom,0,1);return w(l,g,s.dx,s.dy,m,i,function(c,_){return[c*d(0,y,c/a),_]})},dent:function(l,g,m,i,s){s=o(s,{dx:0,dy:0,radius:0,zoom:0});var a=s.radius,y=P(s.zoom,0,1);return w(l,g,s.dx,s.dy,m,i,function(c,_){return[2*c-c*d(0,y,c/a),_]})},pinch:function(l,g,m,i,s){s=o(s,{dx:0,dy:0,zoom:0});var a=r.distance(0,0,m,i),y=P(s.zoom*.75,-.75,.75);return w(l,g,s.dx,s.dy,m,i,function(c,_){return[c*Math.pow(a/c,y)*(1-y),_]})},splash:function(l,g,m,i,s){s=o(s,{dx:0,dy:0,radius:0});var a=s.radius;return w(l,g,s.dx,s.dy,m,i,function(y,c){return[y>a?a:y,c]})},twirl:function(l,g,m,i,s){s=o(s,{dx:0,dy:0,radius:0,angle:0});var a=r.radians(s.angle),y=s.radius;return w(l,g,s.dx,s.dy,m,i,function(c,_){return[c,_+(1-d(-y,y,c))*a]})}};return Ee=O,Ee}var Me,Cr;function Wr(){if(Cr)return Me;Cr=1;var S=Jn(),r=qr(),P=Ge(),p=S.getNativeModes();function I(C,w,O){return C.createImageData?C.createImageData(w,O):C.getImageData(0,0,w,O)}var o={};o.toImage=function(C){var w=new Image;return w.width=C.width,w.height=C.height,w.src=C.toDataURL(),w},o.load=function(C,w){if(w.isFill())return o.generateColor(C,w);if(w.isGradient())return o.generateGradient(C,w);if(w.isHtmlCanvas())return o.loadHtmlCanvas(w.data);if(w.isImage())return o.loadImage(w.data);if(w.isImageCanvas())return o.loadImageCanvas(w.data)},o.loadHtmlCanvas=function(C){return C},o.loadImageCanvas=function(C){return C.render()},o.loadImage=function(C){var w=document.createElement("canvas"),O=w.getContext("2d");return w.width=C.width,w.height=C.height,O.drawImage(C,0,0,w.width,w.height),w},o.generateColor=function(C,w){var O=w.width!==void 0?w.width:C.width,l=w.height!==void 0?w.height:C.height,g=document.createElement("canvas"),m=g.getContext("2d");return g.width=O,g.height=l,m.fillStyle=w.data,m.fillRect(0,0,O,l),g},o.generateGradient=function(C,w){var O,l,g,m,i,s=w.width!==void 0?w.width:C.width,a=w.height!==void 0?w.height:C.height,y=s/2,c=a/2,_=document.createElement("canvas"),T=_.getContext("2d"),A=w.data,N=A.type||"linear",Y=A.rotation||0;return N==="radial"?O=T.createRadialGradient(y,c,0,y,c,Math.min(s,a)/2):(Y<0&&(Y+=360),0<=Y&&Y<45?(l=0,g=a/2*(45-Y)/45,m=s,i=a-g):45<=Y&&Y<135?(l=s*(Y-45)/90,g=0,m=s-l,i=a):135<=Y&&Y<225?(l=s,g=a*(Y-135)/90,m=0,i=a-g):225<=Y&&Y<315?(l=s*(1-(Y-225)/90),g=a,m=s-l,i=0):315<=Y&&(l=0,g=a-a/2*(Y-315)/45,m=s,i=a-g),O=T.createLinearGradient(l,g,m,i)),O.addColorStop(A.spread||0,A.startColor),O.addColorStop(1,A.endColor),_.width=s,_.height=a,T.fillStyle=O,T.fillRect(0,0,s,a),_},o.processImage=function(C,w){if(w.length===0)return C;for(var O,l,g=C.getContext("2d"),m=C.width,i=C.height,s=g.getImageData(0,0,m,i),a=I(g,m,i),y=0;y<w.length;y+=1)y>0&&(l=s,s=a,a=l),O=w[y],r[O.name](s.data,a.data,m,i,O.options);return g.putImageData(a,0,0),C},o.processMask=function(C,w){if(w.layers.length===0)return C;w.width=C.width,w.height=C.height;var O=o.renderBW(w),l=O.getContext("2d").getImageData(0,0,O.width,O.height).data,g={name:"mask",options:{data:l,x:0,y:0,width:O.width,height:O.height}};return o.processImage(C,[g])},o.processLayer=function(C,w){var O=o.load(C,w),l=o.processMask(O,w.mask);return o.processImage(l,w.filters)};function d(C,w,O){var l=O.transform.matrix();C.translate(w.width/2,w.height/2),C.transform(l[0],l[1],l[3],l[4],l[6],l[7]),(O.flip_h||O.flip_v)&&C.scale(O.flip_h?-1:1,O.flip_v?-1:1),C.translate(-O.img.width/2,-O.img.height/2)}function h(C,w){var O,l,g,m,i,s=w.img.width,a=w.img.height,y={x:0,y:0},c={x:s,y:0},_={x:0,y:a},T={x:s,y:a},A=[y,c,_,T],N=P.transform();N=N.translate(C.width/2,C.height/2),N=N.append(w.transform),N=N.translate(-w.img.width/2,-w.img.height/2);for(var Y=0;Y<4;Y+=1)O=N.transformPoint(A[Y]),Y===0?(l=m=O.x,g=i=O.y):(O.x<l&&(l=O.x),O.x>m&&(m=O.x),O.y<g&&(g=O.y),O.y>i&&(i=O.y));return{x:l,y:g,width:m-l,height:i-g}}function u(C,w){var O=C.x+C.width,l=C.y+C.height,g=w.x+w.width,m=w.y+w.height,i=Math.max(C.x,w.x),s=Math.max(C.y,w.y),a=Math.max(Math.min(O,g)-i,0),y=Math.max(Math.min(l,m)-s,0);return{x:i,y:s,width:a,height:y}}function x(C,w){var O=h(C,w);return O=u(O,{x:0,y:0,width:C.width,height:C.height}),{x:Math.round(O.x),y:Math.round(O.y),width:Math.ceil(O.width),height:Math.ceil(O.height)}}function b(C,w,O){var l=document.createElement("canvas"),g=l.getContext("2d");return l.width=O.width,l.height=O.height,g.translate(-O.x,-O.y),d(g,C,w),g.drawImage(w.img,0,0),g.getImageData(0,0,O.width,O.height)}return o.mergeManualBlend=function(C,w){return function(O){for(var l,g,m,i,s,a,y=O.getContext("2d"),c=C.width,_=C.height,T=y.getImageData(0,0,c,_),A=I(y,c,_),N=0;N<w.length;N+=1)if(l=w[N],a=x(C,l),a.width>0&&a.height>0){if(N>0&&(i=T,T=A,A=i),m=b(C,l,a),s={data:m.data,width:a.width,height:a.height,opacity:l.opacity,dx:a.x,dy:a.y},S[l.blendmode]===void 0)throw new Error("No blend mode named '"+l.blendmode+"'");g=S.realBlendMode(l.blendmode),S[g](T.data,A.data,c,_,s)}return y.putImageData(A,0,0),O}},o.singleLayerWithOpacity=function(C,w){var O=document.createElement("canvas"),l=O.getContext("2d");return O.width=C.width,O.height=C.height,l.save(),d(l,C,w),w.opacity!==1&&(l.globalAlpha=w.opacity),l.drawImage(w.img,0,0),l.restore(),O},o.mergeNativeBlend=function(C,w){return function(O){for(var l=O.getContext("2d"),g,m=0;m<w.length;m+=1)g=w[m],l.save(),d(l,C,g),g.opacity!==1&&(l.globalAlpha=g.opacity),g.blendmode!=="source-over"&&(l.globalCompositeOperation=S.realBlendMode(g.blendmode)),l.drawImage(g.img,0,0),l.restore();return O}},o.createRenderPipe=function(C,w,O){var l,g,m,i,s=[];function a(){if(g!==void 0){var c=g?C.mergeNativeBlend:C.mergeManualBlend;s.push(c(w,m))}}for(var y=1;y<O.length;y+=1)i=O[y],l=i.blendmode,(g===void 0||g!==p[l])&&(a(),m=[]),m.push(i),g=p[l],y===O.length-1&&a();return s},o.merge=function(C,w){for(var O=o.createRenderPipe(o,C,w),l=o.singleLayerWithOpacity(C,w[0]),g=0;g<O.length;g+=1)l=O[g](l);return l},o.composite=function(C,w){return!w||w.length===0?null:w.length===1?o.singleLayerWithOpacity(C,w[0]):o.merge(C,w)},o.getLayerData=function(C,w){for(var O,l,g,m=[],i=0;i<w.length;i+=1)l=C.layers[i],g=w[i],O={img:g,opacity:l.opacity,blendmode:l.blendmode,transform:l.transform,flip_h:l.flip_h,flip_v:l.flip_v},m.push(O);return m},o.render=function(C){for(var w=[],O=0;O<C.layers.length;O+=1)w.push(o.processLayer(C,C.layers[O]));return o.composite(C,o.getLayerData(C,w))},o.renderBW=function(C){var w=o.render(C);w.getContext("2d").getImageData(0,0,w.width,w.height).data;var O={name:"desaturate",options:{method:"ITU-R BT.709"}};return o.processImage(w,[O])},Me=o,Me}var Se,wr;function jn(){if(wr)return Se;wr=1;var S=Xr();qr();var r=Wr();function P(o,d){d(null,o)}var p={};p.toImage=function(){return function(o,d){d(null,r.toImage(o))}},p.load=function(o,d){if(d.isPath())return p.loadFile(d.data);if(d.isFill())return p.generateColor(o,d);if(d.isGradient())return p.generateGradient(o,d);if(d.isHtmlCanvas())return p.loadHtmlCanvas(d.data);if(d.isImage())return p.loadImage(d.data);if(d.isImageCanvas())return p.loadImageCanvas(d.data)},p.loadFile=function(o){return function(d,h){var u=document.createElement("canvas"),x=u.getContext("2d"),b=new Image;b.onload=function(){u.width=b.width,u.height=b.height,x.drawImage(b,0,0,u.width,u.height),h(null,u)},b.src=o}},p.loadHtmlCanvas=function(o){return function(d,h){h(null,o)}},p.loadImageCanvas=function(o){return function(d,h){o.render(function(u){h(null,u)})}},p.loadImage=function(o){return function(d,h){var u=r.loadImage(o);h(null,u)}},p.generateColor=function(o,d){return function(h,u){var x=r.generateColor(o,d);u(null,x)}},p.generateGradient=function(o,d){return function(h,u){var x=r.generateGradient(o,d);u(null,x)}},p.processImage=function(o){return o.length===0?P:function(d,h){r.processImage(d,o),h(null,d)}},p.processMask=function(o){return o.layers.length===0?P:function(d,h){o.width=d.width,o.height=d.height,p.renderBW(o,function(u){var x=u.getContext("2d").getImageData(0,0,u.width,u.height).data,b={name:"mask",options:{data:x,x:0,y:0,width:u.width,height:u.height}},C=p.processImage([b]);C(d,h)})}};function I(o){return function(d,h){S.compose(p.processImage(d.filters),p.processMask(d.mask),p.load(o,d))(null,h)}}return p.mergeManualBlend=function(o,d){return function(h,u){r.mergeManualBlend(o,d)(h),u(null,h)}},p.mergeNativeBlend=function(o,d){return function(h,u){r.mergeNativeBlend(o,d)(h),u(null,h)}},p.merge=function(o,d,h){var u=r.createRenderPipe(p,o,d);u.reverse();var x=r.singleLayerWithOpacity(o,d[0]);u.push(function(b,C){C(null,x)}),S.compose.apply(null,u)(null,function(){h(x)})},p.composite=function(o,d,h){if(!d||d.length===0){h(null);return}if(d.length===1){h(r.singleLayerWithOpacity(o,d[0]));return}p.merge(o,d,h)},p.render=function(o,d){S.map(o.layers,I(o),function(h,u){d&&p.composite(o,r.getLayerData(o,u),d)})},p.renderBW=function(o,d){p.render(o,function(h){h.getContext("2d").getImageData(0,0,h.width,h.height).data;var u={name:"desaturate",options:{method:"ITU-R BT.709"}},x=p.processImage([u]);x(h,function(b,C){d(C)})})},Se=p,Se}var Ne,Ir;function ze(){if(Ir)return Ne;Ir=1;var S=Ge(),r=Wr(),P=jn(),p,I,o,d,h=800,u=800,x="path",b="image",C="htmlCanvas",w="iCanvas",O="fill",l="gradient",g=S.transform(),m=g,i=S.clamp,s=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"];function a(M,X,R,G,rt){var j,$,tt,z,ot,it,ct,st;if(M===void 0)j=$=tt=0,z=1;else if(Array.isArray(M))st=X||{},j=M[0]!==void 0?M[0]:0,$=M[1]!==void 0?M[1]:0,tt=M[2]!==void 0?M[2]:0,z=M[3]!==void 0?M[3]:st.base||1;else if(M.r!==void 0)st=X||{},j=M.r,$=M.g,tt=M.b,z=M.a!==void 0?M.a:st.base||1;else if(typeof M=="string"){if(M.indexOf("#")===0||M.indexOf("rgb")===0||s.indexOf(M)!==-1)return M}else typeof M=="number"&&(arguments.length===1?(j=$=tt=M,z=1):arguments.length===2?(j=$=tt=M,typeof X=="number"?z=X:(st=X,z=st.base||1)):arguments.length===3?typeof R=="number"?(j=M,$=X,tt=R,z=1):(j=$=tt=M,z=X,st=R):arguments.length===4?(j=M,$=X,tt=R,typeof G=="number"?z=G:(st=G||{},z=st.base||1)):(j=M,$=X,tt=R,z=G,st=rt));if(!(typeof j=="number"&&typeof $=="number"&&typeof tt=="number"&&typeof z=="number"))throw new Error("Invalid color arguments");return st=st||{},st.base!==void 0&&(j/=st.base,$/=st.base,tt/=st.base,z/=st.base),ot=Math.round(j*255),it=Math.round($*255),ct=Math.round(tt*255),"rgba("+ot+", "+it+", "+ct+", "+z+")"}function y(M,X,R,G,rt){var j,$,tt,z,ot,it,ct={};if(arguments.length===1)it=M||{},j=it.startColor,$=it.endColor,tt=it.type,z=it.rotation,ot=it.spread;else if(arguments.length>=2)if(j=M,$=X,tt="linear",z=0,ot=0,arguments.length===3)typeof R=="string"?tt=R:typeof R=="number"&&(z=R);else if(arguments.length===4)if(typeof R=="number")z=R,ot=G;else if(R==="linear")z=G;else if(R==="radial")tt=R,ot=G;else throw new Error("Wrong argument provided: "+R);else arguments.length===5&&(tt=R,z=G,ot=rt);if(!j&&j!==0)throw new Error("No startColor was given.");if(!$&&$!==0)throw new Error("No endColor was given.");try{ct.startColor=a(j)}catch{throw new Error("startColor is not a valid color: "+j)}try{ct.endColor=a($)}catch{throw new Error("endColor is not a valid color: "+$)}if(tt===void 0&&(tt="linear"),tt!=="linear"&&tt!=="radial")throw new Error("Unknown gradient type: "+tt);if(ct.type=tt,ot===void 0&&(ot=0),typeof ot!="number")throw new Error("Spread value is not a number: "+ot);if(tt==="linear"){if(z===void 0&&(z=0),typeof z!="number")throw new Error("Rotation value is not a number: "+z);ct.rotation=z}return ct.spread=i(ot,0,.99),ct}function c(M){if(typeof M=="string")return x;if(M instanceof Image)return b;if(M instanceof HTMLCanvasElement)return C;if(M instanceof I)return w;if(M.r!==void 0&&M.g!==void 0&&M.b!==void 0&&M.a!==void 0)return O;if(M.startColor!==void 0&&M.endColor!==void 0)return l;throw new Error("Cannot establish type for data ",M)}o=function(M,X){X||(X=c(M)),this.data=M,this.type=X,(X===C||X===w||X===b)&&(this.width=M.width,this.height=M.height),this.opacity=1,this.blendmode="source-over",this.transform=g,this.flip_h=!1,this.flip_v=!1,this.mask=new I,this.filters=[]},o.Transform=o.IDENTITY_TRANSFORM=g,o.prototype.clone=function(){function M(G){var rt,j,$={};if($.name=G.name,G.options!==void 0){$.options={};for(var tt=Object.keys(G.options),z=0;z<tt.length;z+=1)rt=tt[z],j=G.options[rt],Array.isArray(j)?$.options[rt]=j.slice(0):$.options[rt]=j}return $}var X=Object.create(o.prototype);X.data=this.data,X.type=this.type,X.width=this.width,X.height=this.height,X.opacity=this.opacity,X.blendmode=this.blendmode,X.transform=this.transform,X.flip_h=this.flip_h,X.flip_v=this.flip_v,X.mask=this.mask.clone(),X.filters=[],this.type===w?X.data=this.data.clone():this.type===l&&(X.data={startColor:this.data.startColor,endColor:this.data.endColor,type:this.data.type,rotation:this.data.rotation,spread:this.data.spread});for(var R=0;R<this.filters.length;R+=1)X.filters.push(M(this.filters[R]));return X},o.prototype.setOpacity=function(M){this.opacity=i(M,0,1)},o.prototype.translate=function(M,X){X=X===void 0?0:X;var R=m.translate(M,X);this.transform=this.transform.prepend(R)},o.prototype.scale=function(M,X){X=X===void 0?M:X;var R=m.scale(M,X);this.transform=this.transform.prepend(R)},o.prototype.rotate=function(M){var X=m.rotate(M);this.transform=this.transform.prepend(X)},o.prototype.skew=function(M,X){X=X===void 0?M:X;var R=m.skew(M,X);this.transform=this.transform.prepend(R)},o.prototype.flipHorizontal=function(M){M!==void 0?this.flip_h=M:this.flip_h=!this.flip_h},o.prototype.flipVertical=function(M){M!==void 0?this.flip_v=M:this.flip_v=!this.flip_v},o.prototype.addFilter=function(M,X){this.filters.push({name:M,options:X})},o.prototype.draw=function(M){var X=this.width===void 0?h:this.width,R=this.height===void 0?u:this.height,G=new I(X,R);G.addLayer(this),G.draw(M)},o.prototype.toCanvas=function(){var M=document.createElement("canvas");M.width=this.width,M.height=this.height;var X=M.getContext("2d");return this.draw(X),M},o.fromFile=function(M){return new o(M,x)},o.fromImage=function(M){return new o(M,b)},o.fromCanvas=function(M){return M instanceof HTMLCanvasElement?o.fromHtmlCanvas(M):o.fromImageCanvas(M)},o.fromHtmlCanvas=function(M){return new o(M,C)},o.fromImageCanvas=function(M){return new o(M,w)},o.fromColor=function(M){return new o(a(M),O)},o.fromGradient=function(){return new o(y.apply(null,arguments),l)},o.prototype.isPath=function(){return this.type===x},o.prototype.isFill=function(){return this.type===O},o.prototype.isGradient=function(){return this.type===l},o.prototype.isHtmlCanvas=function(){return this.type===C},o.prototype.isImage=function(){return this.type===b},o.prototype.isImageCanvas=function(){return this.type===w};var _=function(M){this.width=M.width,this.height=M.height;var X=M.getContext("2d");this._data=X.getImageData(0,0,this.width,this.height),this.array=this._data.data};_.prototype.get=function(M){M*=4;var X=this.array;return[X[M+0],X[M+1],X[M+2],X[M+3]]},_.prototype.set=function(M,X){M*=4;var R=this.array;R[M+0]=X[0],R[M+1]=X[1],R[M+2]=X[2],R[M+3]=X[3]},_.prototype.toCanvas=function(){var M=document.createElement("canvas");M.width=this.width,M.height=this.height;var X=M.getContext("2d");return X.putImageData(this._data,0,0),M},I=function(M,X){M||(M=h),X||(X=u),this.width=M,this.height=X,this.layers=[]},I.prototype.clone=function(){for(var M=new I(this.width,this.height),X=0;X<this.layers.length;X+=1)M.layers.push(this.layers[X].clone());return M},I.prototype.addLayer=function(M){var X;try{return this.addGradientLayer.apply(this,arguments)}catch{}try{return this.addColorLayer.apply(this,arguments)}catch{}if(arguments.length===1&&(typeof M=="string"?X=new o(M,x):M instanceof o?X=M:M instanceof HTMLCanvasElement?X=new o(M,C):M instanceof Image?X=new o(M,b):M instanceof I&&(X=new o(M,w))),!X)throw new Error("Error creating layer.");return this.layers.push(X),X},I.prototype.addColorLayer=function(){var M=a.apply(null,arguments),X=new o(M,O);return this.layers.push(X),X},I.prototype.addGradientLayer=function(){var M=y.apply(null,arguments),X=new o(M,l);return this.layers.push(X),X},I.prototype.render=function(M){var X=M?P:r;return X.render(this,M)},I.prototype.draw=function(M,X){if(X)this.render(function(G){M.drawImage(G,0,0,G.width,G.height)});else{var R=this.render();M.drawImage(R,0,0,R.width,R.height)}};function T(M){return M?M.x!==void 0&&M.y!==void 0:!1}function A(M){var X=M[0],R=M.length>1?M[1]:X;return{x:X,y:R}}function N(M){return{x:M,y:M}}function Y(M){return M!=null}function F(M){if(Array.isArray(M))return A(M);if(typeof M=="number")return N(M);if(T(M))return M}d=function(M,X,R){this.canvas=M,this.originalWidth=M?M.width:0,this.originalHeight=M?M.height:0,this.transform=X||R?m.translate(X,R):o.IDENTITY_TRANSFORM},d.prototype.clone=function(){var M=new d;return M.canvas=this.canvas,M.originalWidth=this.originalWidth,M.originalHeight=this.originalHeight,M.transform=this.transform,M},d.prototype.withCanvas=function(M){var X=this.clone();return X.canvas=M,X},d.prototype._transform=function(M){var X=this.clone();return X.transform=X.transform.prepend(M),X},d.prototype.translate=function(M){var X=N(0),R=arguments;return R.length===1&&Y(M)?X=F(M):R.length===2&&(X={x:R[0],y:R[1]}),X.x===0&&X.y===0?this:this._transform(m.translate(X.x,X.y))},d.prototype.rotate=function(M){if(!M)return this;var X=N(0),R=arguments;return R.length===2?X=F(R[1]):R.length===3&&(X={x:R[1],y:R[2]}),this._transform(m.translate(X.x,X.y).rotate(M).translate(-X.x,-X.y))},d.prototype.scale=function(M){var X=N(1),R=N(0),G=arguments;return G.length===1&&Y(M)?X=F(M):G.length===2?typeof M=="number"&&typeof G[1]=="number"?X={x:G[0],y:G[1]}:(X=F(M),R=F(G[1])):G.length===4&&(X={x:G[0],y:G[1]},R={x:G[2],y:G[3]}),X.x===1&&X.y===1?this:this._transform(m.translate(R.x,R.y).scale(X.x,X.y).translate(-R.x,-R.y))},d.prototype.skew=function(M){var X=N(0),R=N(0),G=arguments;return G.length===1&&Y(M)?X=F(M):G.length===2?typeof M=="number"&&typeof G[1]=="number"?X={x:G[0],y:G[1]}:(X=F(M),R=F(G[1])):G.length===4&&(X={x:G[0],y:G[1]},R={x:G[2],y:G[3]}),X.x===0&&X.y===0?this:this._transform(m.translate(R.x,R.y).skew(X.x,X.y).translate(-R.x,-R.y))},d.prototype.transformed=function(){return p.merge([this])},d.prototype.bounds=function(){for(var M=this.transform,X=this.originalWidth/2,R=this.originalHeight/2,G={x:-X,y:-R},rt={x:X,y:-R},j={x:-X,y:R},$={x:X,y:R},tt=[G,rt,j,$],z,ot,it,ct,st,yt=0;yt<4;yt+=1)z=M.transformPoint(tt[yt]),yt===0?(ot=ct=z.x,it=st=z.y):(z.x<ot&&(ot=z.x),z.x>ct&&(ct=z.x),z.y<it&&(it=z.y),z.y>st&&(st=z.y));return{x:ot,y:it,width:ct-ot,height:st-it}},d.prototype.colorize=function(M){var X=o.fromColor(M);X.width=this.originalWidth,X.height=this.originalHeight;var R=new d(X.toCanvas());return R=R._transform(this.transform.matrix()),p.merge([this,R])},d.prototype.desaturate=function(M){var X=this.toLayer(!1);return X.addFilter("desaturate",M),this.withCanvas(X.toCanvas())},d.prototype.crop=function(M){function X(ot,it){var ct=ot.x+ot.width,st=ot.y+ot.height,yt=it.x+it.width,xt=it.y+it.height,Ct=Math.max(ot.x,it.x),vt=Math.max(ot.y,it.y),gt=Math.max(Math.min(ct,yt)-Ct,0),wt=Math.max(Math.min(st,xt)-vt,0);return{x:Ct,y:vt,width:gt,height:wt}}var R=this.bounds(),G=M.bounds(),rt=X(R,G),j=Math.ceil(rt.width),$=Math.ceil(rt.height);if(rt.width===0||rt.height===0)throw new Error("Resulting image has no dimensions");var tt=new p.ImageCanvas(j,$),z=tt.addLayer(this.toLayer());return z.translate(j/2-G.width-G.x,$/2-G.height-G.y),j<G.width&&rt.x>R.x&&z.translate(G.width-j,0),$<G.height&&rt.y>R.y&&z.translate(0,G.height-$),new d(tt.render(),rt.x+j/2,rt.y+$/2)},d.prototype.draw=function(M){M.save();var X=this.transform.matrix();M.transform(X[0],X[1],X[3],X[4],X[6],X[7]),M.translate(-this.originalWidth/2,-this.originalHeight/2),M.drawImage(this.canvas,0,0),M.restore()},d.prototype.toLayer=function(M){var X=document.createElement("canvas");X.width=this.canvas.width,X.height=this.canvas.height;var R=X.getContext("2d");R.drawImage(this.canvas,0,0);var G=p.Layer.fromHtmlCanvas(X);return M===void 0&&(M=!0),M&&(G.transform=this.transform),G},d.prototype.getPixels=function(){return new _(this.canvas)},d.prototype.toImage=function(){var M=this.bounds(),X=this.crop({bounds:function(){return M}}),R=new Image;return R.width=X.canvas.width,R.height=X.canvas.height,R.src=X.canvas.toDataURL(),R},p={},p.Layer=o,p.ImageCanvas=I,p.Img=d,p.Pixels=_;var W=Xr();function U(M,X){var R=new Image;R.onload=function(){X(null,[M,this])},R.src=M}function H(M,X){W.map(M,U,function(R,G){if(X){for(var rt,j,$={},tt=0;tt<G.length;tt+=1)rt=G[tt][0],j=G[tt][1],$[rt]=j;X($)}})}function J(M,X){var R=Math.min(M.x,X.x),G=Math.min(M.y,X.y),rt=Math.max(M.x+M.width,X.x+X.width)-R,j=Math.max(M.y+M.height,X.y+X.height)-G;return{x:R,y:G,width:rt,height:j}}function D(M){var X,R,G,rt;for(X=0;X<M.length;X+=1)R=M[X],X===0?G=R.bounds():G=J(G,R.bounds());var j=G.width/2+G.x,$=G.height/2+G.y,tt=new I(G.width,G.height);for(X=0;X<M.length;X+=1)rt=tt.addLayer(M[X].toLayer()),rt.translate(-j,-$);return new d(tt.render(),j,$)}return p.loadImages=H,p.merge=D,Ne=p,Ne}var Xe={},_r;function Zr(){if(_r)return Xe;_r=1;var S=function(r){if(r<0){for(var P=S(Math.abs(r)),p=0;p<23;p+=1)P();return S(P(0,1e4))}return function(I,o){I=I||0,o=o||1,r=(r*9301+49297)%233280;var d=r/233280;return I+d*(o-I)}};return Xe.randomGenerator=S,Xe}var Ye,Tr;function Ur(){if(Tr)return Ye;Tr=1;var S=Fn(),r=Zr(),P=ie(),p={},I=Math.PI*2;return p.abs=Math.abs,p.accumulate=function(o){if(arguments.length>1?o=arguments:arguments.length===1&&!Array.isArray(o)&&(o=[o]),!o||o.length===0)return[0];var d,h=[],u=0;for(d=0;d<o.length;d++)h.push(u),u+=o[d];return h},p.add=function(o,d){return arguments.length===2?o+d:S(arguments,function(h,u){return h+u},0)},p.and=function(o,d){var h=arguments.length;if(h===2)return o&&d;if(h===1)return!!o;if(h===0)throw new Error("Wrong number of arguments");return S(arguments,function(u,x){return u&&x},!0)},p.average=function(o){if(arguments.length>1?o=arguments:arguments.length===1&&!Array.isArray(o)&&(o=[o]),!o||o.length===0)return 0;var d,h=0;for(d=0;d<o.length;d+=1)h+=o[d];return h/o.length},p.boolean=function(o){return!!o},p.ceil=Math.ceil,p.clamp=function(o,d,h){return d=typeof d=="number"?d:0,h=typeof h=="number"?h:1,o<d?d:o>h?h:o},p.compare=function(o,d,h){if(h==="<")return o<d;if(h===">")return o>d;if(h==="<=")return o<=d;if(h===">=")return o>=d;if(h==="==")return o===d;if(h==="!=")return o!==d;throw new Error("Unknown comparison operation "+h)},p.cos=Math.cos,p.degrees=function(o){return o*180/Math.PI},p.divide=function(o,d){var h=arguments.length;function u(x){if(x===0)throw new Error("Divide by zero")}if(h===2)return u(d),o/d;if(h===1)return u(o),1/o;if(h===0)throw new Error("Wrong number of arguments");return S([].slice.call(arguments,1),function(x,b){return u(b),x/b},arguments[0])},p.e=function(){return Math.E},p.even=function(o){return o%2===0},p.floor=Math.floor,p.integer=function(o){return o|0},p.log=function(o){return o>0?Math.log(o):-Math.log(-o)},p.makeNumbers=function(o,d){if(!o)return[];d||(d="");var h,u,x=[],b=o.split(d);for(h=0;h<b.length;h+=1)u=parseFloat(b[h]),(u===0||u)&&x.push(u);return x},p.max=function(){var o=arguments;if(arguments.length===1&&Array.isArray(arguments[0])&&(o=arguments[0]),o.length===0)throw new Error("Wrong number of arguments");return Math.max.apply(null,o)},p.min=function(){var o=arguments;if(arguments.length===1&&Array.isArray(arguments[0])&&(o=arguments[0]),o.length===0)throw new Error("Wrong number of arguments");return Math.min.apply(null,o)},p.mod=function(o,d){return o%d},p.multiply=function(o,d){var h=arguments.length;return h===2?o*d:h===1?o:S(arguments,function(u,x){return u*x},1)},p.negate=function(o){return-o},p.not=function(o){return!o},p.number=function(o){return o},p.odd=function(o){return o%2!==0},p.or=function(o,d){var h=arguments.length;if(h===2)return o||d;if(h===1)return!!o;if(h===0)throw new Error("Wrong number of arguments");return S(arguments,function(u,x){return u||x},!1)},p.perlinNoise=function(o,d,h){return P.math.noise(o,d,h)},p.pi=function(){return Math.PI},p.pow=Math.pow,p.radians=function(o){return o*Math.PI/180},p.randomNumbers=function(o,d,h,u){var x=arguments.length;if((x<4||!u&&u!==0)&&(u=Math.random()),x===3||x===4?(d=d||0,h=h||(h===0?0:1)):x===2?(h=d||(d===0?0:1),d=0):x===1&&(d=0,h=1),h<d){var b=h;h=d,d=b}for(var C,w=h-d,O=[],l=r.randomGenerator(u||0),g=0;g<o;g+=1)C=d+l(0,1)*w,O.push(C);return O},p.range=function(o,d,h,u){if(o===d)return[];if(h!==0&&(h=h||(o<d?1:-1)),h>0&&o>d)return[];if(h<0&&o<d)return[];if(h===0)return[];var x=[],b;if(o<d)if(u)for(b=o;b<=d;b+=h)x.push(b);else for(b=o;b<d;b+=h)x.push(b);else if(u)for(b=o;b>=d;b+=h)x.push(b);else for(b=o;b>d;b+=h)x.push(b);return x},p.round=function(o,d){return d=d|0,d?Math.round(o/d)*d:Math.round(o)},p.sample=function(o,d,h,u){var x,b=[],C;for(b.length=o,u?x=(h-d)/o:x=(h-d)/(o-1),C=0;C<o;C+=1)b[C]=d+C*x;return b},p.sineWave=function(o,d,h,u,x){d===void 0&&(d=-1),h===void 0&&(h=1),u===void 0&&(u=1),x===void 0&&(x=0);var b=(h-d)/2;return d+b+Math.sin((x+o)*I/u)*b},p.squareWave=function(o,d,h,u,x){d===void 0&&(d=-1),h===void 0&&(h=1),u===void 0&&(u=1),x===void 0&&(x=0);var b=u/2,C=(o+x)%u;return C<b?h:d},p.triangleWave=function(o,d,h,u,x){d===void 0&&(d=-1),h===void 0&&(h=1),u===void 0&&(u=1),x===void 0&&(x=0);var b=(h-d)/2,C=I/u,w=0,O=o+x+u/4;return O%u!==0&&(w=O*C%I),w<0&&(w+=I),2*b*(1+-Math.abs(w/I*2-1))+d},p.sawtoothWave=function(o,d,h,u,x){d===void 0&&(d=-1),h===void 0&&(h=1),u===void 0&&(u=1),x===void 0&&(x=0);var b=(h-d)/2,C=I/u,w=0,O=o+x;return O%u!==0&&(w=O*C%I),w<0&&(w+=I),2*(w/I)*b+d},p.sign=function(o){return o>0?1:o===0?0:-1},p.sin=Math.sin,p.sqrt=Math.sqrt,p.subtract=function(o,d){var h=arguments.length;if(h===2)return o-d;if(h===1)return-o;if(h===0)throw new Error("Wrong number of arguments");return S([].slice.call(arguments,1),function(u,x){return u-x},arguments[0])},p.tan=Math.tan,p.total=function(o){if(arguments.length>1?o=arguments:arguments.length===1&&!Array.isArray(o)?o=[o]:arguments.length===0&&(o=[]),o.length===0)return 0;var d,h=0;for(d=0;d<o.length;d+=1)h+=o[d];return h},p.xor=function(o,d){var h=arguments.length;if(h===2)return!!(o^d);throw new Error("Wrong number of arguments")},Ye=p,Ye}var Be,br;function Qn(){if(br)return Be;br=1;var S={};return S.characterAt=function(r,P){return!r||r.length===0?"":(r=String(r),P<0&&(P=r.length+P),r.charAt(P))},S.concatenate=function(){for(var r="",P=0;P<arguments.length;P++){var p=arguments[P];p=p!==void 0?String(p):"",r+=p}return r},S.endsWith=function(r,P){return!r||!P?!1:(r=String(r),r.indexOf(P,r.length-P.length)!==-1)},S.reverse=function(r){return r.slice().reverse()},S.startsWith=function(r,P){return!r||!P?!1:(r=String(r),r.indexOf(P)===0)},S.string=String,S.stringContains=function(r,P){return!r||!P?!1:(r=String(r),r.indexOf(P)!==-1)},S.stringEquals=function(r,P,p){return r=String(r),P=String(P),!r||!P?!1:p?r.toLowerCase()===P.toLowerCase():r===P},S.stringLength=function(r){return r?(r=String(r),r.length):0},S.stringReplace=function(r,P,p){return r=String(r),r.replace(new RegExp(P,"g"),p)},S.stringSplit=function(r,P){return r?((!P||P.length===0)&&(P=""),r=String(r),r.split(P)):[]},S.stringTrim=function(r){return r?(r=String(r),r.trim()):null},S.substring=function(r,P,p,I){return!r||p<P?"":(r=String(r),P<0&&p<0&&(P=r.length+P,p=r.length+p),p!==void 0&&I&&(p+=1),r.substring(P,p))},S.toCharacterCodes=function(r){if(!r)return[];var P=[];P.length=r.length;for(var p=0;p<r.length;p+=1)P[p]=r.charCodeAt(p);return P},S.toCharacters=function(r){return r?(r=String(r),r.split("")):[]},S.toLowerCase=function(r){return r=String(r),r.toLowerCase()},S.toTitleCase=function(r){var P,p="";r=String(r);for(var I=0;I<r.length;I+=1)P=r[I],p.length===0||p[p.length-1]===" "?p+=P.toUpperCase():p+=P;return p},S.toUpperCase=function(r){return r=String(r),r.toUpperCase()},S.wordCount=function(r){if(!r)return 0;r=String(r);var P=r.split(new RegExp("\\w+"));return P.length-1},S.toWords=function(r){var P=r.split(/\W+/);return P[P.length-1]===""&&P.pop(),P},Be=S,Be}var Fe,Lr;function $n(){if(Lr)return Fe;Lr=1;function S(){return!1}function r(w){return typeof w=="object"&&w!==null}function P(w){return Object.prototype.toString.call(w)}function p(w){return r(w)&&P(w)==="[object RegExp]"}function I(w){return r(w)&&P(w)==="[object Date]"}function o(w){return w==null}var d={isObject:r,isRegExp:p,isDate:I,isNullOrUndefined:o,isBuffer:S},h=Array.prototype.slice,u={},x,b,C;return b=function(w,O){return w===O?!0:d.isDate(w)&&d.isDate(O)?w.getTime()===O.getTime():d.isRegExp(w)&&d.isRegExp(O)?w.source===O.source&&w.global===O.global&&w.multiline===O.multiline&&w.lastIndex===O.lastIndex&&w.ignoreCase===O.ignoreCase:!d.isObject(w)&&!d.isObject(O)?w==O:C(w,O)},u.deepEqual=b,x=function(w){return Object.prototype.toString.call(w)==="[object Arguments]"},C=function(w,O){if(d.isNullOrUndefined(w)||d.isNullOrUndefined(O)||w.prototype!==O.prototype)return!1;var l=x(w),g=x(O);if(l&&!g||!l&&g)return!1;if(l)return w=h.call(w),O=h.call(O),b(w,O);var m,i,s,a;try{m=Object.keys(w),i=Object.keys(O)}catch{return!1}if(m.length!==i.length)return!1;for(m.sort(),i.sort(),a=m.length-1;a>=0;a--)if(m[a]!=i[a])return!1;for(a=m.length-1;a>=0;a--)if(s=m[a],!b(w[s],O[s]))return!1;return!0},Fe=u,Fe}var ke,Ar;function Hr(){if(Ar)return ke;Ar=1;var S=$n(),r=Zr(),P={};return P.combine=function(){var p,I,o=[];for(p=0;p<arguments.length;p++)I=arguments[p],I&&(o=o.concat(I));return o},P.contains=function(p,I){if(!p)return!1;for(var o=0;o<p.length;o+=1)if(S.deepEqual(p[o],I))return!0;return!1},P.cycle=function(p,I){if(!p||I<=0)return[];for(var o=[],d=p.length,h=0;h<I;h+=1)o.push(p[h%d]);return o},P.equals=function(p,I){return S.deepEqual(p,I)},P.count=function(p){return p&&p.length?p.length:0},P.cull=function(p,I){if(!p)return[];if(!I)return p;var o,d,h=[];for(o=0;o<p.length;o++)d=I[o%I.length],d&&h.push(p[o]);return h},P.distinct=function(p){if(!p)return[];var I,o,d,h=[],u=[];for(I=0,o=p.length;I<o;I+=1)d=p[I],P.contains(u,d)||(u.push(d),h.push(p[I]));return h},P.first=function(p){return!p||p.length===0?null:p[0]},P.get=function(p,I){return!p||p.length===0?null:p[I]},P.interleave=function(){const p=Array.from(arguments).filter(d=>!!d);if(p.length===0)return[];const I=[];let o=0;for(;;){for(let d=0;d<p.length;d++){let h=p[d];if(h.length>o)I.push(h[o]);else return I}o+=1}},P.last=function(p){return!p||p.length===0?null:p[p.length-1]},P.pick=function(p,I,o){if(!p||p.length===0||I<=0)return[];!o&&o!==0&&(o=Math.random());for(var d=r.randomGenerator(o||0),h=[],u=0;u<I;u+=1)h.push(p[Math.floor(d(0,p.length))]);return h},P.randomSample=function(p,I,o){if(!p||p.length===0||I<=0)return[];!o&&o!==0&&(o=Math.random());var d=P.shuffle(p,o);return I?P.slice(d,0,I):d},P.repeat=function(p,I,o){if(!p)return[];if(Array.isArray(p)||(p=[p]),I<=0)return[];var d,h,u,x=[];if(o)for(d=0;d<p.length;d+=1)for(u=p[d],h=0;h<I;h+=1)x.push(u);else for(d=0;d<I;d+=1)x.push.apply(x,p);return x},P.rest=function(p){return p?p.slice(1):[]},P.reverse=function(p){return p?p.slice().reverse():[]},P.second=function(p){return!p||p.length<2?null:p[1]},P.shift=function(p,I){if(!p)return[];I=I%p.length;var o=p.slice(0,I),d=p.slice(I);return d.push.apply(d,o),d},P.shuffle=function(p,I){var o,d,h,u;for(!I&&I!==0&&(I=Math.random()),u=r.randomGenerator(I||0),p=p.slice(),o=p.length-1;o>0;o--)d=Math.floor(u(0,o+1)),h=p[o],p[o]=p[d],p[d]=h;return p},P.slice=function(p,I,o,d){if(!p)return[];var h,u;return d?(h=p.slice(0,I),u=p.slice(I+o),h.push.apply(h,u),h):p.slice(I,I+o)},P.sort=function(p,I){if(!p)return[];if(I){if(typeof I=="string")return p.slice().sort(function(o,d){return o[I]>d[I]?1:o[I]===d[I]?0:-1});if(typeof I=="function")return p.slice().sort(I)}return p&&p[0]!==void 0&&p[0]!==null&&typeof p[0]=="number"?p.slice().sort(function(o,d){return o-d}):p.slice().sort()},P.switch=function(p){var I=arguments.length-1;return p=p%I,p<0&&(p+=I),arguments[p+1]},P.takeEvery=function(p,I,o){if(!p)return[];var d,h=[];for(o=o||0,d=0;d<p.length;d+=1)d%I===o&&h.push(p[d]);return h},P.zipMap=function(p,I){var o,d,h,u={},x=Math.min(p.length,I.length);for(o=0;o<x;o+=1)d=p[o],h=I[o],u[d]=h;return u},ke=P,ke}var Re,Or;function Kn(){if(Or)return Re;Or=1;var S=Rn(),r=kn(),P=Hr(),p={};return p.convert=function(I,o,d,h,u){var x=arguments.length;if(x===2){var b=arguments[1];o=b.inMin,d=b.inMax,h=b.outMin,u=b.outMax}else x===3&&(o=arguments[1][0],d=arguments[1][1],h=arguments[2][0],u=arguments[2][1]);try{I=(I-o)/(d-o)}catch{I=o}return h+I*(u-h)},p.filterData=function(I,o,d,h){if(!I)return[];var u,x,b,C;if(h==null)return I;var w=[];if(d==="==")for(u=0,x=I.length;u<x;u++)b=I[u],C=b[o],C==h&&w.push(b);else if(d==="!=")for(u=0,x=I.length;u<x;u++)b=I[u],C=b[o],C!=h&&w.push(b);else if(d===">")for(u=0,x=I.length;u<x;u++)b=I[u],C=b[o],C>h&&w.push(b);else if(d===">=")for(u=0,x=I.length;u<x;u++)b=I[u],C=b[o],C>=h&&w.push(b);else if(d==="<")for(u=0,x=I.length;u<x;u++)b=I[u],C=b[o],C<h&&w.push(b);else if(d==="<=")for(u=0,x=I.length;u<x;u++)b=I[u],C=b[o],C<=h&&w.push(b);else throw new Error("Invalid op "+d);return w},p.groupBy=function(I,o){return S(r(I,o))},p.keys=function(I){for(var o=[],d=0;d<I.length;d++)o=o.concat(Object.keys(I[d]));return P.distinct(o)},p.lookup=function(I,o){var d,h;if(d=I,h=d[o],h!==void 0)return typeof h=="function"&&(h=h.call(d)),h;for(var u,x=o.split("."),b=0;b<x.length;b+=1)u=x[b],d&&(typeof d[u]=="function"?(h=d[u],d=h.call(d)):d=d[u]);return d},p.dataScale=function(I,o,d){return{domain:I,outMin:o,outMax:d}},p.ticks=function(I,o,d){d=d!==void 0?d:10;var h=o-I,u=Math.pow(10,Math.floor(Math.log(h/d)/Math.LN10)),x=d/h*u,b=[],C;for(x<=.15?u*=10:x<=.35?u*=5:x<=.75&&(u*=2),I=Math.ceil(I/u)*u,o=Math.floor(o/u)*u+u*.5,C=I;C<o;C+=u)b.push(C);return b},Re=p,Re}var qe,Er;function ti(){if(Er)return qe;Er=1;var S=ie(),r=ze(),P=r.Img,p=r.Layer,I=r.ImageCanvas,o={};return o.blend=function(d,h,u){var x=d.bounds(),b=h.bounds(),C=new S.Rect(x.x,x.y,x.width,x.height).unite(b),w=Math.ceil(C.width),O=Math.ceil(C.height),l=w/2+C.x,g=O/2+C.y,m=new I(w,O),i=m.addLayer(d.toLayer());i.translate(-l,-g);var s=m.addLayer(h.toLayer());return s.translate(-l,-g),s.blendmode=u,new P(m.render(),l,g)},o.blur=function(d,h){var u=d.toLayer(!1);return u.addFilter("blur",{radius:h}),d.withCanvas(u.toCanvas())},o.brighten=function(d,h,u){var x=d.toLayer(!1);return x.addFilter("brightness",{brightness:h/100,contrast:u/100}),d.withCanvas(x.toCanvas())},o.bump=function(d,h,u,x){var b=d.toLayer(!1);return b.addFilter("bump",{dx:h.x,dy:h.y,radius:u,zoom:x/100}),d.withCanvas(b.toCanvas())},o.colorImage=function(d,h,u){var x=p.fromColor(u);return x.width=d,x.height=h,new P(x.toCanvas())},o.crop=function(d,h){return d.crop(h)},o.crossEdges=function(d,h){var u=d.toLayer(!1);return u.addFilter("crossedges",{strength:h/100}),d.withCanvas(u.toCanvas())},o.dent=function(d,h,u,x){var b=d.toLayer(!1);return b.addFilter("dent",{dx:h.x,dy:h.y,radius:u,zoom:x/100}),d.withCanvas(b.toCanvas())},o.emboss=function(d,h,u){var x=d.toLayer(!1);return x.addFilter("emboss",{amount:h/100,angle:u}),d.withCanvas(x.toCanvas())},o.equalize=function(d){var h=d.toLayer(!1);return h.addFilter("equalize"),d.withCanvas(h.toCanvas())},o.findEdges=function(d){var h=d.toLayer(!1);return h.addFilter("findedges"),d.withCanvas(h.toCanvas())},o.glow=function(d,h,u){var x=d.toLayer(!1);return x.addFilter("glow",{amount:h/100,kernelSize:u}),d.withCanvas(x.toCanvas())},o.gradientImage=function(d,h,u,x,b,C,w){var O=p.fromGradient(u,x,b,C,w/100);return O.width=d,O.height=h,new P(O.toCanvas())},o.histogram=function(d,h,u){var x=d.getPixels(),b=new Array(256),C,w,O,l;for(C=0;C<b.length;C+=1)b[C]=0;if(h==="lum")for(C=0;C<x.width*x.height;C+=1)O=x.get(C),l=O[0]*.2125+O[1]*.7154+O[2]*.0721,b[Math.round(l)]+=1;else for(h==="red"&&(w=0),h==="green"&&(w=1),h==="blue"&&(w=2),h==="alpha"&&(w=3),C=0;C<x.width*x.height;C+=1)O=x.get(C),l=O[w],b[l]+=1;if(u)for(C=0;C<b.length;C+=1)b[C]/=x.width*x.height;return b},o.lightTunnel=function(d,h,u){var x=d.toLayer(!1);return x.addFilter("splash",{dx:h.x,dy:h.y,radius:u}),d.withCanvas(x.toCanvas())},o.luminanceBW=function(d){var h=d.toLayer(!1);return h.addFilter("luminancebw"),d.withCanvas(h.toCanvas())},o.mask=function(d,h){d=d.transformed(),h=h.transformed();var u=d.toLayer(!1),x=h.toLayer(),b=d.bounds(),C=h.bounds(),w=new S.Rect(b.x,b.y,b.width,b.height).unite(C),O=Math.ceil(w.width),l=Math.ceil(w.height),g=O/2+w.x,m=l/2+w.y;x.translate(-g,-m);var i=u.mask.addLayer("white");return i.width=u.width,i.height=u.height,u.mask.addLayer(x),d.withCanvas(u.toCanvas())},o.mosaic=function(d,h){var u=d.toLayer(!1);return u.addFilter("mosaic",{blockSize:h}),d.withCanvas(u.toCanvas())},o.pinch=function(d,h,u){var x=d.toLayer(!1);return x.addFilter("pinch",{dx:h.x,dy:h.y,zoom:u/100}),d.withCanvas(x.toCanvas())},o.posterize=function(d,h){var u=d.toLayer(!1);return u.addFilter("posterize",{levels:h}),d.withCanvas(u.toCanvas())},o.removeNoise=function(d){var h=d.toLayer(!1);return h.addFilter("removenoise"),d.withCanvas(h.toCanvas())},o.solarize=function(d){var h=d.toLayer(!1);return h.addFilter("solarize"),d.withCanvas(h.toCanvas())},o.toBitmap=function(d,h){var u=document.createElement("canvas"),x;h?x=h.bounds():x=d.bounds();var b=x.x,C=x.y,w=u.width=Math.ceil(x.width),O=u.height=Math.ceil(x.height),l=u.getContext("2d");return l.translate(-b,-C),d.draw(l),new P(u,w/2+b,O/2+C)},o.toPixels=function(d,h){h=h>1?h:1;for(var u=d.canvas,x=u.width,b=u.height,C=u.getContext("2d"),w=C.getImageData(0,0,u.width,u.height),O=w.data,l=u.width*4,g=[],m=0;m<b;m+=h)for(var i=0;i<x;i+=h){var s=m*l+i*4,a=O[s],y=O[s+1],c=O[s+2],_=O[s+3];g.push({x:i-x/2,y:m-b/2,r:a,g:y,b:c,a:_,color:new S.Color(a/255,y/255,c/255,_/255)})}return g},o.twirl=function(d,h,u,x){var b=d.toLayer(!1);return b.addFilter("twirl",{dx:h.x,dy:h.y,radius:u,angle:x}),d.withCanvas(b.toCanvas())},qe=o,qe}var We,Mr;function ei(){if(Mr)return We;Mr=1;var S=ie(),r=ze(),P=Ur(),p={};p.HORIZONTAL="horizontal",p.VERTICAL="vertical",p.BOTH="both",p.LEFT="left",p.RIGHT="right",p.CENTER="center",p.TOP="top",p.BOTTOM="bottom",p.MIDDLE="middle";function I(u,x,b){return Math.min(b,Math.max(x,u))}function o(u,x){return x.transformShape(u)}function d(u,x){return u._transform(x.m)}function h(u,x){if(u instanceof S.Path||u instanceof S.Group||u instanceof S.Text||u.x!==void 0&&u.y!==void 0)return o(u,x);if(Array.isArray(u)){for(var b=[],C=0;C<u.length;C+=1)b.push(h(u[C],x));return b}else if(u instanceof r.Img)return d(u,x)}return p.align=function(u,x,b,C){if(u){var w,O,l,g=x.x,m=x.y,i=S.bounds(u);return b===p.LEFT?w=g-i.x:b===p.RIGHT?w=g-i.x-i.width:b===p.CENTER?w=g-i.x-i.width/2:w=0,C===p.TOP?O=m-i.y:C===p.BOTTOM?O=m-i.y-i.height:C===p.MIDDLE?O=m-i.y-i.height/2:O=0,l=new S.Transform().translate(w,O),h(u,l)}},p.colorize=function(u,x){var b=arguments;if((typeof x!="object"||x instanceof S.Color)&&(x={},b[1]!==void 0&&(x.fill=b[1]),b[2]!==void 0&&(x.stroke=b[2]),b[3]!==void 0&&(x.strokeWidth=b[3])),u instanceof S.Path||u instanceof S.Group)return u.colorize(x);if(u instanceof r.Img||u instanceof S.Text){if(x.fill||x.fill===0)return u.colorize(x.fill);throw new Error("No color given")}},p.copy=function(u,x,b,C,w,O){if(!u)return[];var l,g,m,i,s,a=[],y=0,c=0,_=0,T=1,A=1,N=!1;for(u instanceof S.Path||u instanceof S.Group||u instanceof S.Text?s=o:Array.isArray(u)&&u.length>0&&u[0].x!==void 0&&u[0].y!==void 0?(N=!0,s=o):u instanceof r.Img&&(s=d),l=0;l<x;l+=1){for(g=new S.Transform,m=0;m<b.length;m+=1)i=b[m],i==="t"?g=g.translate(y,c):i==="r"?g=g.rotate(_):i==="s"&&(g=g.scale(T,A));N?a=a.concat(s(u,g)):a.push(s(u,g)),y+=C.x,c+=C.y,_+=w,T+=O.x,A+=O.y}return a},p.flip=function(u,x){if(x==="none")return u;if(u instanceof S.Path||u instanceof S.Group||u instanceof S.Text||Array.isArray(u)&&u.length>0&&u[0].x!==void 0&&u[0].y!==void 0){var b=x===p.HORIZONTAL||x===p.BOTH?-1:1,C=x===p.VERTICAL||x===p.BOTH?-1:1;return S.scale(u,new S.Point(b,C),S.centerPoint(u))}else if(u instanceof r.Img){var w=u,O=w.toLayer(!1);return(x===p.HORIZONTAL||x===p.BOTH)&&O.flipHorizontal(),(x===p.VERTICAL||x===p.BOTH)&&O.flipVertical(),w.withCanvas(O.toCanvas())}},p.fit=function(u,x,b,C,w){if(u){w=w!==void 0?w:!1;var O,l,g,m=S.bounds(u),i=m.x,s=m.y,a=m.width,y=m.height;return a=a>1e-12?a:0,y=y>1e-12?y:0,O=new S.Transform,O=O.translate(x.x,x.y),w?(l=a>0?b/a:1,g=y>0?C/y:1):(l=a>0?b/a:Number.MAX_VALUE,g=y>0?C/y:Number.MAX_VALUE,l=g=Math.min(l,g)),O=O.scale(l,g),O=O.translate(-a/2-i,-y/2-s),h(u,O)}},p.fitTo=function(u,x,b){if(u){if(!x)return u;var C=S.bounds(x),w=C.x,O=C.y,l=C.width,g=C.height;return p.fit(u,{x:w+l/2,y:O+g/2},l,g,b)}},p.hslAdjust=function(u,x,b,C,w){if(w||(w=0),u instanceof r.Img){var O=u,l=O.toLayer(!1);return l.addFilter("hslAdjust",{h:x,s:b,l:C,a:w}),O.withCanvas(l.toCanvas())}x=I(x,-1,1),b=I(b,-1,1),C=I(C,-1,1),w=I(w,-1,1);var g=1+b*(b<0?1:2),m=C<0?1+C:1-C,i=C<0?0:C,s,a,y,c,_,T,A,N,Y,F,W,U;x=x*6%6;function H(J){if(J instanceof S.Group){for(var D=[],M=0;M<J.shapes.length;M+=1)D.push(H(J.shapes[M]));return new S.Group(D)}else if(J instanceof S.Path){var X=J.clone();return X.fill=H(X.fill),X.stroke=H(X.stroke),X}var R=J;return R instanceof S.Color||(R=S.Color.parse(R)),s=R.r,a=R.g,y=R.b,(x!==0||b!==0)&&(c=s,a>c&&(c=a),y>c&&(c=y),_=s,a<_&&(_=a),y<_&&(_=y),T=c-_,Y=(_+c)/2,Y>0&&T>0&&(Y<=.5?(N=T/(c+_)*g,N>1&&(N=1),u=Y*(1+N)):(N=T/(2-c-_)*g,N>1&&(N=1),u=Y+N-Y*N),s===c?a===_?A=5+(c-y)/T+x:A=1-(c-a)/T+x:a===c?y===_?A=1+(c-s)/T+x:A=3-(c-y)/T+x:s===_?A=3+(c-a)/T+x:A=5-(c-s)/T+x,A<0&&(A+=6),A>=6&&(A-=6),F=Y+Y-u,U=A>>0,W=(u-F)*(A-U),U===0?(s=u,a=F+W,y=F):U===1?(s=u-W,a=u,y=F):U===2?(s=F,a=u,y=F+W):U===3?(s=F,a=u-W,y=u):U===4?(s=F+W,a=F,y=u):U===5&&(s=u,a=F,y=u-W))),s=s*m+i,a=a*m+i,y=y*m+i,s<0&&(s=0),a<0&&(a=0),y<0&&(y=0),s>1&&(s=1),a>1&&(a=1),y>1&&(y=1),new S.Color(s,a,y,R.a+w)}return H(u)},p.rgbAdjust=function(u,x,b,C,w){w||(w=0),x=I(x,-1,1),b=I(b,-1,1),C=I(C,-1,1),w=I(w,-1,1);function O(l){if(l instanceof r.Img){var g=l,m=g.toLayer(!1);return m.addFilter("rgbAdjust",{r:x,g:b,b:C,a:w}),g.withCanvas(m.toCanvas())}else if(l instanceof S.Group){for(var i=[],s=0;s<l.shapes.length;s+=1)i.push(O(l.shapes[s]));return new S.Group(i)}else if(l instanceof S.Path){var a=l.clone();return a.fill=O(a.fill),a.stroke=O(a.stroke),a}var y=l;return y instanceof S.Color||(y=S.Color.parse(y)),new S.Color(y.r+x,y.g+b,y.b+C,y.a+w)}return O(u)},p.stack=function(u,x,b){if(!u)return[];if(u.length<=1)return u;var C,w,O,l,g,m,i=u[0].bounds(),s=[];if(x==="e")for(O=i.x,C=0;C<u.length;C+=1)w=u[C],m=w.bounds(),g=new S.Transform().translate(O-m.x,0),s.push(h(w,g)),O+=m.width+b;else if(x==="w")for(O=i.x+i.width,C=0;C<u.length;C+=1)w=u[C],m=w.bounds(),g=new S.Transform().translate(O-(m.x+m.width),0),s.push(h(w,g)),O-=m.width+b;else if(x==="n")for(l=i.y+i.height,C=0;C<u.length;C+=1)w=u[C],m=w.bounds(),g=new S.Transform().translate(0,l-(m.y+m.height)),s.push(h(w,g)),l-=m.height+b;else if(x==="s")for(l=i.y,C=0;C<u.length;C+=1)w=u[C],m=w.bounds(),g=new S.Transform().translate(0,l-m.y),s.push(h(w,g)),l+=m.height+b;return s},p.angle=function(u,x){var b=arguments;return b.length===4?(u=S.Point.read(b[0],b[1]),x=S.Point.read(b[2],b[3])):(u=S.Point.read(u),x=S.Point.read(x)),P.degrees(Math.atan2(x.y-u.y,x.x-u.x))},p.coordinates=function(u,x,b){var C=arguments;return C.length===4?(u=S.Point.read(C[0],C[1]),x=C[2],b=C[3]):u=S.Point.read(u),S.geo.coordinates(u.x,u.y,x,b)},p.distance=function(u,x){var b=arguments;return b.length===4?(u=S.Point.read(b[0],b[1]),x=S.Point.read(b[2],b[3])):(u=S.Point.read(u),x=S.Point.read(x)),Math.sqrt(Math.pow(x.x-u.x,2)+Math.pow(x.y-u.y,2))},p.grayColor=function(u,x){return!x&&x!==0&&(x=1),S.Color.gray(u,x,1)},p.hexColor=function(u){function x(b){return!isNaN(parseFloat(b))&&isFinite(b)}return x(u)?u=u.toString(16):u=String(u),u[0]!=="#"&&(u="#"+u),S.Color.parse(u)},p.hslColor=function(u,x,b,C){return!C&&C!==0&&(C=1),S.Color.hsl(u,x,b,C,1)},p.rgbColor=function(u,x,b,C){return!C&&C!==0&&(C=1),S.Color.rgb(u,x,b,C,1)},p.desaturate=function(u,x){return u?u.desaturate({method:x}):null},p.invert=function(u){if(!u)return null;if(u instanceof r.Img){var x=u,b=x.toLayer(!1);return b.addFilter("invert"),x.withCanvas(b.toCanvas())}return u.invert()},We=p,We}var Ze,Sr;function ri(){if(Sr)return Ze;Sr=1;var S={};return S.easeInQuad=function(r,P,p,I){return p*(r/=I)*r+P},S.easeOutQuad=function(r,P,p,I){return-p*(r/=I)*(r-2)+P},S.easeInOutQuad=function(r,P,p,I){return(r/=I/2)<1?p/2*r*r+P:-p/2*(--r*(r-2)-1)+P},S.easeInCubic=function(r,P,p,I){return p*(r/=I)*r*r+P},S.easeOutCubic=function(r,P,p,I){return p*((r=r/I-1)*r*r+1)+P},S.easeInOutCubic=function(r,P,p,I){return(r/=I/2)<1?p/2*r*r*r+P:p/2*((r-=2)*r*r+2)+P},S.easeInQuart=function(r,P,p,I){return p*(r/=I)*r*r*r+P},S.easeOutQuart=function(r,P,p,I){return-p*((r=r/I-1)*r*r*r-1)+P},S.easeInOutQuart=function(r,P,p,I){return(r/=I/2)<1?p/2*r*r*r*r+P:-p/2*((r-=2)*r*r*r-2)+P},S.easeInQuint=function(r,P,p,I){return p*(r/=I)*r*r*r*r+P},S.easeOutQuint=function(r,P,p,I){return p*((r=r/I-1)*r*r*r*r+1)+P},S.easeInOutQuint=function(r,P,p,I){return(r/=I/2)<1?p/2*r*r*r*r*r+P:p/2*((r-=2)*r*r*r*r+2)+P},S.easeInSine=function(r,P,p,I){return-p*Math.cos(r/I*(Math.PI/2))+p+P},S.easeOutSine=function(r,P,p,I){return p*Math.sin(r/I*(Math.PI/2))+P},S.easeInOutSine=function(r,P,p,I){return-p/2*(Math.cos(Math.PI*r/I)-1)+P},S.easeInExpo=function(r,P,p,I){return r===0?P:p*Math.pow(2,10*(r/I-1))+P},S.easeOutExpo=function(r,P,p,I){return r===I?P+p:p*(-Math.pow(2,-10*r/I)+1)+P},S.easeInOutExpo=function(r,P,p,I){return r===0?P:r===I?P+p:(r/=I/2)<1?p/2*Math.pow(2,10*(r-1))+P:p/2*(-Math.pow(2,-10*--r)+2)+P},S.easeInCirc=function(r,P,p,I){return-p*(Math.sqrt(1-(r/=I)*r)-1)+P},S.easeOutCirc=function(r,P,p,I){return p*Math.sqrt(1-(r=r/I-1)*r)+P},S.easeInOutCirc=function(r,P,p,I){return(r/=I/2)<1?-p/2*(Math.sqrt(1-r*r)-1)+P:p/2*(Math.sqrt(1-(r-=2)*r)+1)+P},S.easeInElastic=function(r,P,p,I){var o=1.70158,d=0,h=p;return r===0?P:(r/=I)===1?P+p:(d||(d=I*.3),h<Math.abs(p)?(h=p,o=d/4):o=d/(2*Math.PI)*Math.asin(p/h),-(h*Math.pow(2,10*(r-=1))*Math.sin((r*I-o)*(2*Math.PI)/d))+P)},S.easeOutElastic=function(r,P,p,I){var o=1.70158,d=0,h=p;return r===0?P:(r/=I)===1?P+p:(d||(d=I*.3),h<Math.abs(p)?(h=p,o=d/4):o=d/(2*Math.PI)*Math.asin(p/h),h*Math.pow(2,-10*r)*Math.sin((r*I-o)*(2*Math.PI)/d)+p+P)},S.easeInOutElastic=function(r,P,p,I){var o=1.70158,d=0,h=p;return r===0?P:(r/=I/2)===2?P+p:(d||(d=I*(.3*1.5)),h<Math.abs(p)?(h=p,o=d/4):o=d/(2*Math.PI)*Math.asin(p/h),r<1?-.5*(h*Math.pow(2,10*(r-=1))*Math.sin((r*I-o)*(2*Math.PI)/d))+P:h*Math.pow(2,-10*(r-=1))*Math.sin((r*I-o)*(2*Math.PI)/d)*.5+p+P)},S.easeInBack=function(r,P,p,I,o){return o===void 0&&(o=1.70158),p*(r/=I)*r*((o+1)*r-o)+P},S.easeOutBack=function(r,P,p,I,o){return o===void 0&&(o=1.70158),p*((r=r/I-1)*r*((o+1)*r+o)+1)+P},S.easeInOutBack=function(r,P,p,I,o){return o===void 0&&(o=1.70158),(r/=I/2)<1?p/2*(r*r*(((o*=1.525)+1)*r-o))+P:p/2*((r-=2)*r*(((o*=1.525)+1)*r+o)+2)+P},S.easeInBounce=function(r,P,p,I){return p-S.easeOutBounce(I-r,0,p,I)+P},S.easeOutBounce=function(r,P,p,I){return(r/=I)<1/2.75?p*(7.5625*r*r)+P:r<2/2.75?p*(7.5625*(r-=1.5/2.75)*r+.75)+P:r<2.5/2.75?p*(7.5625*(r-=2.25/2.75)*r+.9375)+P:p*(7.5625*(r-=2.625/2.75)*r+.984375)+P},S.easeInOutBounce=function(r,P,p,I){return r<I/2?S.easeInBounce(r*2,0,p,I)*.5+P:S.easeOutBounce(r*2-I,0,p,I)*.5+p*.5+P},S.easing=function(r){var P=S[r],p=Array.prototype.slice.call(arguments,1);return P.apply(null,p)},Ze=S,Ze}var Ue,Nr;function ni(){if(Nr)return Ue;Nr=1;var S=qn(),r=He(),P=ie(),p=ze(),I={};function o(u){for(var x in u)I[x]=u[x]}for(var d in P)I[d]=P[d];delete I.delete;for(var d in p)I[d]=p[d];o(Ur()),o(Qn()),o(Hr()),o(Kn()),o(ti()),o(ei()),o(ri()),I.importSVG=function(u){return I.svg.parseString(u)},I.importImage=function(u){var x=I.Layer.fromImage(u);return new I.Img(x.toCanvas())},I.importText=function(u){return u?String(u):""};function h(u,x){var b=[],C,w="",O,l=!1;for(u=u.trim(),O=0;O<u.length;O+=1)C=u[O],C==='"'?u[O+1]==='"'?(w+='"',O+=1):l=!l:C===x?l?w+=C:(b.push(w),w=""):w+=C;return b.push(w),b}return I.importCSV=function(u,x){var b,C;if(x=x||",",!u)return null;b=u.split(/\r\n|\r|\n/g),C=h(b[0],x),b=b.slice(1);for(var w,O=[],l,g,m,i,s=0;s<b.length;s+=1)if(w=b[s],!S(w)){for(l={},g=h(w,x),i=0;i<g.length;i+=1)m=g[i],l[C[i]]=isNaN(m)?m:parseFloat(m);O.push(l)}return O},I.merge=function(){var u=r(arguments);if(Array.isArray(u)){for(var x=[],b=0;b<u.length;b+=1)S(u[b])||x.push(u[b]);if(x.length>0){var C=x[0];if(C&&(C.commands||C.shapes||C.fontFamily))return P.merge(x);if(C instanceof p.Img)return p.merge(x)}}return null},I.mix=function(u,x,b){if(b=b!==void 0?b:.5,typeof u=="number")return u*(1-b)+x*b;if(u instanceof I.Color&&x instanceof I.Color)return new I.Color(I.mix(u.r,x.r,b),I.mix(u.g,x.g,b),I.mix(u.b,x.b,b),I.mix(u.a,x.a,b));if(typeof u=="object"){for(var C={},w=Object.keys(u),O=0,l=w.length;O<l;O+=1){var g=w[O],m=u[g],i=x[g];m!==void 0&&i!==void 0&&(C[g]=I.mix(m,i,b))}return C}else return 0},Ue=I,Ue}var ii=ni();const ai=Wn(ii);export{li as a,Wn as b,oi as c,ai as g};
